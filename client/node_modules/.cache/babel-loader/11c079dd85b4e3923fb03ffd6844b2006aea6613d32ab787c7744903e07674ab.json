{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/collection/ui.collection_widget.base.js)\r\n * Version: 23.1.5\r\n * Build date: Wed Aug 30 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getOuterWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { ensureDefined, deferRenderer, noop } from \"../../core/utils/common\";\nimport { findTemplates } from \"../../core/utils/template_manager\";\nimport { getPublicElement } from \"../../core/element\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { isPlainObject, isFunction, isDefined } from \"../../core/utils/type\";\nimport { when } from \"../../core/utils/deferred\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport Action from \"../../core/action\";\nimport Guid from \"../../core/guid\";\nimport Widget from \"../widget/ui.widget\";\nimport { addNamespace, isCommandKeyPressed } from \"../../events/utils/index\";\nimport pointerEvents from \"../../events/pointer\";\nimport DataHelperMixin from \"../../data_helper\";\nimport CollectionWidgetItem from \"./item\";\nimport { focusable } from \"../widget/selectors\";\nimport messageLocalization from \"../../localization/message\";\nimport holdEvent from \"../../events/hold\";\nimport { compileGetter } from \"../../core/utils/data\";\nimport { name as clickEventName } from \"../../events/click\";\nimport { name as contextMenuEventName } from \"../../events/contextmenu\";\nimport { BindableTemplate } from \"../../core/templates/bindable_template\";\nvar COLLECTION_CLASS = \"dx-collection\";\nvar ITEM_CLASS = \"dx-item\";\nvar CONTENT_CLASS_POSTFIX = \"-content\";\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\nvar ITEM_DATA_KEY = \"dxItemData\";\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\nvar ITEMS_OPTIONS_NAME = \"dxItem\";\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\nvar ANONYMOUS_TEMPLATE_NAME = \"item\";\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar FOCUS_PAGE_UP = \"pageup\";\nvar FOCUS_PAGE_DOWN = \"pagedown\";\nvar FOCUS_LAST = \"last\";\nvar FOCUS_FIRST = \"first\";\nvar CollectionWidget = Widget.inherit({\n  _activeStateUnit: \".\" + ITEM_CLASS,\n  _supportedKeys: function () {\n    var move = function (location, e) {\n      if (!isCommandKeyPressed(e)) {\n        e.preventDefault();\n        e.stopPropagation();\n        this._moveFocus(location, e);\n      }\n    };\n    return extend(this.callBase(), {\n      space: function (e) {\n        e.preventDefault();\n        this._enterKeyHandler(e);\n      },\n      enter: this._enterKeyHandler,\n      leftArrow: move.bind(this, FOCUS_LEFT),\n      rightArrow: move.bind(this, FOCUS_RIGHT),\n      upArrow: move.bind(this, FOCUS_UP),\n      downArrow: move.bind(this, FOCUS_DOWN),\n      pageUp: move.bind(this, FOCUS_UP),\n      pageDown: move.bind(this, FOCUS_DOWN),\n      home: move.bind(this, FOCUS_FIRST),\n      end: move.bind(this, FOCUS_LAST)\n    });\n  },\n  _enterKeyHandler: function (e) {\n    var $itemElement = $(this.option(\"focusedElement\"));\n    if (!$itemElement.length) {\n      return;\n    }\n    var itemData = this._getItemData($itemElement);\n    if (null !== itemData && void 0 !== itemData && itemData.onClick) {\n      this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\n        event: e\n      });\n    }\n    this._itemClickHandler(extend({}, e, {\n      target: $itemElement.get(0),\n      currentTarget: $itemElement.get(0)\n    }));\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      selectOnFocus: false,\n      loopItemFocus: true,\n      items: [],\n      itemTemplate: \"item\",\n      onItemRendered: null,\n      onItemClick: null,\n      onItemHold: null,\n      itemHoldTimeout: 750,\n      onItemContextMenu: null,\n      onFocusedItemChanged: null,\n      noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\n      encodeNoDataText: false,\n      dataSource: null,\n      _dataController: null,\n      _itemAttributes: {},\n      itemTemplateProperty: \"template\",\n      focusOnSelectedItem: true,\n      focusedElement: null,\n      displayExpr: void 0,\n      disabledExpr: function (data) {\n        return data ? data.disabled : void 0;\n      },\n      visibleExpr: function (data) {\n        return data ? data.visible : void 0;\n      }\n    });\n  },\n  _init: function () {\n    this._compileDisplayGetter();\n    this._initDataController();\n    this.callBase();\n    this._cleanRenderedItems();\n    this._refreshDataSource();\n  },\n  _compileDisplayGetter: function () {\n    var displayExpr = this.option(\"displayExpr\");\n    this._displayGetter = displayExpr ? compileGetter(this.option(\"displayExpr\")) : void 0;\n  },\n  _initTemplates: function () {\n    this._initItemsFromMarkup();\n    this._initDefaultItemTemplate();\n    this.callBase();\n  },\n  _getAnonymousTemplateName: function () {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _initDefaultItemTemplate: function () {\n    var fieldsMap = this._getFieldsMap();\n    this._templateManager.addDefaultTemplates({\n      item: new BindableTemplate(function ($container, data) {\n        if (isPlainObject(data)) {\n          this._prepareDefaultItemTemplate(data, $container);\n        } else {\n          if (fieldsMap && isFunction(fieldsMap.text)) {\n            data = fieldsMap.text(data);\n          }\n          $container.text(String(ensureDefined(data, \"\")));\n        }\n      }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\n    });\n  },\n  _getBindableFields: function () {\n    return [\"text\", \"html\"];\n  },\n  _getFieldsMap: function () {\n    if (this._displayGetter) {\n      return {\n        text: this._displayGetter\n      };\n    }\n  },\n  _prepareDefaultItemTemplate: function (data, $container) {\n    if (isDefined(data.text)) {\n      $container.text(data.text);\n    }\n    if (isDefined(data.html)) {\n      $container.html(data.html);\n    }\n  },\n  _initItemsFromMarkup: function () {\n    var rawItems = findTemplates(this.$element(), ITEMS_OPTIONS_NAME);\n    if (!rawItems.length || this.option(\"items\").length) {\n      return;\n    }\n    var items = rawItems.map(_ref => {\n      var {\n        element: element,\n        options: options\n      } = _ref;\n      var isTemplateRequired = /\\S/.test(element.innerHTML) && !options.template;\n      if (isTemplateRequired) {\n        options.template = this._prepareItemTemplate(element);\n      } else {\n        $(element).remove();\n      }\n      return options;\n    });\n    this.option(\"items\", items);\n  },\n  _prepareItemTemplate: function (item) {\n    var templateId = ITEM_TEMPLATE_ID_PREFIX + new Guid();\n    var $template = $(item).detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\n    this._saveTemplate(templateId, $template);\n    return templateId;\n  },\n  _dataSourceOptions: function () {\n    return {\n      paginate: false\n    };\n  },\n  _cleanRenderedItems: function () {\n    this._renderedItemsCount = 0;\n  },\n  _focusTarget: function () {\n    return this.$element();\n  },\n  _focusInHandler: function (e) {\n    this.callBase.apply(this, arguments);\n    if (!this._isFocusTarget(e.target)) {\n      return;\n    }\n    var $focusedElement = $(this.option(\"focusedElement\"));\n    if ($focusedElement.length) {\n      this._setFocusedItem($focusedElement);\n    } else {\n      var $activeItem = this._getActiveItem();\n      if ($activeItem.length) {\n        this.option(\"focusedElement\", getPublicElement($activeItem));\n      }\n    }\n  },\n  _focusOutHandler: function () {\n    this.callBase.apply(this, arguments);\n    var $target = $(this.option(\"focusedElement\"));\n    this._updateFocusedItemState($target, false);\n  },\n  _findActiveTarget($element) {\n    return $element.find(this._activeStateUnit);\n  },\n  _getActiveItem: function (last) {\n    var $focusedElement = $(this.option(\"focusedElement\"));\n    if ($focusedElement.length) {\n      return $focusedElement;\n    }\n    var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\n    var activeElements = this._getActiveElement();\n    var lastIndex = activeElements.length - 1;\n    if (index < 0) {\n      index = last ? lastIndex : 0;\n    }\n    return activeElements.eq(index);\n  },\n  _moveFocus: function (location) {\n    var $items = this._getAvailableItems();\n    var $newTarget;\n    switch (location) {\n      case FOCUS_PAGE_UP:\n      case FOCUS_UP:\n        $newTarget = this._prevItem($items);\n        break;\n      case FOCUS_PAGE_DOWN:\n      case FOCUS_DOWN:\n        $newTarget = this._nextItem($items);\n        break;\n      case FOCUS_RIGHT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\n        break;\n      case FOCUS_LEFT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\n        break;\n      case FOCUS_FIRST:\n        $newTarget = $items.first();\n        break;\n      case FOCUS_LAST:\n        $newTarget = $items.last();\n        break;\n      default:\n        return false;\n    }\n    if (0 !== $newTarget.length) {\n      this.option(\"focusedElement\", getPublicElement($newTarget));\n    }\n  },\n  _getVisibleItems: function ($itemElements) {\n    $itemElements = $itemElements || this._itemElements();\n    return $itemElements.filter(\":visible\");\n  },\n  _getAvailableItems: function ($itemElements) {\n    return this._getVisibleItems($itemElements);\n  },\n  _prevItem: function ($items) {\n    var $target = this._getActiveItem();\n    var targetIndex = $items.index($target);\n    var $last = $items.last();\n    var $item = $($items[targetIndex - 1]);\n    var loop = this.option(\"loopItemFocus\");\n    if (0 === $item.length && loop) {\n      $item = $last;\n    }\n    return $item;\n  },\n  _nextItem: function ($items) {\n    var $target = this._getActiveItem(true);\n    var targetIndex = $items.index($target);\n    var $first = $items.first();\n    var $item = $($items[targetIndex + 1]);\n    var loop = this.option(\"loopItemFocus\");\n    if (0 === $item.length && loop) {\n      $item = $first;\n    }\n    return $item;\n  },\n  _selectFocusedItem: function ($target) {\n    this.selectItem($target);\n  },\n  _updateFocusedItemState: function (target, isFocused, needCleanItemId) {\n    var $target = $(target);\n    if ($target.length) {\n      this._refreshActiveDescendant();\n      this._refreshItemId($target, needCleanItemId);\n      this._toggleFocusClass(isFocused, $target);\n    }\n    this._updateParentActiveDescendant();\n  },\n  _refreshActiveDescendant: function ($target) {\n    this.setAria(\"activedescendant\", isDefined(this.option(\"focusedElement\")) ? this.getFocusedItemId() : null, $target);\n  },\n  _refreshItemId: function ($target, needCleanItemId) {\n    if (!needCleanItemId && this.option(\"focusedElement\")) {\n      this.setAria(\"id\", this.getFocusedItemId(), $target);\n    } else {\n      this.setAria(\"id\", null, $target);\n    }\n  },\n  _isDisabled: $element => $element && \"true\" === $($element).attr(\"aria-disabled\"),\n  _setFocusedItem: function ($target) {\n    if (!$target || !$target.length) {\n      return;\n    }\n    this._updateFocusedItemState($target, true);\n    this.onFocusedItemChanged(this.getFocusedItemId());\n    var {\n      selectOnFocus: selectOnFocus\n    } = this.option();\n    var isTargetDisabled = this._isDisabled($target);\n    if (selectOnFocus && !isTargetDisabled) {\n      this._selectFocusedItem($target);\n    }\n  },\n  _findItemElementByItem: function (item) {\n    var result = $();\n    var that = this;\n    this.itemElements().each(function () {\n      var $item = $(this);\n      if ($item.data(that._itemDataKey()) === item) {\n        result = $item;\n        return false;\n      }\n    });\n    return result;\n  },\n  _getIndexByItem: function (item) {\n    return this.option(\"items\").indexOf(item);\n  },\n  _itemOptionChanged: function (item, property, value, oldValue) {\n    var $item = this._findItemElementByItem(item);\n    if (!$item.length) {\n      return;\n    }\n    if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\n      this._refreshItem($item, item);\n    }\n    var isDisabling = \"disabled\" === property && value;\n    if (isDisabling) {\n      this._resetItemFocus($item);\n    }\n  },\n  _resetItemFocus($item) {\n    if ($item.is(this.option(\"focusedElement\"))) {\n      this.option(\"focusedElement\", null);\n    }\n  },\n  _refreshItem: function ($item) {\n    var itemData = this._getItemData($item);\n    var index = $item.data(this._itemIndexKey());\n    this._renderItem(this._renderedItemsCount + index, itemData, null, $item);\n  },\n  _updateParentActiveDescendant: noop,\n  _optionChanged: function (args) {\n    if (\"items\" === args.name) {\n      var matches = args.fullName.match(ITEM_PATH_REGEX);\n      if (matches && matches.length) {\n        var property = matches[matches.length - 1];\n        var itemPath = args.fullName.replace(\".\" + property, \"\");\n        var item = this.option(itemPath);\n        this._itemOptionChanged(item, property, args.value, args.previousValue);\n        return;\n      }\n    }\n    switch (args.name) {\n      case \"items\":\n      case \"_itemAttributes\":\n      case \"itemTemplateProperty\":\n      case \"useItemTextAsTitle\":\n        this._cleanRenderedItems();\n        this._invalidate();\n        break;\n      case \"dataSource\":\n        this._refreshDataSource();\n        this._renderEmptyMessage();\n        break;\n      case \"noDataText\":\n      case \"encodeNoDataText\":\n        this._renderEmptyMessage();\n        break;\n      case \"itemTemplate\":\n        this._invalidate();\n        break;\n      case \"onItemRendered\":\n        this._createItemRenderAction();\n        break;\n      case \"onItemClick\":\n        break;\n      case \"onItemHold\":\n      case \"itemHoldTimeout\":\n        this._attachHoldEvent();\n        break;\n      case \"onItemContextMenu\":\n        this._attachContextMenuEvent();\n        break;\n      case \"onFocusedItemChanged\":\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n        break;\n      case \"selectOnFocus\":\n      case \"loopItemFocus\":\n      case \"focusOnSelectedItem\":\n        break;\n      case \"focusedElement\":\n        this._updateFocusedItemState(args.previousValue, false, true);\n        this._setFocusedItem($(args.value));\n        break;\n      case \"displayExpr\":\n        this._compileDisplayGetter();\n        this._initDefaultItemTemplate();\n        this._invalidate();\n        break;\n      case \"visibleExpr\":\n      case \"disabledExpr\":\n        this._invalidate();\n        break;\n      default:\n        this.callBase(args);\n    }\n  },\n  _invalidate: function () {\n    this.option(\"focusedElement\", null);\n    return this.callBase.apply(this, arguments);\n  },\n  _loadNextPage: function () {\n    this._expectNextPageLoading();\n    return this._dataController.loadNextPage();\n  },\n  _expectNextPageLoading: function () {\n    this._startIndexForAppendedItems = 0;\n  },\n  _expectLastItemLoading: function () {\n    this._startIndexForAppendedItems = -1;\n  },\n  _forgetNextPageLoading: function () {\n    this._startIndexForAppendedItems = null;\n  },\n  _dataSourceChangedHandler: function (newItems) {\n    var items = this.option(\"items\");\n    if (this._initialized && items && this._shouldAppendItems()) {\n      this._renderedItemsCount = items.length;\n      if (!this._isLastPage() || -1 !== this._startIndexForAppendedItems) {\n        this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems));\n      }\n      this._forgetNextPageLoading();\n      this._refreshContent();\n    } else {\n      this.option(\"items\", newItems.slice());\n    }\n  },\n  _refreshContent: function () {\n    this._prepareContent();\n    this._renderContent();\n  },\n  _dataSourceLoadErrorHandler: function () {\n    this._forgetNextPageLoading();\n    this.option(\"items\", this.option(\"items\"));\n  },\n  _shouldAppendItems: function () {\n    return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend();\n  },\n  _allowDynamicItemsAppend: function () {\n    return false;\n  },\n  _clean: function () {\n    this._cleanFocusState();\n    this._cleanItemContainer();\n    this._inkRipple && delete this._inkRipple;\n    this._resetActiveState();\n  },\n  _cleanItemContainer: function () {\n    $(this._itemContainer()).empty();\n  },\n  _dispose: function () {\n    this.callBase();\n    clearTimeout(this._itemFocusTimeout);\n  },\n  _refresh: function () {\n    this._cleanRenderedItems();\n    this.callBase.apply(this, arguments);\n  },\n  _itemContainer: function () {\n    return this.$element();\n  },\n  _itemClass: function () {\n    return ITEM_CLASS;\n  },\n  _itemContentClass: function () {\n    return this._itemClass() + CONTENT_CLASS_POSTFIX;\n  },\n  _selectedItemClass: function () {\n    return SELECTED_ITEM_CLASS;\n  },\n  _itemResponseWaitClass: function () {\n    return ITEM_RESPONSE_WAIT_CLASS;\n  },\n  _itemSelector: function () {\n    return \".\" + this._itemClass();\n  },\n  _itemDataKey: function () {\n    return ITEM_DATA_KEY;\n  },\n  _itemIndexKey: function () {\n    return ITEM_INDEX_KEY;\n  },\n  _itemElements: function () {\n    return this._itemContainer().find(this._itemSelector());\n  },\n  _initMarkup: function () {\n    this.callBase();\n    this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n    this.$element().addClass(COLLECTION_CLASS);\n    this._prepareContent();\n  },\n  _prepareContent: deferRenderer(function () {\n    this._renderContentImpl();\n  }),\n  _renderContent: function () {\n    this._fireContentReadyAction();\n  },\n  _render: function () {\n    this.callBase();\n    this._attachClickEvent();\n    this._attachHoldEvent();\n    this._attachContextMenuEvent();\n  },\n  _getPointerEvent: () => pointerEvents.down,\n  _attachClickEvent() {\n    var itemSelector = this._itemSelector();\n    var pointerEvent = this._getPointerEvent();\n    var clickEventNamespace = addNamespace(clickEventName, this.NAME);\n    var pointerEventNamespace = addNamespace(pointerEvent, this.NAME);\n    var pointerAction = new Action(args => {\n      var {\n        event: event\n      } = args;\n      this._itemPointerDownHandler(event);\n    });\n    eventsEngine.off(this._itemContainer(), clickEventNamespace, itemSelector);\n    eventsEngine.off(this._itemContainer(), pointerEventNamespace, itemSelector);\n    eventsEngine.on(this._itemContainer(), clickEventNamespace, itemSelector, e => this._itemClickHandler(e));\n    eventsEngine.on(this._itemContainer(), pointerEventNamespace, itemSelector, e => {\n      pointerAction.execute({\n        element: $(e.target),\n        event: e\n      });\n    });\n  },\n  _itemClickHandler: function (e, args, config) {\n    this._itemDXEventHandler(e, \"onItemClick\", args, config);\n  },\n  _itemPointerDownHandler: function (e) {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n    this._itemFocusHandler = function () {\n      clearTimeout(this._itemFocusTimeout);\n      this._itemFocusHandler = null;\n      if (e.isDefaultPrevented()) {\n        return;\n      }\n      var $target = $(e.target);\n      var $closestItem = $target.closest(this._itemElements());\n      var $closestFocusable = this._closestFocusable($target);\n      if ($closestItem.length && this._isFocusTarget(null === $closestFocusable || void 0 === $closestFocusable ? void 0 : $closestFocusable.get(0))) {\n        this.option(\"focusedElement\", getPublicElement($closestItem));\n      }\n    }.bind(this);\n    this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this));\n  },\n  _closestFocusable: function ($target) {\n    if ($target.is(focusable)) {\n      return $target;\n    } else {\n      $target = $target.parent();\n      while ($target.length && !domAdapter.isDocument($target.get(0)) && !domAdapter.isDocumentFragment($target.get(0))) {\n        if ($target.is(focusable)) {\n          return $target;\n        }\n        $target = $target.parent();\n      }\n    }\n  },\n  _forcePointerDownFocus: function () {\n    this._itemFocusHandler && this._itemFocusHandler();\n  },\n  _updateFocusState: function () {\n    this.callBase.apply(this, arguments);\n    this._forcePointerDownFocus();\n  },\n  _attachHoldEvent: function () {\n    var $itemContainer = this._itemContainer();\n    var itemSelector = this._itemSelector();\n    var eventName = addNamespace(holdEvent.name, this.NAME);\n    eventsEngine.off($itemContainer, eventName, itemSelector);\n    eventsEngine.on($itemContainer, eventName, itemSelector, {\n      timeout: this._getHoldTimeout()\n    }, this._itemHoldHandler.bind(this));\n  },\n  _getHoldTimeout: function () {\n    return this.option(\"itemHoldTimeout\");\n  },\n  _shouldFireHoldEvent: function () {\n    return this.hasActionSubscription(\"onItemHold\");\n  },\n  _itemHoldHandler: function (e) {\n    if (this._shouldFireHoldEvent()) {\n      this._itemDXEventHandler(e, \"onItemHold\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _attachContextMenuEvent: function () {\n    var $itemContainer = this._itemContainer();\n    var itemSelector = this._itemSelector();\n    var eventName = addNamespace(contextMenuEventName, this.NAME);\n    eventsEngine.off($itemContainer, eventName, itemSelector);\n    eventsEngine.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this));\n  },\n  _shouldFireContextMenuEvent: function () {\n    return this.hasActionSubscription(\"onItemContextMenu\");\n  },\n  _itemContextMenuHandler: function (e) {\n    if (this._shouldFireContextMenuEvent()) {\n      this._itemDXEventHandler(e, \"onItemContextMenu\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _renderContentImpl: function () {\n    var items = this.option(\"items\") || [];\n    if (this._renderedItemsCount) {\n      this._renderItems(items.slice(this._renderedItemsCount));\n    } else {\n      this._renderItems(items);\n    }\n  },\n  _renderItems: function (items) {\n    if (items.length) {\n      each(items, function (index, itemData) {\n        this._renderItem(this._renderedItemsCount + index, itemData);\n      }.bind(this));\n    }\n    this._renderEmptyMessage();\n  },\n  _renderItem: function (index, itemData, $container, $itemToReplace) {\n    var _index$item;\n    var itemIndex = null !== (_index$item = null === index || void 0 === index ? void 0 : index.item) && void 0 !== _index$item ? _index$item : index;\n    $container = $container || this._itemContainer();\n    var $itemFrame = this._renderItemFrame(itemIndex, itemData, $container, $itemToReplace);\n    this._setElementData($itemFrame, itemData, itemIndex);\n    $itemFrame.attr(this.option(\"_itemAttributes\"));\n    this._attachItemClickEvent(itemData, $itemFrame);\n    var $itemContent = this._getItemContent($itemFrame);\n    var renderContentPromise = this._renderItemContent({\n      index: itemIndex,\n      itemData: itemData,\n      container: getPublicElement($itemContent),\n      contentClass: this._itemContentClass(),\n      defaultTemplateName: this.option(\"itemTemplate\")\n    });\n    var that = this;\n    when(renderContentPromise).done(function ($itemContent) {\n      that._postprocessRenderItem({\n        itemElement: $itemFrame,\n        itemContent: $itemContent,\n        itemData: itemData,\n        itemIndex: itemIndex\n      });\n      that._executeItemRenderAction(index, itemData, getPublicElement($itemFrame));\n    });\n    return $itemFrame;\n  },\n  _getItemContent: function ($itemFrame) {\n    var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\n    $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\n    return $itemContent;\n  },\n  _attachItemClickEvent: function (itemData, $itemElement) {\n    if (!itemData || !itemData.onClick) {\n      return;\n    }\n    eventsEngine.on($itemElement, clickEventName, function (e) {\n      this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\n        event: e\n      });\n    }.bind(this));\n  },\n  _renderItemContent: function (args) {\n    var itemTemplateName = this._getItemTemplateName(args);\n    var itemTemplate = this._getTemplate(itemTemplateName);\n    this._addItemContentClasses(args);\n    var $templateResult = $(this._createItemByTemplate(itemTemplate, args));\n    if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\n      return args.container;\n    }\n    return this._renderItemContentByNode(args, $templateResult);\n  },\n  _renderItemContentByNode: function (args, $node) {\n    $(args.container).replaceWith($node);\n    args.container = getPublicElement($node);\n    this._addItemContentClasses(args);\n    return $node;\n  },\n  _addItemContentClasses: function (args) {\n    var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\n    $(args.container).addClass(classes.join(\" \"));\n  },\n  _appendItemToContainer: function ($container, $itemFrame, index) {\n    $itemFrame.appendTo($container);\n  },\n  _renderItemFrame: function (index, itemData, $container, $itemToReplace) {\n    var $itemFrame = $(\"<div>\");\n    new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\n    if ($itemToReplace && $itemToReplace.length) {\n      $itemToReplace.replaceWith($itemFrame);\n    } else {\n      this._appendItemToContainer.call(this, $container, $itemFrame, index);\n    }\n    if (this.option(\"useItemTextAsTitle\")) {\n      var displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\n      $itemFrame.attr(\"title\", displayValue);\n    }\n    return $itemFrame;\n  },\n  _itemOptions: function () {\n    var that = this;\n    return {\n      watchMethod: function () {\n        return that.option(\"integrationOptions.watchMethod\");\n      },\n      owner: that,\n      fieldGetter: function (field) {\n        var expr = that.option(field + \"Expr\");\n        var getter = compileGetter(expr);\n        return getter;\n      }\n    };\n  },\n  _postprocessRenderItem: noop,\n  _executeItemRenderAction: function (index, itemData, itemElement) {\n    this._getItemRenderAction()({\n      itemElement: itemElement,\n      itemIndex: index,\n      itemData: itemData\n    });\n  },\n  _setElementData: function (element, data, index) {\n    element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index);\n  },\n  _createItemRenderAction: function () {\n    return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\n      element: this.element(),\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n  },\n  _getItemRenderAction: function () {\n    return this._itemRenderAction || this._createItemRenderAction();\n  },\n  _getItemTemplateName: function (args) {\n    var data = args.itemData;\n    var templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\n    var template = data && data[templateProperty];\n    return template || args.defaultTemplateName;\n  },\n  _createItemByTemplate: function (itemTemplate, renderArgs) {\n    return itemTemplate.render({\n      model: renderArgs.itemData,\n      container: renderArgs.container,\n      index: renderArgs.index,\n      onRendered: this._onItemTemplateRendered(itemTemplate, renderArgs)\n    });\n  },\n  _onItemTemplateRendered: function () {\n    return noop;\n  },\n  _emptyMessageContainer: function () {\n    return this._itemContainer();\n  },\n  _renderEmptyMessage: function (items) {\n    items = items || this.option(\"items\");\n    var noDataText = this.option(\"noDataText\");\n    var hideNoData = !noDataText || items && items.length || this._dataController.isLoading();\n    if (hideNoData && this._$noData) {\n      this._$noData.remove();\n      this._$noData = null;\n      this.setAria(\"label\", void 0);\n    }\n    if (!hideNoData) {\n      this._$noData = this._$noData || $(\"<div>\").addClass(\"dx-empty-message\");\n      this._$noData.appendTo(this._emptyMessageContainer());\n      if (this.option(\"encodeNoDataText\")) {\n        this._$noData.text(noDataText);\n      } else {\n        this._$noData.html(noDataText);\n      }\n    }\n    this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData);\n  },\n  _itemDXEventHandler: function (dxEvent, handlerOptionName, actionArgs, actionConfig) {\n    this._itemEventHandler(dxEvent.target, handlerOptionName, extend(actionArgs, {\n      event: dxEvent\n    }), actionConfig);\n  },\n  _itemEventHandler: function (initiator, handlerOptionName, actionArgs, actionConfig) {\n    var action = this._createActionByOption(handlerOptionName, extend({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerByHandler: function (initiator, handler, actionArgs, actionConfig) {\n    var action = this._createAction(handler, extend({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerImpl: function (initiator, action, actionArgs) {\n    var $itemElement = this._closestItemElement($(initiator));\n    var args = extend({}, actionArgs);\n    return action(extend(actionArgs, this._extendActionArgs($itemElement), args));\n  },\n  _extendActionArgs: function ($itemElement) {\n    return {\n      itemElement: getPublicElement($itemElement),\n      itemIndex: this._itemElements().index($itemElement),\n      itemData: this._getItemData($itemElement)\n    };\n  },\n  _closestItemElement: function ($element) {\n    return $($element).closest(this._itemSelector());\n  },\n  _getItemData: function (itemElement) {\n    return $(itemElement).data(this._itemDataKey());\n  },\n  _getSummaryItemsWidth: function (items, includeMargin) {\n    var result = 0;\n    if (items) {\n      each(items, function (_, item) {\n        result += getOuterWidth(item, includeMargin || false);\n      });\n    }\n    return result;\n  },\n  getFocusedItemId: function () {\n    if (!this._focusedItemId) {\n      this._focusedItemId = \"dx-\" + new Guid();\n    }\n    return this._focusedItemId;\n  },\n  itemElements: function () {\n    return this._itemElements();\n  },\n  itemsContainer: function () {\n    return this._itemContainer();\n  }\n}).include(DataHelperMixin);\nCollectionWidget.ItemClass = CollectionWidgetItem;\nexport default CollectionWidget;","map":{"version":3,"names":["getOuterWidth","$","eventsEngine","ensureDefined","deferRenderer","noop","findTemplates","getPublicElement","domAdapter","isPlainObject","isFunction","isDefined","when","extend","each","Action","Guid","Widget","addNamespace","isCommandKeyPressed","pointerEvents","DataHelperMixin","CollectionWidgetItem","focusable","messageLocalization","holdEvent","compileGetter","name","clickEventName","contextMenuEventName","BindableTemplate","COLLECTION_CLASS","ITEM_CLASS","CONTENT_CLASS_POSTFIX","ITEM_CONTENT_PLACEHOLDER_CLASS","ITEM_DATA_KEY","ITEM_INDEX_KEY","ITEM_TEMPLATE_ID_PREFIX","ITEMS_OPTIONS_NAME","SELECTED_ITEM_CLASS","ITEM_RESPONSE_WAIT_CLASS","EMPTY_COLLECTION","TEMPLATE_WRAPPER_CLASS","ITEM_PATH_REGEX","ANONYMOUS_TEMPLATE_NAME","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_PAGE_UP","FOCUS_PAGE_DOWN","FOCUS_LAST","FOCUS_FIRST","CollectionWidget","inherit","_activeStateUnit","_supportedKeys","move","location","e","preventDefault","stopPropagation","_moveFocus","callBase","space","_enterKeyHandler","enter","leftArrow","bind","rightArrow","upArrow","downArrow","pageUp","pageDown","home","end","$itemElement","option","length","itemData","_getItemData","onClick","_itemEventHandlerByHandler","event","_itemClickHandler","target","get","currentTarget","_getDefaultOptions","selectOnFocus","loopItemFocus","items","itemTemplate","onItemRendered","onItemClick","onItemHold","itemHoldTimeout","onItemContextMenu","onFocusedItemChanged","noDataText","format","encodeNoDataText","dataSource","_dataController","_itemAttributes","itemTemplateProperty","focusOnSelectedItem","focusedElement","displayExpr","disabledExpr","data","disabled","visibleExpr","visible","_init","_compileDisplayGetter","_initDataController","_cleanRenderedItems","_refreshDataSource","_displayGetter","_initTemplates","_initItemsFromMarkup","_initDefaultItemTemplate","_getAnonymousTemplateName","fieldsMap","_getFieldsMap","_templateManager","addDefaultTemplates","item","$container","_prepareDefaultItemTemplate","text","String","_getBindableFields","html","rawItems","$element","map","_ref","element","options","isTemplateRequired","test","innerHTML","template","_prepareItemTemplate","remove","templateId","$template","detach","clone","removeAttr","addClass","_saveTemplate","_dataSourceOptions","paginate","_renderedItemsCount","_focusTarget","_focusInHandler","apply","arguments","_isFocusTarget","$focusedElement","_setFocusedItem","$activeItem","_getActiveItem","_focusOutHandler","$target","_updateFocusedItemState","_findActiveTarget","find","last","index","activeElements","_getActiveElement","lastIndex","eq","$items","_getAvailableItems","$newTarget","_prevItem","_nextItem","first","_getVisibleItems","$itemElements","_itemElements","filter","targetIndex","$last","$item","loop","$first","_selectFocusedItem","selectItem","isFocused","needCleanItemId","_refreshActiveDescendant","_refreshItemId","_toggleFocusClass","_updateParentActiveDescendant","setAria","getFocusedItemId","_isDisabled","attr","isTargetDisabled","_findItemElementByItem","result","that","itemElements","_itemDataKey","_getIndexByItem","indexOf","_itemOptionChanged","property","value","oldValue","constructor","ItemClass","getInstance","setDataField","_refreshItem","isDisabling","_resetItemFocus","is","_itemIndexKey","_renderItem","_optionChanged","args","matches","fullName","match","itemPath","replace","previousValue","_invalidate","_renderEmptyMessage","_createItemRenderAction","_attachHoldEvent","_attachContextMenuEvent","_createActionByOption","_loadNextPage","_expectNextPageLoading","loadNextPage","_startIndexForAppendedItems","_expectLastItemLoading","_forgetNextPageLoading","_dataSourceChangedHandler","newItems","_initialized","_shouldAppendItems","_isLastPage","concat","slice","_refreshContent","_prepareContent","_renderContent","_dataSourceLoadErrorHandler","_allowDynamicItemsAppend","_clean","_cleanFocusState","_cleanItemContainer","_inkRipple","_resetActiveState","_itemContainer","empty","_dispose","clearTimeout","_itemFocusTimeout","_refresh","_itemClass","_itemContentClass","_selectedItemClass","_itemResponseWaitClass","_itemSelector","_initMarkup","_renderContentImpl","_fireContentReadyAction","_render","_attachClickEvent","_getPointerEvent","down","itemSelector","pointerEvent","clickEventNamespace","NAME","pointerEventNamespace","pointerAction","_itemPointerDownHandler","off","on","execute","config","_itemDXEventHandler","_itemFocusHandler","isDefaultPrevented","$closestItem","closest","$closestFocusable","_closestFocusable","setTimeout","_forcePointerDownFocus","parent","isDocument","isDocumentFragment","_updateFocusState","$itemContainer","eventName","timeout","_getHoldTimeout","_itemHoldHandler","_shouldFireHoldEvent","hasActionSubscription","cancel","_itemContextMenuHandler","_shouldFireContextMenuEvent","_renderItems","$itemToReplace","_index$item","itemIndex","$itemFrame","_renderItemFrame","_setElementData","_attachItemClickEvent","$itemContent","_getItemContent","renderContentPromise","_renderItemContent","container","contentClass","defaultTemplateName","done","_postprocessRenderItem","itemElement","itemContent","_executeItemRenderAction","removeClass","itemTemplateName","_getItemTemplateName","_getTemplate","_addItemContentClasses","$templateResult","_createItemByTemplate","hasClass","_renderItemContentByNode","$node","replaceWith","classes","join","_appendItemToContainer","appendTo","_itemOptions","call","displayValue","watchMethod","owner","fieldGetter","field","expr","getter","_getItemRenderAction","_itemRenderAction","excludeValidators","category","templateProperty","renderArgs","render","model","onRendered","_onItemTemplateRendered","_emptyMessageContainer","hideNoData","isLoading","_$noData","toggleClass","dxEvent","handlerOptionName","actionArgs","actionConfig","_itemEventHandler","initiator","action","validatingTargetName","_itemEventHandlerImpl","handler","_createAction","_closestItemElement","_extendActionArgs","_getSummaryItemsWidth","includeMargin","_","_focusedItemId","itemsContainer","include"],"sources":["C:/Users/Michal Abargel/Desktop/FULLSTACK_PROJECTS/Patient-Management/client/node_modules/devextreme/esm/ui/collection/ui.collection_widget.base.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/collection/ui.collection_widget.base.js)\r\n * Version: 23.1.5\r\n * Build date: Wed Aug 30 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getOuterWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    ensureDefined,\r\n    deferRenderer,\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    findTemplates\r\n} from \"../../core/utils/template_manager\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    isPlainObject,\r\n    isFunction,\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    when\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport Action from \"../../core/action\";\r\nimport Guid from \"../../core/guid\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport {\r\n    addNamespace,\r\n    isCommandKeyPressed\r\n} from \"../../events/utils/index\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport DataHelperMixin from \"../../data_helper\";\r\nimport CollectionWidgetItem from \"./item\";\r\nimport {\r\n    focusable\r\n} from \"../widget/selectors\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport holdEvent from \"../../events/hold\";\r\nimport {\r\n    compileGetter\r\n} from \"../../core/utils/data\";\r\nimport {\r\n    name as clickEventName\r\n} from \"../../events/click\";\r\nimport {\r\n    name as contextMenuEventName\r\n} from \"../../events/contextmenu\";\r\nimport {\r\n    BindableTemplate\r\n} from \"../../core/templates/bindable_template\";\r\nvar COLLECTION_CLASS = \"dx-collection\";\r\nvar ITEM_CLASS = \"dx-item\";\r\nvar CONTENT_CLASS_POSTFIX = \"-content\";\r\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\r\nvar ITEM_DATA_KEY = \"dxItemData\";\r\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\r\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\r\nvar ITEMS_OPTIONS_NAME = \"dxItem\";\r\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\r\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\r\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\r\nvar ANONYMOUS_TEMPLATE_NAME = \"item\";\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar FOCUS_PAGE_UP = \"pageup\";\r\nvar FOCUS_PAGE_DOWN = \"pagedown\";\r\nvar FOCUS_LAST = \"last\";\r\nvar FOCUS_FIRST = \"first\";\r\nvar CollectionWidget = Widget.inherit({\r\n    _activeStateUnit: \".\" + ITEM_CLASS,\r\n    _supportedKeys: function() {\r\n        var move = function(location, e) {\r\n            if (!isCommandKeyPressed(e)) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this._moveFocus(location, e)\r\n            }\r\n        };\r\n        return extend(this.callBase(), {\r\n            space: function(e) {\r\n                e.preventDefault();\r\n                this._enterKeyHandler(e)\r\n            },\r\n            enter: this._enterKeyHandler,\r\n            leftArrow: move.bind(this, FOCUS_LEFT),\r\n            rightArrow: move.bind(this, FOCUS_RIGHT),\r\n            upArrow: move.bind(this, FOCUS_UP),\r\n            downArrow: move.bind(this, FOCUS_DOWN),\r\n            pageUp: move.bind(this, FOCUS_UP),\r\n            pageDown: move.bind(this, FOCUS_DOWN),\r\n            home: move.bind(this, FOCUS_FIRST),\r\n            end: move.bind(this, FOCUS_LAST)\r\n        })\r\n    },\r\n    _enterKeyHandler: function(e) {\r\n        var $itemElement = $(this.option(\"focusedElement\"));\r\n        if (!$itemElement.length) {\r\n            return\r\n        }\r\n        var itemData = this._getItemData($itemElement);\r\n        if (null !== itemData && void 0 !== itemData && itemData.onClick) {\r\n            this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\r\n                event: e\r\n            })\r\n        }\r\n        this._itemClickHandler(extend({}, e, {\r\n            target: $itemElement.get(0),\r\n            currentTarget: $itemElement.get(0)\r\n        }))\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            selectOnFocus: false,\r\n            loopItemFocus: true,\r\n            items: [],\r\n            itemTemplate: \"item\",\r\n            onItemRendered: null,\r\n            onItemClick: null,\r\n            onItemHold: null,\r\n            itemHoldTimeout: 750,\r\n            onItemContextMenu: null,\r\n            onFocusedItemChanged: null,\r\n            noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\r\n            encodeNoDataText: false,\r\n            dataSource: null,\r\n            _dataController: null,\r\n            _itemAttributes: {},\r\n            itemTemplateProperty: \"template\",\r\n            focusOnSelectedItem: true,\r\n            focusedElement: null,\r\n            displayExpr: void 0,\r\n            disabledExpr: function(data) {\r\n                return data ? data.disabled : void 0\r\n            },\r\n            visibleExpr: function(data) {\r\n                return data ? data.visible : void 0\r\n            }\r\n        })\r\n    },\r\n    _init: function() {\r\n        this._compileDisplayGetter();\r\n        this._initDataController();\r\n        this.callBase();\r\n        this._cleanRenderedItems();\r\n        this._refreshDataSource()\r\n    },\r\n    _compileDisplayGetter: function() {\r\n        var displayExpr = this.option(\"displayExpr\");\r\n        this._displayGetter = displayExpr ? compileGetter(this.option(\"displayExpr\")) : void 0\r\n    },\r\n    _initTemplates: function() {\r\n        this._initItemsFromMarkup();\r\n        this._initDefaultItemTemplate();\r\n        this.callBase()\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _initDefaultItemTemplate: function() {\r\n        var fieldsMap = this._getFieldsMap();\r\n        this._templateManager.addDefaultTemplates({\r\n            item: new BindableTemplate(function($container, data) {\r\n                if (isPlainObject(data)) {\r\n                    this._prepareDefaultItemTemplate(data, $container)\r\n                } else {\r\n                    if (fieldsMap && isFunction(fieldsMap.text)) {\r\n                        data = fieldsMap.text(data)\r\n                    }\r\n                    $container.text(String(ensureDefined(data, \"\")))\r\n                }\r\n            }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\r\n        })\r\n    },\r\n    _getBindableFields: function() {\r\n        return [\"text\", \"html\"]\r\n    },\r\n    _getFieldsMap: function() {\r\n        if (this._displayGetter) {\r\n            return {\r\n                text: this._displayGetter\r\n            }\r\n        }\r\n    },\r\n    _prepareDefaultItemTemplate: function(data, $container) {\r\n        if (isDefined(data.text)) {\r\n            $container.text(data.text)\r\n        }\r\n        if (isDefined(data.html)) {\r\n            $container.html(data.html)\r\n        }\r\n    },\r\n    _initItemsFromMarkup: function() {\r\n        var rawItems = findTemplates(this.$element(), ITEMS_OPTIONS_NAME);\r\n        if (!rawItems.length || this.option(\"items\").length) {\r\n            return\r\n        }\r\n        var items = rawItems.map(_ref => {\r\n            var {\r\n                element: element,\r\n                options: options\r\n            } = _ref;\r\n            var isTemplateRequired = /\\S/.test(element.innerHTML) && !options.template;\r\n            if (isTemplateRequired) {\r\n                options.template = this._prepareItemTemplate(element)\r\n            } else {\r\n                $(element).remove()\r\n            }\r\n            return options\r\n        });\r\n        this.option(\"items\", items)\r\n    },\r\n    _prepareItemTemplate: function(item) {\r\n        var templateId = ITEM_TEMPLATE_ID_PREFIX + new Guid;\r\n        var $template = $(item).detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\r\n        this._saveTemplate(templateId, $template);\r\n        return templateId\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _cleanRenderedItems: function() {\r\n        this._renderedItemsCount = 0\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _focusInHandler: function(e) {\r\n        this.callBase.apply(this, arguments);\r\n        if (!this._isFocusTarget(e.target)) {\r\n            return\r\n        }\r\n        var $focusedElement = $(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            this._setFocusedItem($focusedElement)\r\n        } else {\r\n            var $activeItem = this._getActiveItem();\r\n            if ($activeItem.length) {\r\n                this.option(\"focusedElement\", getPublicElement($activeItem))\r\n            }\r\n        }\r\n    },\r\n    _focusOutHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        var $target = $(this.option(\"focusedElement\"));\r\n        this._updateFocusedItemState($target, false)\r\n    },\r\n    _findActiveTarget($element) {\r\n        return $element.find(this._activeStateUnit)\r\n    },\r\n    _getActiveItem: function(last) {\r\n        var $focusedElement = $(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            return $focusedElement\r\n        }\r\n        var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\r\n        var activeElements = this._getActiveElement();\r\n        var lastIndex = activeElements.length - 1;\r\n        if (index < 0) {\r\n            index = last ? lastIndex : 0\r\n        }\r\n        return activeElements.eq(index)\r\n    },\r\n    _moveFocus: function(location) {\r\n        var $items = this._getAvailableItems();\r\n        var $newTarget;\r\n        switch (location) {\r\n            case FOCUS_PAGE_UP:\r\n            case FOCUS_UP:\r\n                $newTarget = this._prevItem($items);\r\n                break;\r\n            case FOCUS_PAGE_DOWN:\r\n            case FOCUS_DOWN:\r\n                $newTarget = this._nextItem($items);\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\r\n                break;\r\n            case FOCUS_LEFT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\r\n                break;\r\n            case FOCUS_FIRST:\r\n                $newTarget = $items.first();\r\n                break;\r\n            case FOCUS_LAST:\r\n                $newTarget = $items.last();\r\n                break;\r\n            default:\r\n                return false\r\n        }\r\n        if (0 !== $newTarget.length) {\r\n            this.option(\"focusedElement\", getPublicElement($newTarget))\r\n        }\r\n    },\r\n    _getVisibleItems: function($itemElements) {\r\n        $itemElements = $itemElements || this._itemElements();\r\n        return $itemElements.filter(\":visible\")\r\n    },\r\n    _getAvailableItems: function($itemElements) {\r\n        return this._getVisibleItems($itemElements)\r\n    },\r\n    _prevItem: function($items) {\r\n        var $target = this._getActiveItem();\r\n        var targetIndex = $items.index($target);\r\n        var $last = $items.last();\r\n        var $item = $($items[targetIndex - 1]);\r\n        var loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $last\r\n        }\r\n        return $item\r\n    },\r\n    _nextItem: function($items) {\r\n        var $target = this._getActiveItem(true);\r\n        var targetIndex = $items.index($target);\r\n        var $first = $items.first();\r\n        var $item = $($items[targetIndex + 1]);\r\n        var loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $first\r\n        }\r\n        return $item\r\n    },\r\n    _selectFocusedItem: function($target) {\r\n        this.selectItem($target)\r\n    },\r\n    _updateFocusedItemState: function(target, isFocused, needCleanItemId) {\r\n        var $target = $(target);\r\n        if ($target.length) {\r\n            this._refreshActiveDescendant();\r\n            this._refreshItemId($target, needCleanItemId);\r\n            this._toggleFocusClass(isFocused, $target)\r\n        }\r\n        this._updateParentActiveDescendant()\r\n    },\r\n    _refreshActiveDescendant: function($target) {\r\n        this.setAria(\"activedescendant\", isDefined(this.option(\"focusedElement\")) ? this.getFocusedItemId() : null, $target)\r\n    },\r\n    _refreshItemId: function($target, needCleanItemId) {\r\n        if (!needCleanItemId && this.option(\"focusedElement\")) {\r\n            this.setAria(\"id\", this.getFocusedItemId(), $target)\r\n        } else {\r\n            this.setAria(\"id\", null, $target)\r\n        }\r\n    },\r\n    _isDisabled: $element => $element && \"true\" === $($element).attr(\"aria-disabled\"),\r\n    _setFocusedItem: function($target) {\r\n        if (!$target || !$target.length) {\r\n            return\r\n        }\r\n        this._updateFocusedItemState($target, true);\r\n        this.onFocusedItemChanged(this.getFocusedItemId());\r\n        var {\r\n            selectOnFocus: selectOnFocus\r\n        } = this.option();\r\n        var isTargetDisabled = this._isDisabled($target);\r\n        if (selectOnFocus && !isTargetDisabled) {\r\n            this._selectFocusedItem($target)\r\n        }\r\n    },\r\n    _findItemElementByItem: function(item) {\r\n        var result = $();\r\n        var that = this;\r\n        this.itemElements().each((function() {\r\n            var $item = $(this);\r\n            if ($item.data(that._itemDataKey()) === item) {\r\n                result = $item;\r\n                return false\r\n            }\r\n        }));\r\n        return result\r\n    },\r\n    _getIndexByItem: function(item) {\r\n        return this.option(\"items\").indexOf(item)\r\n    },\r\n    _itemOptionChanged: function(item, property, value, oldValue) {\r\n        var $item = this._findItemElementByItem(item);\r\n        if (!$item.length) {\r\n            return\r\n        }\r\n        if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\r\n            this._refreshItem($item, item)\r\n        }\r\n        var isDisabling = \"disabled\" === property && value;\r\n        if (isDisabling) {\r\n            this._resetItemFocus($item)\r\n        }\r\n    },\r\n    _resetItemFocus($item) {\r\n        if ($item.is(this.option(\"focusedElement\"))) {\r\n            this.option(\"focusedElement\", null)\r\n        }\r\n    },\r\n    _refreshItem: function($item) {\r\n        var itemData = this._getItemData($item);\r\n        var index = $item.data(this._itemIndexKey());\r\n        this._renderItem(this._renderedItemsCount + index, itemData, null, $item)\r\n    },\r\n    _updateParentActiveDescendant: noop,\r\n    _optionChanged: function(args) {\r\n        if (\"items\" === args.name) {\r\n            var matches = args.fullName.match(ITEM_PATH_REGEX);\r\n            if (matches && matches.length) {\r\n                var property = matches[matches.length - 1];\r\n                var itemPath = args.fullName.replace(\".\" + property, \"\");\r\n                var item = this.option(itemPath);\r\n                this._itemOptionChanged(item, property, args.value, args.previousValue);\r\n                return\r\n            }\r\n        }\r\n        switch (args.name) {\r\n            case \"items\":\r\n            case \"_itemAttributes\":\r\n            case \"itemTemplateProperty\":\r\n            case \"useItemTextAsTitle\":\r\n                this._cleanRenderedItems();\r\n                this._invalidate();\r\n                break;\r\n            case \"dataSource\":\r\n                this._refreshDataSource();\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"noDataText\":\r\n            case \"encodeNoDataText\":\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"itemTemplate\":\r\n                this._invalidate();\r\n                break;\r\n            case \"onItemRendered\":\r\n                this._createItemRenderAction();\r\n                break;\r\n            case \"onItemClick\":\r\n                break;\r\n            case \"onItemHold\":\r\n            case \"itemHoldTimeout\":\r\n                this._attachHoldEvent();\r\n                break;\r\n            case \"onItemContextMenu\":\r\n                this._attachContextMenuEvent();\r\n                break;\r\n            case \"onFocusedItemChanged\":\r\n                this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n                break;\r\n            case \"selectOnFocus\":\r\n            case \"loopItemFocus\":\r\n            case \"focusOnSelectedItem\":\r\n                break;\r\n            case \"focusedElement\":\r\n                this._updateFocusedItemState(args.previousValue, false, true);\r\n                this._setFocusedItem($(args.value));\r\n                break;\r\n            case \"displayExpr\":\r\n                this._compileDisplayGetter();\r\n                this._initDefaultItemTemplate();\r\n                this._invalidate();\r\n                break;\r\n            case \"visibleExpr\":\r\n            case \"disabledExpr\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _invalidate: function() {\r\n        this.option(\"focusedElement\", null);\r\n        return this.callBase.apply(this, arguments)\r\n    },\r\n    _loadNextPage: function() {\r\n        this._expectNextPageLoading();\r\n        return this._dataController.loadNextPage()\r\n    },\r\n    _expectNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = 0\r\n    },\r\n    _expectLastItemLoading: function() {\r\n        this._startIndexForAppendedItems = -1\r\n    },\r\n    _forgetNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = null\r\n    },\r\n    _dataSourceChangedHandler: function(newItems) {\r\n        var items = this.option(\"items\");\r\n        if (this._initialized && items && this._shouldAppendItems()) {\r\n            this._renderedItemsCount = items.length;\r\n            if (!this._isLastPage() || -1 !== this._startIndexForAppendedItems) {\r\n                this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems))\r\n            }\r\n            this._forgetNextPageLoading();\r\n            this._refreshContent()\r\n        } else {\r\n            this.option(\"items\", newItems.slice())\r\n        }\r\n    },\r\n    _refreshContent: function() {\r\n        this._prepareContent();\r\n        this._renderContent()\r\n    },\r\n    _dataSourceLoadErrorHandler: function() {\r\n        this._forgetNextPageLoading();\r\n        this.option(\"items\", this.option(\"items\"))\r\n    },\r\n    _shouldAppendItems: function() {\r\n        return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend()\r\n    },\r\n    _allowDynamicItemsAppend: function() {\r\n        return false\r\n    },\r\n    _clean: function() {\r\n        this._cleanFocusState();\r\n        this._cleanItemContainer();\r\n        this._inkRipple && delete this._inkRipple;\r\n        this._resetActiveState()\r\n    },\r\n    _cleanItemContainer: function() {\r\n        $(this._itemContainer()).empty()\r\n    },\r\n    _dispose: function() {\r\n        this.callBase();\r\n        clearTimeout(this._itemFocusTimeout)\r\n    },\r\n    _refresh: function() {\r\n        this._cleanRenderedItems();\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _itemContainer: function() {\r\n        return this.$element()\r\n    },\r\n    _itemClass: function() {\r\n        return ITEM_CLASS\r\n    },\r\n    _itemContentClass: function() {\r\n        return this._itemClass() + CONTENT_CLASS_POSTFIX\r\n    },\r\n    _selectedItemClass: function() {\r\n        return SELECTED_ITEM_CLASS\r\n    },\r\n    _itemResponseWaitClass: function() {\r\n        return ITEM_RESPONSE_WAIT_CLASS\r\n    },\r\n    _itemSelector: function() {\r\n        return \".\" + this._itemClass()\r\n    },\r\n    _itemDataKey: function() {\r\n        return ITEM_DATA_KEY\r\n    },\r\n    _itemIndexKey: function() {\r\n        return ITEM_INDEX_KEY\r\n    },\r\n    _itemElements: function() {\r\n        return this._itemContainer().find(this._itemSelector())\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n        this.$element().addClass(COLLECTION_CLASS);\r\n        this._prepareContent()\r\n    },\r\n    _prepareContent: deferRenderer((function() {\r\n        this._renderContentImpl()\r\n    })),\r\n    _renderContent: function() {\r\n        this._fireContentReadyAction()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._attachClickEvent();\r\n        this._attachHoldEvent();\r\n        this._attachContextMenuEvent()\r\n    },\r\n    _getPointerEvent: () => pointerEvents.down,\r\n    _attachClickEvent() {\r\n        var itemSelector = this._itemSelector();\r\n        var pointerEvent = this._getPointerEvent();\r\n        var clickEventNamespace = addNamespace(clickEventName, this.NAME);\r\n        var pointerEventNamespace = addNamespace(pointerEvent, this.NAME);\r\n        var pointerAction = new Action(args => {\r\n            var {\r\n                event: event\r\n            } = args;\r\n            this._itemPointerDownHandler(event)\r\n        });\r\n        eventsEngine.off(this._itemContainer(), clickEventNamespace, itemSelector);\r\n        eventsEngine.off(this._itemContainer(), pointerEventNamespace, itemSelector);\r\n        eventsEngine.on(this._itemContainer(), clickEventNamespace, itemSelector, e => this._itemClickHandler(e));\r\n        eventsEngine.on(this._itemContainer(), pointerEventNamespace, itemSelector, e => {\r\n            pointerAction.execute({\r\n                element: $(e.target),\r\n                event: e\r\n            })\r\n        })\r\n    },\r\n    _itemClickHandler: function(e, args, config) {\r\n        this._itemDXEventHandler(e, \"onItemClick\", args, config)\r\n    },\r\n    _itemPointerDownHandler: function(e) {\r\n        if (!this.option(\"focusStateEnabled\")) {\r\n            return\r\n        }\r\n        this._itemFocusHandler = function() {\r\n            clearTimeout(this._itemFocusTimeout);\r\n            this._itemFocusHandler = null;\r\n            if (e.isDefaultPrevented()) {\r\n                return\r\n            }\r\n            var $target = $(e.target);\r\n            var $closestItem = $target.closest(this._itemElements());\r\n            var $closestFocusable = this._closestFocusable($target);\r\n            if ($closestItem.length && this._isFocusTarget(null === $closestFocusable || void 0 === $closestFocusable ? void 0 : $closestFocusable.get(0))) {\r\n                this.option(\"focusedElement\", getPublicElement($closestItem))\r\n            }\r\n        }.bind(this);\r\n        this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this))\r\n    },\r\n    _closestFocusable: function($target) {\r\n        if ($target.is(focusable)) {\r\n            return $target\r\n        } else {\r\n            $target = $target.parent();\r\n            while ($target.length && !domAdapter.isDocument($target.get(0)) && !domAdapter.isDocumentFragment($target.get(0))) {\r\n                if ($target.is(focusable)) {\r\n                    return $target\r\n                }\r\n                $target = $target.parent()\r\n            }\r\n        }\r\n    },\r\n    _forcePointerDownFocus: function() {\r\n        this._itemFocusHandler && this._itemFocusHandler()\r\n    },\r\n    _updateFocusState: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._forcePointerDownFocus()\r\n    },\r\n    _attachHoldEvent: function() {\r\n        var $itemContainer = this._itemContainer();\r\n        var itemSelector = this._itemSelector();\r\n        var eventName = addNamespace(holdEvent.name, this.NAME);\r\n        eventsEngine.off($itemContainer, eventName, itemSelector);\r\n        eventsEngine.on($itemContainer, eventName, itemSelector, {\r\n            timeout: this._getHoldTimeout()\r\n        }, this._itemHoldHandler.bind(this))\r\n    },\r\n    _getHoldTimeout: function() {\r\n        return this.option(\"itemHoldTimeout\")\r\n    },\r\n    _shouldFireHoldEvent: function() {\r\n        return this.hasActionSubscription(\"onItemHold\")\r\n    },\r\n    _itemHoldHandler: function(e) {\r\n        if (this._shouldFireHoldEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemHold\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _attachContextMenuEvent: function() {\r\n        var $itemContainer = this._itemContainer();\r\n        var itemSelector = this._itemSelector();\r\n        var eventName = addNamespace(contextMenuEventName, this.NAME);\r\n        eventsEngine.off($itemContainer, eventName, itemSelector);\r\n        eventsEngine.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this))\r\n    },\r\n    _shouldFireContextMenuEvent: function() {\r\n        return this.hasActionSubscription(\"onItemContextMenu\")\r\n    },\r\n    _itemContextMenuHandler: function(e) {\r\n        if (this._shouldFireContextMenuEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemContextMenu\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _renderContentImpl: function() {\r\n        var items = this.option(\"items\") || [];\r\n        if (this._renderedItemsCount) {\r\n            this._renderItems(items.slice(this._renderedItemsCount))\r\n        } else {\r\n            this._renderItems(items)\r\n        }\r\n    },\r\n    _renderItems: function(items) {\r\n        if (items.length) {\r\n            each(items, function(index, itemData) {\r\n                this._renderItem(this._renderedItemsCount + index, itemData)\r\n            }.bind(this))\r\n        }\r\n        this._renderEmptyMessage()\r\n    },\r\n    _renderItem: function(index, itemData, $container, $itemToReplace) {\r\n        var _index$item;\r\n        var itemIndex = null !== (_index$item = null === index || void 0 === index ? void 0 : index.item) && void 0 !== _index$item ? _index$item : index;\r\n        $container = $container || this._itemContainer();\r\n        var $itemFrame = this._renderItemFrame(itemIndex, itemData, $container, $itemToReplace);\r\n        this._setElementData($itemFrame, itemData, itemIndex);\r\n        $itemFrame.attr(this.option(\"_itemAttributes\"));\r\n        this._attachItemClickEvent(itemData, $itemFrame);\r\n        var $itemContent = this._getItemContent($itemFrame);\r\n        var renderContentPromise = this._renderItemContent({\r\n            index: itemIndex,\r\n            itemData: itemData,\r\n            container: getPublicElement($itemContent),\r\n            contentClass: this._itemContentClass(),\r\n            defaultTemplateName: this.option(\"itemTemplate\")\r\n        });\r\n        var that = this;\r\n        when(renderContentPromise).done((function($itemContent) {\r\n            that._postprocessRenderItem({\r\n                itemElement: $itemFrame,\r\n                itemContent: $itemContent,\r\n                itemData: itemData,\r\n                itemIndex: itemIndex\r\n            });\r\n            that._executeItemRenderAction(index, itemData, getPublicElement($itemFrame))\r\n        }));\r\n        return $itemFrame\r\n    },\r\n    _getItemContent: function($itemFrame) {\r\n        var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        return $itemContent\r\n    },\r\n    _attachItemClickEvent: function(itemData, $itemElement) {\r\n        if (!itemData || !itemData.onClick) {\r\n            return\r\n        }\r\n        eventsEngine.on($itemElement, clickEventName, function(e) {\r\n            this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\r\n                event: e\r\n            })\r\n        }.bind(this))\r\n    },\r\n    _renderItemContent: function(args) {\r\n        var itemTemplateName = this._getItemTemplateName(args);\r\n        var itemTemplate = this._getTemplate(itemTemplateName);\r\n        this._addItemContentClasses(args);\r\n        var $templateResult = $(this._createItemByTemplate(itemTemplate, args));\r\n        if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\r\n            return args.container\r\n        }\r\n        return this._renderItemContentByNode(args, $templateResult)\r\n    },\r\n    _renderItemContentByNode: function(args, $node) {\r\n        $(args.container).replaceWith($node);\r\n        args.container = getPublicElement($node);\r\n        this._addItemContentClasses(args);\r\n        return $node\r\n    },\r\n    _addItemContentClasses: function(args) {\r\n        var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\r\n        $(args.container).addClass(classes.join(\" \"))\r\n    },\r\n    _appendItemToContainer: function($container, $itemFrame, index) {\r\n        $itemFrame.appendTo($container)\r\n    },\r\n    _renderItemFrame: function(index, itemData, $container, $itemToReplace) {\r\n        var $itemFrame = $(\"<div>\");\r\n        new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\r\n        if ($itemToReplace && $itemToReplace.length) {\r\n            $itemToReplace.replaceWith($itemFrame)\r\n        } else {\r\n            this._appendItemToContainer.call(this, $container, $itemFrame, index)\r\n        }\r\n        if (this.option(\"useItemTextAsTitle\")) {\r\n            var displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\r\n            $itemFrame.attr(\"title\", displayValue)\r\n        }\r\n        return $itemFrame\r\n    },\r\n    _itemOptions: function() {\r\n        var that = this;\r\n        return {\r\n            watchMethod: function() {\r\n                return that.option(\"integrationOptions.watchMethod\")\r\n            },\r\n            owner: that,\r\n            fieldGetter: function(field) {\r\n                var expr = that.option(field + \"Expr\");\r\n                var getter = compileGetter(expr);\r\n                return getter\r\n            }\r\n        }\r\n    },\r\n    _postprocessRenderItem: noop,\r\n    _executeItemRenderAction: function(index, itemData, itemElement) {\r\n        this._getItemRenderAction()({\r\n            itemElement: itemElement,\r\n            itemIndex: index,\r\n            itemData: itemData\r\n        })\r\n    },\r\n    _setElementData: function(element, data, index) {\r\n        element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index)\r\n    },\r\n    _createItemRenderAction: function() {\r\n        return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\r\n            element: this.element(),\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        })\r\n    },\r\n    _getItemRenderAction: function() {\r\n        return this._itemRenderAction || this._createItemRenderAction()\r\n    },\r\n    _getItemTemplateName: function(args) {\r\n        var data = args.itemData;\r\n        var templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\r\n        var template = data && data[templateProperty];\r\n        return template || args.defaultTemplateName\r\n    },\r\n    _createItemByTemplate: function(itemTemplate, renderArgs) {\r\n        return itemTemplate.render({\r\n            model: renderArgs.itemData,\r\n            container: renderArgs.container,\r\n            index: renderArgs.index,\r\n            onRendered: this._onItemTemplateRendered(itemTemplate, renderArgs)\r\n        })\r\n    },\r\n    _onItemTemplateRendered: function() {\r\n        return noop\r\n    },\r\n    _emptyMessageContainer: function() {\r\n        return this._itemContainer()\r\n    },\r\n    _renderEmptyMessage: function(items) {\r\n        items = items || this.option(\"items\");\r\n        var noDataText = this.option(\"noDataText\");\r\n        var hideNoData = !noDataText || items && items.length || this._dataController.isLoading();\r\n        if (hideNoData && this._$noData) {\r\n            this._$noData.remove();\r\n            this._$noData = null;\r\n            this.setAria(\"label\", void 0)\r\n        }\r\n        if (!hideNoData) {\r\n            this._$noData = this._$noData || $(\"<div>\").addClass(\"dx-empty-message\");\r\n            this._$noData.appendTo(this._emptyMessageContainer());\r\n            if (this.option(\"encodeNoDataText\")) {\r\n                this._$noData.text(noDataText)\r\n            } else {\r\n                this._$noData.html(noDataText)\r\n            }\r\n        }\r\n        this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData)\r\n    },\r\n    _itemDXEventHandler: function(dxEvent, handlerOptionName, actionArgs, actionConfig) {\r\n        this._itemEventHandler(dxEvent.target, handlerOptionName, extend(actionArgs, {\r\n            event: dxEvent\r\n        }), actionConfig)\r\n    },\r\n    _itemEventHandler: function(initiator, handlerOptionName, actionArgs, actionConfig) {\r\n        var action = this._createActionByOption(handlerOptionName, extend({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerByHandler: function(initiator, handler, actionArgs, actionConfig) {\r\n        var action = this._createAction(handler, extend({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerImpl: function(initiator, action, actionArgs) {\r\n        var $itemElement = this._closestItemElement($(initiator));\r\n        var args = extend({}, actionArgs);\r\n        return action(extend(actionArgs, this._extendActionArgs($itemElement), args))\r\n    },\r\n    _extendActionArgs: function($itemElement) {\r\n        return {\r\n            itemElement: getPublicElement($itemElement),\r\n            itemIndex: this._itemElements().index($itemElement),\r\n            itemData: this._getItemData($itemElement)\r\n        }\r\n    },\r\n    _closestItemElement: function($element) {\r\n        return $($element).closest(this._itemSelector())\r\n    },\r\n    _getItemData: function(itemElement) {\r\n        return $(itemElement).data(this._itemDataKey())\r\n    },\r\n    _getSummaryItemsWidth: function(items, includeMargin) {\r\n        var result = 0;\r\n        if (items) {\r\n            each(items, (function(_, item) {\r\n                result += getOuterWidth(item, includeMargin || false)\r\n            }))\r\n        }\r\n        return result\r\n    },\r\n    getFocusedItemId: function() {\r\n        if (!this._focusedItemId) {\r\n            this._focusedItemId = \"dx-\" + new Guid\r\n        }\r\n        return this._focusedItemId\r\n    },\r\n    itemElements: function() {\r\n        return this._itemElements()\r\n    },\r\n    itemsContainer: function() {\r\n        return this._itemContainer()\r\n    }\r\n}).include(DataHelperMixin);\r\nCollectionWidget.ItemClass = CollectionWidgetItem;\r\nexport default CollectionWidget;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}