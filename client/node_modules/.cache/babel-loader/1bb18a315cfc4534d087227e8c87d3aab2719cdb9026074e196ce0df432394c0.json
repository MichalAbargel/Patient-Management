{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/overlay/ui.overlay.js)\r\n * Version: 23.1.5\r\n * Build date: Wed Aug 30 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getOuterWidth, getOuterHeight } from \"../../core/utils/size\";\nimport fx from \"../../animation/fx\";\nimport registerComponent from \"../../core/component_registrator\";\nimport devices from \"../../core/devices\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { getPublicElement } from \"../../core/element\";\nimport $ from \"../../core/renderer\";\nimport { EmptyTemplate } from \"../../core/templates/empty_template\";\nimport { noop } from \"../../core/utils/common\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport { contains, resetActiveElement } from \"../../core/utils/dom\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport readyCallbacks from \"../../core/utils/ready_callbacks\";\nimport { isFunction, isObject, isPromise, isWindow } from \"../../core/utils/type\";\nimport { changeCallback } from \"../../core/utils/view_port\";\nimport { getWindow, hasWindow } from \"../../core/utils/window\";\nimport errors from \"../../core/errors\";\nimport uiErrors from \"../widget/ui.errors\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { move as dragEventMove } from \"../../events/drag\";\nimport pointerEvents from \"../../events/pointer\";\nimport { keyboard } from \"../../events/short\";\nimport { addNamespace, isCommandKeyPressed, normalizeKeyName } from \"../../events/utils/index\";\nimport { triggerHidingEvent, triggerResizeEvent, triggerShownEvent } from \"../../events/visibility_change\";\nimport { hideCallback as hideTopOverlayCallback } from \"../../mobile/hide_callback\";\nimport { tabbable } from \"../widget/selectors\";\nimport Widget from \"../widget/ui.widget\";\nimport browser from \"../../core/utils/browser\";\nimport * as zIndexPool from \"./z_index\";\nimport { OverlayPositionController, OVERLAY_POSITION_ALIASES } from \"./overlay_position_controller\";\nvar ready = readyCallbacks.add;\nvar window = getWindow();\nvar viewPortChanged = changeCallback;\nvar OVERLAY_CLASS = \"dx-overlay\";\nvar OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\nvar OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\nvar OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\nvar INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\nvar INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\nvar RTL_DIRECTION_CLASS = \"dx-rtl\";\nvar OVERLAY_STACK = [];\nvar PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\nvar TAB_KEY = \"tab\";\nready(() => {\n  eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, e => {\n    for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\n      if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\n        return;\n      }\n    }\n  });\n});\nvar Overlay = Widget.inherit({\n  _supportedKeys: function () {\n    return extend(this.callBase(), {\n      escape: function () {\n        this.hide();\n      }\n    });\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      activeStateEnabled: false,\n      visible: false,\n      deferRendering: true,\n      shading: true,\n      shadingColor: \"\",\n      wrapperAttr: {},\n      position: extend({}, OVERLAY_POSITION_ALIASES.center),\n      width: \"80vw\",\n      minWidth: null,\n      maxWidth: null,\n      height: \"80vh\",\n      minHeight: null,\n      maxHeight: null,\n      animation: {\n        show: {\n          type: \"pop\",\n          duration: 300,\n          from: {\n            scale: .55\n          }\n        },\n        hide: {\n          type: \"pop\",\n          duration: 300,\n          from: {\n            opacity: 1,\n            scale: 1\n          },\n          to: {\n            opacity: 0,\n            scale: .55\n          }\n        }\n      },\n      closeOnOutsideClick: false,\n      hideOnOutsideClick: false,\n      copyRootClassesToWrapper: false,\n      _ignoreCopyRootClassesToWrapperDeprecation: false,\n      _ignoreElementAttrDeprecation: false,\n      _ignorePreventScrollEventsDeprecation: false,\n      onShowing: null,\n      onShown: null,\n      onHiding: null,\n      onHidden: null,\n      contentTemplate: \"content\",\n      innerOverlay: false,\n      restorePosition: true,\n      container: void 0,\n      visualContainer: void 0,\n      hideTopOverlayHandler: () => {\n        this.hide();\n      },\n      hideOnParentScroll: false,\n      preventScrollEvents: true,\n      onPositioned: null,\n      propagateOutsideClick: false,\n      ignoreChildEvents: true,\n      _checkParentVisibility: true,\n      _fixWrapperPosition: false\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return !hasWindow();\n      },\n      options: {\n        width: null,\n        height: null,\n        animation: null,\n        _checkParentVisibility: false\n      }\n    }]);\n  },\n  _setOptionsByReference: function () {\n    this.callBase();\n    extend(this._optionsByReference, {\n      animation: true\n    });\n  },\n  $wrapper: function () {\n    return this._$wrapper;\n  },\n  _eventBindingTarget: function () {\n    return this._$content;\n  },\n  _setDeprecatedOptions() {\n    this.callBase();\n    extend(this._deprecatedOptions, {\n      closeOnOutsideClick: {\n        since: \"22.1\",\n        alias: \"hideOnOutsideClick\"\n      }\n    });\n  },\n  ctor: function (element, options) {\n    this.callBase(element, options);\n    if (options) {\n      if (options.copyRootClassesToWrapper && !options._ignoreCopyRootClassesToWrapperDeprecation) {\n        this._logDeprecatedOptionWarning(\"copyRootClassesToWrapper\", {\n          since: \"21.2\",\n          message: 'Use the \"wrapperAttr\" option instead'\n        });\n      }\n      if (options.elementAttr && !options._ignoreElementAttrDeprecation) {\n        this._logDeprecatedOptionWarning(\"elementAttr\", {\n          since: \"21.2\",\n          message: 'Use the \"wrapperAttr\" option instead'\n        });\n      }\n      if (\"preventScrollEvents\" in options && !options._ignorePreventScrollEventsDeprecation) {\n        this._logDeprecatedPreventScrollEventsInfo();\n      }\n    }\n  },\n  _logDeprecatedPreventScrollEventsInfo() {\n    this._logDeprecatedOptionWarning(\"preventScrollEvents\", {\n      since: \"23.1\",\n      message: \"If you enable this option, end-users may experience scrolling issues.\"\n    });\n  },\n  _init: function () {\n    this.callBase();\n    this._initActions();\n    this._initHideOnOutsideClickHandler();\n    this._initTabTerminatorHandler();\n    this._customWrapperClass = null;\n    this._$wrapper = $(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\n    this._$content = $(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\n    this._initInnerOverlayClass();\n    var $element = this.$element();\n    if (this.option(\"copyRootClassesToWrapper\")) {\n      this._$wrapper.addClass($element.attr(\"class\"));\n    }\n    $element.addClass(OVERLAY_CLASS);\n    this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\n    this._toggleViewPortSubscription(true);\n    this._initHideTopOverlayHandler(this.option(\"hideTopOverlayHandler\"));\n    this._parentsScrollSubscriptionInfo = {\n      handler: e => {\n        this._hideOnParentsScrollHandler(e);\n      }\n    };\n    this.warnPositionAsFunction();\n  },\n  warnPositionAsFunction() {\n    if (isFunction(this.option(\"position\"))) {\n      errors.log(\"W0018\");\n    }\n  },\n  _initInnerOverlayClass: function () {\n    this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"));\n  },\n  _initHideTopOverlayHandler: function (handler) {\n    this._hideTopOverlayHandler = handler;\n  },\n  _getActionsList: function () {\n    return [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioned\", \"onVisualPositionChanged\"];\n  },\n  _initActions: function () {\n    this._actions = {};\n    var actions = this._getActionsList();\n    each(actions, (_, action) => {\n      this._actions[action] = this._createActionByOption(action, {\n        excludeValidators: [\"disabled\", \"readOnly\"]\n      }) || noop;\n    });\n  },\n  _initHideOnOutsideClickHandler: function () {\n    var _this = this;\n    this._proxiedDocumentDownHandler = function () {\n      return _this._documentDownHandler(...arguments);\n    };\n  },\n  _initMarkup() {\n    this.callBase();\n    this._renderWrapperAttributes();\n    this._initPositionController();\n  },\n  _documentDownHandler: function (e) {\n    if (this._showAnimationProcessing) {\n      this._stopAnimation();\n    }\n    var isAttachedTarget = $(window.document).is(e.target) || contains(window.document, e.target);\n    var isInnerOverlay = $(e.target).closest(\".\".concat(INNER_OVERLAY_CLASS)).length;\n    var outsideClick = isAttachedTarget && !isInnerOverlay && !(this._$content.is(e.target) || contains(this._$content.get(0), e.target));\n    if (outsideClick && this._shouldHideOnOutsideClick(e)) {\n      this._outsideClickHandler(e);\n    }\n    return this.option(\"propagateOutsideClick\");\n  },\n  _shouldHideOnOutsideClick: function (e) {\n    var {\n      hideOnOutsideClick: hideOnOutsideClick\n    } = this.option();\n    if (isFunction(hideOnOutsideClick)) {\n      return hideOnOutsideClick(e);\n    }\n    return hideOnOutsideClick;\n  },\n  _outsideClickHandler(e) {\n    if (this.option(\"shading\")) {\n      e.preventDefault();\n    }\n    this.hide();\n  },\n  _getAnonymousTemplateName: function () {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _initTemplates: function () {\n    this._templateManager.addDefaultTemplates({\n      content: new EmptyTemplate()\n    });\n    this.callBase();\n  },\n  _isTopOverlay: function () {\n    var overlayStack = this._overlayStack();\n    for (var i = overlayStack.length - 1; i >= 0; i--) {\n      var tabbableElements = overlayStack[i]._findTabbableBounds();\n      if (tabbableElements.first || tabbableElements.last) {\n        return overlayStack[i] === this;\n      }\n    }\n    return false;\n  },\n  _overlayStack: function () {\n    return OVERLAY_STACK;\n  },\n  _zIndexInitValue: function () {\n    return Overlay.baseZIndex();\n  },\n  _toggleViewPortSubscription: function (toggle) {\n    var _this2 = this;\n    viewPortChanged.remove(this._viewPortChangeHandle);\n    if (toggle) {\n      this._viewPortChangeHandle = function () {\n        _this2._viewPortChangeHandler(...arguments);\n      };\n      viewPortChanged.add(this._viewPortChangeHandle);\n    }\n  },\n  _viewPortChangeHandler: function () {\n    this._positionController.updateContainer(this.option(\"container\"));\n    this._refresh();\n  },\n  _renderWrapperAttributes() {\n    var {\n      wrapperAttr: wrapperAttr\n    } = this.option();\n    var attributes = extend({}, wrapperAttr);\n    var classNames = attributes.class;\n    delete attributes.class;\n    this.$wrapper().attr(attributes).removeClass(this._customWrapperClass).addClass(classNames);\n    this._customWrapperClass = classNames;\n  },\n  _renderVisibilityAnimate: function (visible) {\n    this._stopAnimation();\n    return visible ? this._show() : this._hide();\n  },\n  _getAnimationConfig: function () {\n    return this._getOptionValue(\"animation\", this);\n  },\n  _toggleBodyScroll: noop,\n  _animateShowing: function () {\n    var _this$_getAnimationCo,\n      _showAnimation$start,\n      _showAnimation$comple,\n      _this3 = this;\n    var animation = null !== (_this$_getAnimationCo = this._getAnimationConfig()) && void 0 !== _this$_getAnimationCo ? _this$_getAnimationCo : {};\n    var showAnimation = this._normalizeAnimation(animation.show, \"to\");\n    var startShowAnimation = null !== (_showAnimation$start = null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.start) && void 0 !== _showAnimation$start ? _showAnimation$start : noop;\n    var completeShowAnimation = null !== (_showAnimation$comple = null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.complete) && void 0 !== _showAnimation$comple ? _showAnimation$comple : noop;\n    this._animate(showAnimation, function () {\n      if (_this3._isAnimationPaused) {\n        return;\n      }\n      if (_this3.option(\"focusStateEnabled\")) {\n        eventsEngine.trigger(_this3._focusTarget(), \"focus\");\n      }\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      completeShowAnimation.call(_this3, ...args);\n      _this3._showAnimationProcessing = false;\n      _this3._isHidden = false;\n      _this3._actions.onShown();\n      _this3._toggleSafariScrolling();\n      _this3._showingDeferred.resolve();\n    }, function () {\n      if (_this3._isAnimationPaused) {\n        return;\n      }\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      startShowAnimation.call(_this3, ...args);\n      _this3._showAnimationProcessing = true;\n    });\n  },\n  _processShowingHidingCancel: function (cancelArg, applyFunction, cancelFunction) {\n    if (isPromise(cancelArg)) {\n      cancelArg.then(shouldCancel => {\n        if (shouldCancel) {\n          cancelFunction();\n        } else {\n          applyFunction();\n        }\n      }).catch(() => applyFunction());\n    } else {\n      cancelArg ? cancelFunction() : applyFunction();\n    }\n  },\n  _show: function () {\n    this._showingDeferred = new Deferred();\n    this._parentHidden = this._isParentHidden();\n    this._showingDeferred.done(() => {\n      delete this._parentHidden;\n    });\n    if (this._parentHidden) {\n      this._isHidden = true;\n      return this._showingDeferred.resolve();\n    }\n    if (this._currentVisible) {\n      return new Deferred().resolve().promise();\n    }\n    this._currentVisible = true;\n    if (this._isHidingActionCanceled) {\n      delete this._isHidingActionCanceled;\n      this._showingDeferred.reject();\n    } else {\n      var show = () => {\n        this._toggleBodyScroll(this.option(\"enableBodyScroll\"));\n        this._stopAnimation();\n        this._toggleVisibility(true);\n        this._$content.css(\"visibility\", \"hidden\");\n        this._$content.toggleClass(INVISIBLE_STATE_CLASS, false);\n        this._updateZIndexStackPosition(true);\n        this._positionController.openingHandled();\n        this._renderContent();\n        var showingArgs = {\n          cancel: false\n        };\n        this._actions.onShowing(showingArgs);\n        this._processShowingHidingCancel(showingArgs.cancel, () => {\n          this._$content.css(\"visibility\", \"\");\n          this._renderVisibility(true);\n          this._animateShowing();\n        }, () => {\n          this._toggleVisibility(false);\n          this._$content.css(\"visibility\", \"\");\n          this._$content.toggleClass(INVISIBLE_STATE_CLASS, true);\n          this._isShowingActionCanceled = true;\n          this._moveFromContainer();\n          this.option(\"visible\", false);\n          this._showingDeferred.resolve();\n        });\n      };\n      if (this.option(\"templatesRenderAsynchronously\")) {\n        this._stopShowTimer();\n        this._asyncShowTimeout = setTimeout(show);\n      } else {\n        show();\n      }\n    }\n    return this._showingDeferred.promise();\n  },\n  _normalizeAnimation: function (showHideConfig, direction) {\n    if (showHideConfig) {\n      showHideConfig = extend({\n        type: \"slide\",\n        skipElementInitialStyles: true\n      }, showHideConfig);\n      if (isObject(showHideConfig[direction])) {\n        extend(showHideConfig[direction], {\n          position: this._positionController.position\n        });\n      }\n    }\n    return showHideConfig;\n  },\n  _animateHiding: function () {\n    var _this$_getAnimationCo2,\n      _hideAnimation$start,\n      _hideAnimation$comple,\n      _this4 = this;\n    var animation = null !== (_this$_getAnimationCo2 = this._getAnimationConfig()) && void 0 !== _this$_getAnimationCo2 ? _this$_getAnimationCo2 : {};\n    var hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\n    var startHideAnimation = null !== (_hideAnimation$start = null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.start) && void 0 !== _hideAnimation$start ? _hideAnimation$start : noop;\n    var completeHideAnimation = null !== (_hideAnimation$comple = null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.complete) && void 0 !== _hideAnimation$comple ? _hideAnimation$comple : noop;\n    this._animate(hideAnimation, function () {\n      var _this4$_actions;\n      _this4._$content.css(\"pointerEvents\", \"\");\n      _this4._renderVisibility(false);\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      completeHideAnimation.call(_this4, ...args);\n      _this4._hideAnimationProcessing = false;\n      null === (_this4$_actions = _this4._actions) || void 0 === _this4$_actions ? void 0 : _this4$_actions.onHidden();\n      _this4._hidingDeferred.resolve();\n    }, function () {\n      _this4._$content.css(\"pointerEvents\", \"none\");\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      startHideAnimation.call(_this4, ...args);\n      _this4._hideAnimationProcessing = true;\n    });\n  },\n  _hide: function () {\n    if (!this._currentVisible) {\n      return new Deferred().resolve().promise();\n    }\n    this._currentVisible = false;\n    this._hidingDeferred = new Deferred();\n    var hidingArgs = {\n      cancel: false\n    };\n    if (this._isShowingActionCanceled) {\n      delete this._isShowingActionCanceled;\n      this._hidingDeferred.reject();\n    } else {\n      this._actions.onHiding(hidingArgs);\n      this._toggleSafariScrolling();\n      this._toggleBodyScroll(true);\n      this._processShowingHidingCancel(hidingArgs.cancel, () => {\n        this._forceFocusLost();\n        this._toggleShading(false);\n        this._toggleSubscriptions(false);\n        this._stopShowTimer();\n        this._animateHiding();\n      }, () => {\n        this._isHidingActionCanceled = true;\n        this.option(\"visible\", true);\n        this._hidingDeferred.resolve();\n      });\n    }\n    return this._hidingDeferred.promise();\n  },\n  _forceFocusLost: function () {\n    var activeElement = domAdapter.getActiveElement();\n    var shouldResetActiveElement = !!this._$content.find(activeElement).length;\n    if (shouldResetActiveElement) {\n      resetActiveElement();\n    }\n  },\n  _animate: function (animation, completeCallback, startCallback) {\n    if (animation) {\n      startCallback = startCallback || animation.start || noop;\n      fx.animate(this._$content, extend({}, animation, {\n        start: startCallback,\n        complete: completeCallback\n      }));\n    } else {\n      completeCallback();\n    }\n  },\n  _stopAnimation: function () {\n    fx.stop(this._$content, true);\n  },\n  _renderVisibility: function (visible) {\n    if (visible && this._isParentHidden()) {\n      return;\n    }\n    this._currentVisible = visible;\n    this._stopAnimation();\n    if (!visible) {\n      triggerHidingEvent(this._$content);\n    }\n    if (visible) {\n      this._checkContainerExists();\n      this._moveToContainer();\n      this._renderGeometry();\n      triggerShownEvent(this._$content);\n      triggerResizeEvent(this._$content);\n    } else {\n      this._toggleVisibility(visible);\n      this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\n      this._updateZIndexStackPosition(visible);\n      this._moveFromContainer();\n    }\n    this._toggleShading(visible);\n    this._toggleSubscriptions(visible);\n  },\n  _updateZIndexStackPosition: function (pushToStack) {\n    var overlayStack = this._overlayStack();\n    var index = overlayStack.indexOf(this);\n    if (pushToStack) {\n      if (-1 === index) {\n        this._zIndex = zIndexPool.create(this._zIndexInitValue());\n        overlayStack.push(this);\n      }\n      this._$wrapper.css(\"zIndex\", this._zIndex);\n      this._$content.css(\"zIndex\", this._zIndex);\n    } else if (-1 !== index) {\n      overlayStack.splice(index, 1);\n      zIndexPool.remove(this._zIndex);\n    }\n  },\n  _toggleShading: function (visible) {\n    this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\n    this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\n    this._toggleTabTerminator(visible && this.option(\"shading\"));\n  },\n  _initTabTerminatorHandler: function () {\n    var _this5 = this;\n    this._proxiedTabTerminatorHandler = function () {\n      _this5._tabKeyHandler(...arguments);\n    };\n  },\n  _toggleTabTerminator: function (enabled) {\n    var eventName = addNamespace(\"keydown\", this.NAME);\n    if (enabled) {\n      eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    } else {\n      eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    }\n  },\n  _findTabbableBounds: function () {\n    var $elements = this._$wrapper.find(\"*\");\n    var elementsCount = $elements.length - 1;\n    var result = {\n      first: null,\n      last: null\n    };\n    for (var i = 0; i <= elementsCount; i++) {\n      if (!result.first && $elements.eq(i).is(tabbable)) {\n        result.first = $elements.eq(i);\n      }\n      if (!result.last && $elements.eq(elementsCount - i).is(tabbable)) {\n        result.last = $elements.eq(elementsCount - i);\n      }\n      if (result.first && result.last) {\n        break;\n      }\n    }\n    return result;\n  },\n  _tabKeyHandler: function (e) {\n    if (normalizeKeyName(e) !== TAB_KEY || !this._isTopOverlay()) {\n      return;\n    }\n    var tabbableElements = this._findTabbableBounds();\n    var $firstTabbable = tabbableElements.first;\n    var $lastTabbable = tabbableElements.last;\n    var isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0);\n    var isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0);\n    var isEmptyTabList = 0 === tabbableElements.length;\n    var isOutsideTarget = !contains(this._$wrapper.get(0), e.target);\n    if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\n      e.preventDefault();\n      var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\n      eventsEngine.trigger($focusElement, \"focusin\");\n      eventsEngine.trigger($focusElement, \"focus\");\n    }\n  },\n  _toggleSubscriptions: function (enabled) {\n    if (hasWindow()) {\n      this._toggleHideTopOverlayCallback(enabled);\n      this._toggleHideOnParentsScrollSubscription(enabled);\n    }\n  },\n  _toggleHideTopOverlayCallback: function (subscribe) {\n    if (!this._hideTopOverlayHandler) {\n      return;\n    }\n    if (subscribe) {\n      hideTopOverlayCallback.add(this._hideTopOverlayHandler);\n    } else {\n      hideTopOverlayCallback.remove(this._hideTopOverlayHandler);\n    }\n  },\n  _toggleHideOnParentsScrollSubscription: function (needSubscribe) {\n    var _this$_parentsScrollS;\n    var scrollEvent = addNamespace(\"scroll\", this.NAME);\n    var {\n      prevTargets: prevTargets,\n      handler: handler\n    } = null !== (_this$_parentsScrollS = this._parentsScrollSubscriptionInfo) && void 0 !== _this$_parentsScrollS ? _this$_parentsScrollS : {};\n    eventsEngine.off(prevTargets, scrollEvent, handler);\n    var closeOnScroll = this.option(\"hideOnParentScroll\");\n    if (needSubscribe && closeOnScroll) {\n      var $parents = this._hideOnParentScrollTarget().parents();\n      if (\"desktop\" === devices.real().deviceType) {\n        $parents = $parents.add(window);\n      }\n      eventsEngine.on($parents, scrollEvent, handler);\n      this._parentsScrollSubscriptionInfo.prevTargets = $parents;\n    }\n  },\n  _hideOnParentsScrollHandler: function (e) {\n    var closeHandled = false;\n    var closeOnScroll = this.option(\"hideOnParentScroll\");\n    if (isFunction(closeOnScroll)) {\n      closeHandled = closeOnScroll(e);\n    }\n    if (!closeHandled && !this._showAnimationProcessing) {\n      this.hide();\n    }\n  },\n  _hideOnParentScrollTarget: function () {\n    return this._$wrapper;\n  },\n  _render: function () {\n    this.callBase();\n    this._appendContentToElement();\n    this._renderVisibilityAnimate(this.option(\"visible\"));\n  },\n  _appendContentToElement: function () {\n    if (!this._$content.parent().is(this.$element())) {\n      this._$content.appendTo(this.$element());\n    }\n  },\n  _renderContent: function () {\n    var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\n    var isParentHidden = this.option(\"visible\") && this._isParentHidden();\n    if (isParentHidden) {\n      this._isHidden = true;\n      return;\n    }\n    if (this._contentAlreadyRendered || shouldDeferRendering) {\n      return;\n    }\n    this._contentAlreadyRendered = true;\n    this._appendContentToElement();\n    this.callBase();\n  },\n  _isParentHidden: function () {\n    if (!this.option(\"_checkParentVisibility\")) {\n      return false;\n    }\n    if (void 0 !== this._parentHidden) {\n      return this._parentHidden;\n    }\n    var $parent = this.$element().parent();\n    if ($parent.is(\":visible\")) {\n      return false;\n    }\n    var isHidden = false;\n    $parent.add($parent.parents()).each(function () {\n      var $element = $(this);\n      if (\"none\" === $element.css(\"display\")) {\n        isHidden = true;\n        return false;\n      }\n    });\n    return isHidden || !domAdapter.getBody().contains($parent.get(0));\n  },\n  _renderContentImpl: function () {\n    var whenContentRendered = new Deferred();\n    var contentTemplateOption = this.option(\"contentTemplate\");\n    var contentTemplate = this._getTemplate(contentTemplateOption);\n    var transclude = this._templateManager.anonymousTemplateName === contentTemplateOption;\n    contentTemplate && contentTemplate.render({\n      container: getPublicElement(this.$content()),\n      noModel: true,\n      transclude: transclude,\n      onRendered: () => {\n        whenContentRendered.resolve();\n        if (this.option(\"templatesRenderAsynchronously\")) {\n          this._dimensionChanged();\n        }\n      }\n    });\n    this._toggleWrapperScrollEventsSubscription(this.option(\"preventScrollEvents\"));\n    whenContentRendered.done(() => {\n      if (this.option(\"visible\")) {\n        this._moveToContainer();\n      }\n    });\n    return whenContentRendered.promise();\n  },\n  _getPositionControllerConfig() {\n    var {\n      container: container,\n      visualContainer: visualContainer,\n      _fixWrapperPosition: _fixWrapperPosition,\n      restorePosition: restorePosition\n    } = this.option();\n    return {\n      container: container,\n      visualContainer: visualContainer,\n      $root: this.$element(),\n      $content: this._$content,\n      $wrapper: this._$wrapper,\n      onPositioned: this._actions.onPositioned,\n      onVisualPositionChanged: this._actions.onVisualPositionChanged,\n      restorePosition: restorePosition,\n      _fixWrapperPosition: _fixWrapperPosition\n    };\n  },\n  _initPositionController() {\n    this._positionController = new OverlayPositionController(this._getPositionControllerConfig());\n  },\n  _toggleWrapperScrollEventsSubscription: function (enabled) {\n    var eventName = addNamespace(dragEventMove, this.NAME);\n    eventsEngine.off(this._$wrapper, eventName);\n    if (enabled) {\n      eventsEngine.on(this._$wrapper, eventName, {\n        validate: function () {\n          return true;\n        },\n        getDirection: function () {\n          return \"both\";\n        },\n        _toggleGestureCover: function (toggle) {\n          if (!toggle) {\n            this._toggleGestureCoverImpl(toggle);\n          }\n        },\n        _clearSelection: noop,\n        isNative: true\n      }, e => {\n        var originalEvent = e.originalEvent.originalEvent;\n        var {\n          type: type\n        } = originalEvent || {};\n        var isWheel = \"wheel\" === type;\n        var isMouseMove = \"mousemove\" === type;\n        var isScrollByWheel = isWheel && !isCommandKeyPressed(e);\n        e._cancelPreventDefault = true;\n        if (originalEvent && false !== e.cancelable && (!isMouseMove && !isWheel || isScrollByWheel)) {\n          e.preventDefault();\n        }\n      });\n    }\n  },\n  _moveFromContainer: function () {\n    this._$content.appendTo(this.$element());\n    this._$wrapper.detach();\n  },\n  _checkContainerExists() {\n    var $wrapperContainer = this._positionController.$container;\n    if (void 0 === $wrapperContainer) {\n      return;\n    }\n    var containerExists = $wrapperContainer.length > 0;\n    if (!containerExists) {\n      uiErrors.log(\"W1021\", this.NAME);\n    }\n  },\n  _moveToContainer: function () {\n    var $wrapperContainer = this._positionController.$container;\n    this._$wrapper.appendTo($wrapperContainer);\n    this._$content.appendTo(this._$wrapper);\n  },\n  _renderGeometry: function (options) {\n    var {\n      visible: visible\n    } = this.option();\n    if (visible && hasWindow()) {\n      this._stopAnimation();\n      this._renderGeometryImpl();\n    }\n  },\n  _renderGeometryImpl: function () {\n    this._positionController.updatePosition(this._getOptionValue(\"position\"));\n    this._renderWrapper();\n    this._renderDimensions();\n    this._renderPosition();\n  },\n  _renderPosition() {\n    this._positionController.positionContent();\n  },\n  _isAllWindowCovered: function () {\n    return isWindow(this._positionController.$visualContainer.get(0)) && this.option(\"shading\");\n  },\n  _toggleSafariScrolling: function () {\n    var visible = this.option(\"visible\");\n    var $body = $(domAdapter.getBody());\n    var isIosSafari = \"ios\" === devices.real().platform && browser.safari;\n    var isAllWindowCovered = this._isAllWindowCovered();\n    var isScrollingPrevented = $body.hasClass(PREVENT_SAFARI_SCROLLING_CLASS);\n    var shouldPreventScrolling = !isScrollingPrevented && visible && isAllWindowCovered;\n    var shouldEnableScrolling = isScrollingPrevented && (!visible || !isAllWindowCovered || this._disposed);\n    if (isIosSafari) {\n      if (shouldEnableScrolling) {\n        $body.removeClass(PREVENT_SAFARI_SCROLLING_CLASS);\n        window.scrollTo(0, this._cachedBodyScrollTop);\n        this._cachedBodyScrollTop = void 0;\n      } else if (shouldPreventScrolling) {\n        this._cachedBodyScrollTop = window.pageYOffset;\n        $body.addClass(PREVENT_SAFARI_SCROLLING_CLASS);\n      }\n    }\n  },\n  _renderWrapper: function () {\n    this._positionController.styleWrapperPosition();\n    this._renderWrapperDimensions();\n    this._positionController.positionWrapper();\n  },\n  _renderWrapperDimensions: function () {\n    var $visualContainer = this._positionController.$visualContainer;\n    var documentElement = domAdapter.getDocumentElement();\n    var isVisualContainerWindow = isWindow($visualContainer.get(0));\n    var wrapperWidth = isVisualContainerWindow ? documentElement.clientWidth : getOuterWidth($visualContainer);\n    var wrapperHeight = isVisualContainerWindow ? window.innerHeight : getOuterHeight($visualContainer);\n    this._$wrapper.css({\n      width: wrapperWidth,\n      height: wrapperHeight\n    });\n  },\n  _renderDimensions: function () {\n    var content = this._$content.get(0);\n    this._$content.css({\n      minWidth: this._getOptionValue(\"minWidth\", content),\n      maxWidth: this._getOptionValue(\"maxWidth\", content),\n      minHeight: this._getOptionValue(\"minHeight\", content),\n      maxHeight: this._getOptionValue(\"maxHeight\", content),\n      width: this._getOptionValue(\"width\", content),\n      height: this._getOptionValue(\"height\", content)\n    });\n  },\n  _focusTarget: function () {\n    return this._$content;\n  },\n  _attachKeyboardEvents: function () {\n    this._keyboardListenerId = keyboard.on(this._$content, null, opts => this._keyboardHandler(opts));\n  },\n  _keyboardHandler: function (options) {\n    var e = options.originalEvent;\n    var $target = $(e.target);\n    if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\n      this.callBase(...arguments);\n    }\n  },\n  _isVisible: function () {\n    return this.option(\"visible\");\n  },\n  _visibilityChanged: function (visible) {\n    if (visible) {\n      if (this.option(\"visible\")) {\n        this._renderVisibilityAnimate(visible);\n      }\n    } else {\n      this._renderVisibilityAnimate(visible);\n    }\n  },\n  _dimensionChanged: function () {\n    this._renderGeometry();\n  },\n  _clean: function () {\n    var options = this.option();\n    if (!this._contentAlreadyRendered && !options.isRenovated) {\n      this.$content().empty();\n    }\n    this._renderVisibility(false);\n    this._stopShowTimer();\n    this._cleanFocusState();\n  },\n  _stopShowTimer() {\n    if (this._asyncShowTimeout) {\n      clearTimeout(this._asyncShowTimeout);\n    }\n    this._asyncShowTimeout = null;\n  },\n  _dispose: function () {\n    fx.stop(this._$content, false);\n    clearTimeout(this._deferShowTimer);\n    this._toggleViewPortSubscription(false);\n    this._toggleSubscriptions(false);\n    this._updateZIndexStackPosition(false);\n    this._toggleTabTerminator(false);\n    this._actions = null;\n    this._parentsScrollSubscriptionInfo = null;\n    this.callBase();\n    this._toggleSafariScrolling();\n    this.option(\"visible\") && zIndexPool.remove(this._zIndex);\n    this._$wrapper.remove();\n    this._$content.remove();\n  },\n  _toggleRTLDirection: function (rtl) {\n    this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl);\n  },\n  _optionChanged: function (args) {\n    var {\n      value: value,\n      name: name\n    } = args;\n    if (this._getActionsList().includes(name)) {\n      this._initActions();\n      return;\n    }\n    switch (name) {\n      case \"animation\":\n        break;\n      case \"shading\":\n        this._toggleShading(this.option(\"visible\"));\n        this._toggleSafariScrolling();\n        break;\n      case \"shadingColor\":\n        this._toggleShading(this.option(\"visible\"));\n        break;\n      case \"width\":\n      case \"height\":\n        this._renderGeometry();\n        break;\n      case \"minWidth\":\n      case \"maxWidth\":\n      case \"minHeight\":\n      case \"maxHeight\":\n        this._renderGeometry();\n        break;\n      case \"position\":\n        this._positionController.updatePosition(this.option(\"position\"));\n        this._positionController.restorePositionOnNextRender(true);\n        this._renderGeometry();\n        this._toggleSafariScrolling();\n        break;\n      case \"visible\":\n        this._renderVisibilityAnimate(value).done(() => {\n          var _this$_animateDeferre;\n          return null === (_this$_animateDeferre = this._animateDeferred) || void 0 === _this$_animateDeferre ? void 0 : _this$_animateDeferre.resolveWith(this);\n        }).fail(() => {\n          var _this$_animateDeferre2;\n          return null === (_this$_animateDeferre2 = this._animateDeferred) || void 0 === _this$_animateDeferre2 ? void 0 : _this$_animateDeferre2.reject();\n        });\n        break;\n      case \"container\":\n        this._positionController.updateContainer(value);\n        this._invalidate();\n        this._toggleSafariScrolling();\n        break;\n      case \"visualContainer\":\n        this._positionController.updateVisualContainer(value);\n        this._renderWrapper();\n        this._toggleSafariScrolling();\n        break;\n      case \"innerOverlay\":\n        this._initInnerOverlayClass();\n        break;\n      case \"deferRendering\":\n      case \"contentTemplate\":\n        this._contentAlreadyRendered = false;\n        this._clean();\n        this._invalidate();\n        break;\n      case \"hideTopOverlayHandler\":\n        this._toggleHideTopOverlayCallback(false);\n        this._initHideTopOverlayHandler(value);\n        this._toggleHideTopOverlayCallback(this.option(\"visible\"));\n        break;\n      case \"hideOnParentScroll\":\n        this._toggleHideOnParentsScrollSubscription(this.option(\"visible\"));\n        break;\n      case \"closeOnOutsideClick\":\n      case \"hideOnOutsideClick\":\n      case \"propagateOutsideClick\":\n        break;\n      case \"rtlEnabled\":\n        this._contentAlreadyRendered = false;\n        this.callBase(args);\n        break;\n      case \"_fixWrapperPosition\":\n        this._positionController.fixWrapperPosition = value;\n        break;\n      case \"wrapperAttr\":\n        this._renderWrapperAttributes();\n        break;\n      case \"restorePosition\":\n        this._positionController.restorePosition = value;\n        break;\n      case \"preventScrollEvents\":\n        this._logDeprecatedPreventScrollEventsInfo();\n        this._toggleWrapperScrollEventsSubscription(value);\n        break;\n      default:\n        this.callBase(args);\n    }\n  },\n  toggle: function (showing) {\n    showing = void 0 === showing ? !this.option(\"visible\") : showing;\n    var result = new Deferred();\n    if (showing === this.option(\"visible\")) {\n      return result.resolveWith(this, [showing]).promise();\n    }\n    var animateDeferred = new Deferred();\n    this._animateDeferred = animateDeferred;\n    this.option(\"visible\", showing);\n    animateDeferred.promise().done(() => {\n      delete this._animateDeferred;\n      result.resolveWith(this, [this.option(\"visible\")]);\n    }).fail(() => {\n      delete this._animateDeferred;\n      result.reject();\n    });\n    return result.promise();\n  },\n  $content: function () {\n    return this._$content;\n  },\n  show: function () {\n    return this.toggle(true);\n  },\n  hide: function () {\n    return this.toggle(false);\n  },\n  content: function () {\n    return getPublicElement(this._$content);\n  },\n  repaint: function () {\n    if (this._contentAlreadyRendered) {\n      this._positionController.restorePositionOnNextRender(true);\n      this._renderGeometry({\n        forceStopAnimation: true\n      });\n      triggerResizeEvent(this._$content);\n    } else {\n      this.callBase();\n    }\n  }\n});\nOverlay.baseZIndex = zIndex => zIndexPool.base(zIndex);\nregisterComponent(\"dxOverlay\", Overlay);\nexport default Overlay;","map":{"version":3,"names":["getOuterWidth","getOuterHeight","fx","registerComponent","devices","domAdapter","getPublicElement","$","EmptyTemplate","noop","Deferred","contains","resetActiveElement","extend","each","readyCallbacks","isFunction","isObject","isPromise","isWindow","changeCallback","getWindow","hasWindow","errors","uiErrors","eventsEngine","move","dragEventMove","pointerEvents","keyboard","addNamespace","isCommandKeyPressed","normalizeKeyName","triggerHidingEvent","triggerResizeEvent","triggerShownEvent","hideCallback","hideTopOverlayCallback","tabbable","Widget","browser","zIndexPool","OverlayPositionController","OVERLAY_POSITION_ALIASES","ready","add","window","viewPortChanged","OVERLAY_CLASS","OVERLAY_WRAPPER_CLASS","OVERLAY_CONTENT_CLASS","OVERLAY_SHADER_CLASS","INNER_OVERLAY_CLASS","INVISIBLE_STATE_CLASS","ANONYMOUS_TEMPLATE_NAME","RTL_DIRECTION_CLASS","OVERLAY_STACK","PREVENT_SAFARI_SCROLLING_CLASS","TAB_KEY","subscribeGlobal","getDocument","down","e","i","length","_proxiedDocumentDownHandler","Overlay","inherit","_supportedKeys","callBase","escape","hide","_getDefaultOptions","activeStateEnabled","visible","deferRendering","shading","shadingColor","wrapperAttr","position","center","width","minWidth","maxWidth","height","minHeight","maxHeight","animation","show","type","duration","from","scale","opacity","to","closeOnOutsideClick","hideOnOutsideClick","copyRootClassesToWrapper","_ignoreCopyRootClassesToWrapperDeprecation","_ignoreElementAttrDeprecation","_ignorePreventScrollEventsDeprecation","onShowing","onShown","onHiding","onHidden","contentTemplate","innerOverlay","restorePosition","container","visualContainer","hideTopOverlayHandler","hideOnParentScroll","preventScrollEvents","onPositioned","propagateOutsideClick","ignoreChildEvents","_checkParentVisibility","_fixWrapperPosition","_defaultOptionsRules","concat","device","options","_setOptionsByReference","_optionsByReference","$wrapper","_$wrapper","_eventBindingTarget","_$content","_setDeprecatedOptions","_deprecatedOptions","since","alias","ctor","element","_logDeprecatedOptionWarning","message","elementAttr","_logDeprecatedPreventScrollEventsInfo","_init","_initActions","_initHideOnOutsideClickHandler","_initTabTerminatorHandler","_customWrapperClass","addClass","_initInnerOverlayClass","$element","option","attr","_toggleViewPortSubscription","_initHideTopOverlayHandler","_parentsScrollSubscriptionInfo","handler","_hideOnParentsScrollHandler","warnPositionAsFunction","log","toggleClass","_hideTopOverlayHandler","_getActionsList","_actions","actions","_","action","_createActionByOption","excludeValidators","_this","_documentDownHandler","arguments","_initMarkup","_renderWrapperAttributes","_initPositionController","_showAnimationProcessing","_stopAnimation","isAttachedTarget","document","is","target","isInnerOverlay","closest","outsideClick","get","_shouldHideOnOutsideClick","_outsideClickHandler","preventDefault","_getAnonymousTemplateName","_initTemplates","_templateManager","addDefaultTemplates","content","_isTopOverlay","overlayStack","_overlayStack","tabbableElements","_findTabbableBounds","first","last","_zIndexInitValue","baseZIndex","toggle","_this2","remove","_viewPortChangeHandle","_viewPortChangeHandler","_positionController","updateContainer","_refresh","attributes","classNames","class","removeClass","_renderVisibilityAnimate","_show","_hide","_getAnimationConfig","_getOptionValue","_toggleBodyScroll","_animateShowing","_this$_getAnimationCo","_showAnimation$start","_showAnimation$comple","_this3","showAnimation","_normalizeAnimation","startShowAnimation","start","completeShowAnimation","complete","_animate","_isAnimationPaused","trigger","_focusTarget","_len","args","Array","_key","call","_isHidden","_toggleSafariScrolling","_showingDeferred","resolve","_len2","_key2","_processShowingHidingCancel","cancelArg","applyFunction","cancelFunction","then","shouldCancel","catch","_parentHidden","_isParentHidden","done","_currentVisible","promise","_isHidingActionCanceled","reject","_toggleVisibility","css","_updateZIndexStackPosition","openingHandled","_renderContent","showingArgs","cancel","_renderVisibility","_isShowingActionCanceled","_moveFromContainer","_stopShowTimer","_asyncShowTimeout","setTimeout","showHideConfig","direction","skipElementInitialStyles","_animateHiding","_this$_getAnimationCo2","_hideAnimation$start","_hideAnimation$comple","_this4","hideAnimation","startHideAnimation","completeHideAnimation","_this4$_actions","_len3","_key3","_hideAnimationProcessing","_hidingDeferred","_len4","_key4","hidingArgs","_forceFocusLost","_toggleShading","_toggleSubscriptions","activeElement","getActiveElement","shouldResetActiveElement","find","completeCallback","startCallback","animate","stop","_checkContainerExists","_moveToContainer","_renderGeometry","pushToStack","index","indexOf","_zIndex","create","push","splice","_toggleTabTerminator","_this5","_proxiedTabTerminatorHandler","_tabKeyHandler","enabled","eventName","NAME","on","off","$elements","elementsCount","result","eq","$firstTabbable","$lastTabbable","isTabOnLast","shiftKey","isShiftTabOnFirst","isEmptyTabList","isOutsideTarget","$focusElement","_toggleHideTopOverlayCallback","_toggleHideOnParentsScrollSubscription","subscribe","needSubscribe","_this$_parentsScrollS","scrollEvent","prevTargets","closeOnScroll","$parents","_hideOnParentScrollTarget","parents","real","deviceType","closeHandled","_render","_appendContentToElement","parent","appendTo","shouldDeferRendering","isParentHidden","_contentAlreadyRendered","$parent","isHidden","getBody","_renderContentImpl","whenContentRendered","contentTemplateOption","_getTemplate","transclude","anonymousTemplateName","render","$content","noModel","onRendered","_dimensionChanged","_toggleWrapperScrollEventsSubscription","_getPositionControllerConfig","$root","onVisualPositionChanged","validate","getDirection","_toggleGestureCover","_toggleGestureCoverImpl","_clearSelection","isNative","originalEvent","isWheel","isMouseMove","isScrollByWheel","_cancelPreventDefault","cancelable","detach","$wrapperContainer","$container","containerExists","_renderGeometryImpl","updatePosition","_renderWrapper","_renderDimensions","_renderPosition","positionContent","_isAllWindowCovered","$visualContainer","$body","isIosSafari","platform","safari","isAllWindowCovered","isScrollingPrevented","hasClass","shouldPreventScrolling","shouldEnableScrolling","_disposed","scrollTo","_cachedBodyScrollTop","pageYOffset","styleWrapperPosition","_renderWrapperDimensions","positionWrapper","documentElement","getDocumentElement","isVisualContainerWindow","wrapperWidth","clientWidth","wrapperHeight","innerHeight","_attachKeyboardEvents","_keyboardListenerId","opts","_keyboardHandler","$target","_isVisible","_visibilityChanged","_clean","isRenovated","empty","_cleanFocusState","clearTimeout","_dispose","_deferShowTimer","_toggleRTLDirection","rtl","_optionChanged","value","name","includes","restorePositionOnNextRender","_this$_animateDeferre","_animateDeferred","resolveWith","fail","_this$_animateDeferre2","_invalidate","updateVisualContainer","fixWrapperPosition","showing","animateDeferred","repaint","forceStopAnimation","zIndex","base"],"sources":["C:/Users/Michal Abargel/Desktop/FULLSTACK_PROJECTS/PrivateLessones/F(x)/client/gui/node_modules/devextreme/esm/ui/overlay/ui.overlay.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/overlay/ui.overlay.js)\r\n * Version: 23.1.5\r\n * Build date: Wed Aug 30 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getOuterWidth,\r\n    getOuterHeight\r\n} from \"../../core/utils/size\";\r\nimport fx from \"../../animation/fx\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport devices from \"../../core/devices\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    EmptyTemplate\r\n} from \"../../core/templates/empty_template\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    contains,\r\n    resetActiveElement\r\n} from \"../../core/utils/dom\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport readyCallbacks from \"../../core/utils/ready_callbacks\";\r\nimport {\r\n    isFunction,\r\n    isObject,\r\n    isPromise,\r\n    isWindow\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    changeCallback\r\n} from \"../../core/utils/view_port\";\r\nimport {\r\n    getWindow,\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport errors from \"../../core/errors\";\r\nimport uiErrors from \"../widget/ui.errors\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    move as dragEventMove\r\n} from \"../../events/drag\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport {\r\n    keyboard\r\n} from \"../../events/short\";\r\nimport {\r\n    addNamespace,\r\n    isCommandKeyPressed,\r\n    normalizeKeyName\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    triggerHidingEvent,\r\n    triggerResizeEvent,\r\n    triggerShownEvent\r\n} from \"../../events/visibility_change\";\r\nimport {\r\n    hideCallback as hideTopOverlayCallback\r\n} from \"../../mobile/hide_callback\";\r\nimport {\r\n    tabbable\r\n} from \"../widget/selectors\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport browser from \"../../core/utils/browser\";\r\nimport * as zIndexPool from \"./z_index\";\r\nimport {\r\n    OverlayPositionController,\r\n    OVERLAY_POSITION_ALIASES\r\n} from \"./overlay_position_controller\";\r\nvar ready = readyCallbacks.add;\r\nvar window = getWindow();\r\nvar viewPortChanged = changeCallback;\r\nvar OVERLAY_CLASS = \"dx-overlay\";\r\nvar OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\r\nvar OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\r\nvar OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\r\nvar INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\r\nvar INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\r\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\r\nvar RTL_DIRECTION_CLASS = \"dx-rtl\";\r\nvar OVERLAY_STACK = [];\r\nvar PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\r\nvar TAB_KEY = \"tab\";\r\nready(() => {\r\n    eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, e => {\r\n        for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\r\n            if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\r\n                return\r\n            }\r\n        }\r\n    })\r\n});\r\nvar Overlay = Widget.inherit({\r\n    _supportedKeys: function() {\r\n        return extend(this.callBase(), {\r\n            escape: function() {\r\n                this.hide()\r\n            }\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            activeStateEnabled: false,\r\n            visible: false,\r\n            deferRendering: true,\r\n            shading: true,\r\n            shadingColor: \"\",\r\n            wrapperAttr: {},\r\n            position: extend({}, OVERLAY_POSITION_ALIASES.center),\r\n            width: \"80vw\",\r\n            minWidth: null,\r\n            maxWidth: null,\r\n            height: \"80vh\",\r\n            minHeight: null,\r\n            maxHeight: null,\r\n            animation: {\r\n                show: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    from: {\r\n                        scale: .55\r\n                    }\r\n                },\r\n                hide: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    from: {\r\n                        opacity: 1,\r\n                        scale: 1\r\n                    },\r\n                    to: {\r\n                        opacity: 0,\r\n                        scale: .55\r\n                    }\r\n                }\r\n            },\r\n            closeOnOutsideClick: false,\r\n            hideOnOutsideClick: false,\r\n            copyRootClassesToWrapper: false,\r\n            _ignoreCopyRootClassesToWrapperDeprecation: false,\r\n            _ignoreElementAttrDeprecation: false,\r\n            _ignorePreventScrollEventsDeprecation: false,\r\n            onShowing: null,\r\n            onShown: null,\r\n            onHiding: null,\r\n            onHidden: null,\r\n            contentTemplate: \"content\",\r\n            innerOverlay: false,\r\n            restorePosition: true,\r\n            container: void 0,\r\n            visualContainer: void 0,\r\n            hideTopOverlayHandler: () => {\r\n                this.hide()\r\n            },\r\n            hideOnParentScroll: false,\r\n            preventScrollEvents: true,\r\n            onPositioned: null,\r\n            propagateOutsideClick: false,\r\n            ignoreChildEvents: true,\r\n            _checkParentVisibility: true,\r\n            _fixWrapperPosition: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return !hasWindow()\r\n            },\r\n            options: {\r\n                width: null,\r\n                height: null,\r\n                animation: null,\r\n                _checkParentVisibility: false\r\n            }\r\n        }])\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        extend(this._optionsByReference, {\r\n            animation: true\r\n        })\r\n    },\r\n    $wrapper: function() {\r\n        return this._$wrapper\r\n    },\r\n    _eventBindingTarget: function() {\r\n        return this._$content\r\n    },\r\n    _setDeprecatedOptions() {\r\n        this.callBase();\r\n        extend(this._deprecatedOptions, {\r\n            closeOnOutsideClick: {\r\n                since: \"22.1\",\r\n                alias: \"hideOnOutsideClick\"\r\n            }\r\n        })\r\n    },\r\n    ctor: function(element, options) {\r\n        this.callBase(element, options);\r\n        if (options) {\r\n            if (options.copyRootClassesToWrapper && !options._ignoreCopyRootClassesToWrapperDeprecation) {\r\n                this._logDeprecatedOptionWarning(\"copyRootClassesToWrapper\", {\r\n                    since: \"21.2\",\r\n                    message: 'Use the \"wrapperAttr\" option instead'\r\n                })\r\n            }\r\n            if (options.elementAttr && !options._ignoreElementAttrDeprecation) {\r\n                this._logDeprecatedOptionWarning(\"elementAttr\", {\r\n                    since: \"21.2\",\r\n                    message: 'Use the \"wrapperAttr\" option instead'\r\n                })\r\n            }\r\n            if (\"preventScrollEvents\" in options && !options._ignorePreventScrollEventsDeprecation) {\r\n                this._logDeprecatedPreventScrollEventsInfo()\r\n            }\r\n        }\r\n    },\r\n    _logDeprecatedPreventScrollEventsInfo() {\r\n        this._logDeprecatedOptionWarning(\"preventScrollEvents\", {\r\n            since: \"23.1\",\r\n            message: \"If you enable this option, end-users may experience scrolling issues.\"\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initActions();\r\n        this._initHideOnOutsideClickHandler();\r\n        this._initTabTerminatorHandler();\r\n        this._customWrapperClass = null;\r\n        this._$wrapper = $(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\r\n        this._$content = $(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\r\n        this._initInnerOverlayClass();\r\n        var $element = this.$element();\r\n        if (this.option(\"copyRootClassesToWrapper\")) {\r\n            this._$wrapper.addClass($element.attr(\"class\"))\r\n        }\r\n        $element.addClass(OVERLAY_CLASS);\r\n        this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\r\n        this._toggleViewPortSubscription(true);\r\n        this._initHideTopOverlayHandler(this.option(\"hideTopOverlayHandler\"));\r\n        this._parentsScrollSubscriptionInfo = {\r\n            handler: e => {\r\n                this._hideOnParentsScrollHandler(e)\r\n            }\r\n        };\r\n        this.warnPositionAsFunction()\r\n    },\r\n    warnPositionAsFunction() {\r\n        if (isFunction(this.option(\"position\"))) {\r\n            errors.log(\"W0018\")\r\n        }\r\n    },\r\n    _initInnerOverlayClass: function() {\r\n        this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"))\r\n    },\r\n    _initHideTopOverlayHandler: function(handler) {\r\n        this._hideTopOverlayHandler = handler\r\n    },\r\n    _getActionsList: function() {\r\n        return [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioned\", \"onVisualPositionChanged\"]\r\n    },\r\n    _initActions: function() {\r\n        this._actions = {};\r\n        var actions = this._getActionsList();\r\n        each(actions, (_, action) => {\r\n            this._actions[action] = this._createActionByOption(action, {\r\n                excludeValidators: [\"disabled\", \"readOnly\"]\r\n            }) || noop\r\n        })\r\n    },\r\n    _initHideOnOutsideClickHandler: function() {\r\n        var _this = this;\r\n        this._proxiedDocumentDownHandler = function() {\r\n            return _this._documentDownHandler(...arguments)\r\n        }\r\n    },\r\n    _initMarkup() {\r\n        this.callBase();\r\n        this._renderWrapperAttributes();\r\n        this._initPositionController()\r\n    },\r\n    _documentDownHandler: function(e) {\r\n        if (this._showAnimationProcessing) {\r\n            this._stopAnimation()\r\n        }\r\n        var isAttachedTarget = $(window.document).is(e.target) || contains(window.document, e.target);\r\n        var isInnerOverlay = $(e.target).closest(\".\".concat(INNER_OVERLAY_CLASS)).length;\r\n        var outsideClick = isAttachedTarget && !isInnerOverlay && !(this._$content.is(e.target) || contains(this._$content.get(0), e.target));\r\n        if (outsideClick && this._shouldHideOnOutsideClick(e)) {\r\n            this._outsideClickHandler(e)\r\n        }\r\n        return this.option(\"propagateOutsideClick\")\r\n    },\r\n    _shouldHideOnOutsideClick: function(e) {\r\n        var {\r\n            hideOnOutsideClick: hideOnOutsideClick\r\n        } = this.option();\r\n        if (isFunction(hideOnOutsideClick)) {\r\n            return hideOnOutsideClick(e)\r\n        }\r\n        return hideOnOutsideClick\r\n    },\r\n    _outsideClickHandler(e) {\r\n        if (this.option(\"shading\")) {\r\n            e.preventDefault()\r\n        }\r\n        this.hide()\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _initTemplates: function() {\r\n        this._templateManager.addDefaultTemplates({\r\n            content: new EmptyTemplate\r\n        });\r\n        this.callBase()\r\n    },\r\n    _isTopOverlay: function() {\r\n        var overlayStack = this._overlayStack();\r\n        for (var i = overlayStack.length - 1; i >= 0; i--) {\r\n            var tabbableElements = overlayStack[i]._findTabbableBounds();\r\n            if (tabbableElements.first || tabbableElements.last) {\r\n                return overlayStack[i] === this\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _overlayStack: function() {\r\n        return OVERLAY_STACK\r\n    },\r\n    _zIndexInitValue: function() {\r\n        return Overlay.baseZIndex()\r\n    },\r\n    _toggleViewPortSubscription: function(toggle) {\r\n        var _this2 = this;\r\n        viewPortChanged.remove(this._viewPortChangeHandle);\r\n        if (toggle) {\r\n            this._viewPortChangeHandle = function() {\r\n                _this2._viewPortChangeHandler(...arguments)\r\n            };\r\n            viewPortChanged.add(this._viewPortChangeHandle)\r\n        }\r\n    },\r\n    _viewPortChangeHandler: function() {\r\n        this._positionController.updateContainer(this.option(\"container\"));\r\n        this._refresh()\r\n    },\r\n    _renderWrapperAttributes() {\r\n        var {\r\n            wrapperAttr: wrapperAttr\r\n        } = this.option();\r\n        var attributes = extend({}, wrapperAttr);\r\n        var classNames = attributes.class;\r\n        delete attributes.class;\r\n        this.$wrapper().attr(attributes).removeClass(this._customWrapperClass).addClass(classNames);\r\n        this._customWrapperClass = classNames\r\n    },\r\n    _renderVisibilityAnimate: function(visible) {\r\n        this._stopAnimation();\r\n        return visible ? this._show() : this._hide()\r\n    },\r\n    _getAnimationConfig: function() {\r\n        return this._getOptionValue(\"animation\", this)\r\n    },\r\n    _toggleBodyScroll: noop,\r\n    _animateShowing: function() {\r\n        var _this$_getAnimationCo, _showAnimation$start, _showAnimation$comple, _this3 = this;\r\n        var animation = null !== (_this$_getAnimationCo = this._getAnimationConfig()) && void 0 !== _this$_getAnimationCo ? _this$_getAnimationCo : {};\r\n        var showAnimation = this._normalizeAnimation(animation.show, \"to\");\r\n        var startShowAnimation = null !== (_showAnimation$start = null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.start) && void 0 !== _showAnimation$start ? _showAnimation$start : noop;\r\n        var completeShowAnimation = null !== (_showAnimation$comple = null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.complete) && void 0 !== _showAnimation$comple ? _showAnimation$comple : noop;\r\n        this._animate(showAnimation, (function() {\r\n            if (_this3._isAnimationPaused) {\r\n                return\r\n            }\r\n            if (_this3.option(\"focusStateEnabled\")) {\r\n                eventsEngine.trigger(_this3._focusTarget(), \"focus\")\r\n            }\r\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n                args[_key] = arguments[_key]\r\n            }\r\n            completeShowAnimation.call(_this3, ...args);\r\n            _this3._showAnimationProcessing = false;\r\n            _this3._isHidden = false;\r\n            _this3._actions.onShown();\r\n            _this3._toggleSafariScrolling();\r\n            _this3._showingDeferred.resolve()\r\n        }), (function() {\r\n            if (_this3._isAnimationPaused) {\r\n                return\r\n            }\r\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n                args[_key2] = arguments[_key2]\r\n            }\r\n            startShowAnimation.call(_this3, ...args);\r\n            _this3._showAnimationProcessing = true\r\n        }))\r\n    },\r\n    _processShowingHidingCancel: function(cancelArg, applyFunction, cancelFunction) {\r\n        if (isPromise(cancelArg)) {\r\n            cancelArg.then(shouldCancel => {\r\n                if (shouldCancel) {\r\n                    cancelFunction()\r\n                } else {\r\n                    applyFunction()\r\n                }\r\n            }).catch(() => applyFunction())\r\n        } else {\r\n            cancelArg ? cancelFunction() : applyFunction()\r\n        }\r\n    },\r\n    _show: function() {\r\n        this._showingDeferred = new Deferred;\r\n        this._parentHidden = this._isParentHidden();\r\n        this._showingDeferred.done(() => {\r\n            delete this._parentHidden\r\n        });\r\n        if (this._parentHidden) {\r\n            this._isHidden = true;\r\n            return this._showingDeferred.resolve()\r\n        }\r\n        if (this._currentVisible) {\r\n            return (new Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = true;\r\n        if (this._isHidingActionCanceled) {\r\n            delete this._isHidingActionCanceled;\r\n            this._showingDeferred.reject()\r\n        } else {\r\n            var show = () => {\r\n                this._toggleBodyScroll(this.option(\"enableBodyScroll\"));\r\n                this._stopAnimation();\r\n                this._toggleVisibility(true);\r\n                this._$content.css(\"visibility\", \"hidden\");\r\n                this._$content.toggleClass(INVISIBLE_STATE_CLASS, false);\r\n                this._updateZIndexStackPosition(true);\r\n                this._positionController.openingHandled();\r\n                this._renderContent();\r\n                var showingArgs = {\r\n                    cancel: false\r\n                };\r\n                this._actions.onShowing(showingArgs);\r\n                this._processShowingHidingCancel(showingArgs.cancel, () => {\r\n                    this._$content.css(\"visibility\", \"\");\r\n                    this._renderVisibility(true);\r\n                    this._animateShowing()\r\n                }, () => {\r\n                    this._toggleVisibility(false);\r\n                    this._$content.css(\"visibility\", \"\");\r\n                    this._$content.toggleClass(INVISIBLE_STATE_CLASS, true);\r\n                    this._isShowingActionCanceled = true;\r\n                    this._moveFromContainer();\r\n                    this.option(\"visible\", false);\r\n                    this._showingDeferred.resolve()\r\n                })\r\n            };\r\n            if (this.option(\"templatesRenderAsynchronously\")) {\r\n                this._stopShowTimer();\r\n                this._asyncShowTimeout = setTimeout(show)\r\n            } else {\r\n                show()\r\n            }\r\n        }\r\n        return this._showingDeferred.promise()\r\n    },\r\n    _normalizeAnimation: function(showHideConfig, direction) {\r\n        if (showHideConfig) {\r\n            showHideConfig = extend({\r\n                type: \"slide\",\r\n                skipElementInitialStyles: true\r\n            }, showHideConfig);\r\n            if (isObject(showHideConfig[direction])) {\r\n                extend(showHideConfig[direction], {\r\n                    position: this._positionController.position\r\n                })\r\n            }\r\n        }\r\n        return showHideConfig\r\n    },\r\n    _animateHiding: function() {\r\n        var _this$_getAnimationCo2, _hideAnimation$start, _hideAnimation$comple, _this4 = this;\r\n        var animation = null !== (_this$_getAnimationCo2 = this._getAnimationConfig()) && void 0 !== _this$_getAnimationCo2 ? _this$_getAnimationCo2 : {};\r\n        var hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\r\n        var startHideAnimation = null !== (_hideAnimation$start = null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.start) && void 0 !== _hideAnimation$start ? _hideAnimation$start : noop;\r\n        var completeHideAnimation = null !== (_hideAnimation$comple = null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.complete) && void 0 !== _hideAnimation$comple ? _hideAnimation$comple : noop;\r\n        this._animate(hideAnimation, (function() {\r\n            var _this4$_actions;\r\n            _this4._$content.css(\"pointerEvents\", \"\");\r\n            _this4._renderVisibility(false);\r\n            for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\r\n                args[_key3] = arguments[_key3]\r\n            }\r\n            completeHideAnimation.call(_this4, ...args);\r\n            _this4._hideAnimationProcessing = false;\r\n            null === (_this4$_actions = _this4._actions) || void 0 === _this4$_actions ? void 0 : _this4$_actions.onHidden();\r\n            _this4._hidingDeferred.resolve()\r\n        }), (function() {\r\n            _this4._$content.css(\"pointerEvents\", \"none\");\r\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\r\n                args[_key4] = arguments[_key4]\r\n            }\r\n            startHideAnimation.call(_this4, ...args);\r\n            _this4._hideAnimationProcessing = true\r\n        }))\r\n    },\r\n    _hide: function() {\r\n        if (!this._currentVisible) {\r\n            return (new Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = false;\r\n        this._hidingDeferred = new Deferred;\r\n        var hidingArgs = {\r\n            cancel: false\r\n        };\r\n        if (this._isShowingActionCanceled) {\r\n            delete this._isShowingActionCanceled;\r\n            this._hidingDeferred.reject()\r\n        } else {\r\n            this._actions.onHiding(hidingArgs);\r\n            this._toggleSafariScrolling();\r\n            this._toggleBodyScroll(true);\r\n            this._processShowingHidingCancel(hidingArgs.cancel, () => {\r\n                this._forceFocusLost();\r\n                this._toggleShading(false);\r\n                this._toggleSubscriptions(false);\r\n                this._stopShowTimer();\r\n                this._animateHiding()\r\n            }, () => {\r\n                this._isHidingActionCanceled = true;\r\n                this.option(\"visible\", true);\r\n                this._hidingDeferred.resolve()\r\n            })\r\n        }\r\n        return this._hidingDeferred.promise()\r\n    },\r\n    _forceFocusLost: function() {\r\n        var activeElement = domAdapter.getActiveElement();\r\n        var shouldResetActiveElement = !!this._$content.find(activeElement).length;\r\n        if (shouldResetActiveElement) {\r\n            resetActiveElement()\r\n        }\r\n    },\r\n    _animate: function(animation, completeCallback, startCallback) {\r\n        if (animation) {\r\n            startCallback = startCallback || animation.start || noop;\r\n            fx.animate(this._$content, extend({}, animation, {\r\n                start: startCallback,\r\n                complete: completeCallback\r\n            }))\r\n        } else {\r\n            completeCallback()\r\n        }\r\n    },\r\n    _stopAnimation: function() {\r\n        fx.stop(this._$content, true)\r\n    },\r\n    _renderVisibility: function(visible) {\r\n        if (visible && this._isParentHidden()) {\r\n            return\r\n        }\r\n        this._currentVisible = visible;\r\n        this._stopAnimation();\r\n        if (!visible) {\r\n            triggerHidingEvent(this._$content)\r\n        }\r\n        if (visible) {\r\n            this._checkContainerExists();\r\n            this._moveToContainer();\r\n            this._renderGeometry();\r\n            triggerShownEvent(this._$content);\r\n            triggerResizeEvent(this._$content)\r\n        } else {\r\n            this._toggleVisibility(visible);\r\n            this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\r\n            this._updateZIndexStackPosition(visible);\r\n            this._moveFromContainer()\r\n        }\r\n        this._toggleShading(visible);\r\n        this._toggleSubscriptions(visible)\r\n    },\r\n    _updateZIndexStackPosition: function(pushToStack) {\r\n        var overlayStack = this._overlayStack();\r\n        var index = overlayStack.indexOf(this);\r\n        if (pushToStack) {\r\n            if (-1 === index) {\r\n                this._zIndex = zIndexPool.create(this._zIndexInitValue());\r\n                overlayStack.push(this)\r\n            }\r\n            this._$wrapper.css(\"zIndex\", this._zIndex);\r\n            this._$content.css(\"zIndex\", this._zIndex)\r\n        } else if (-1 !== index) {\r\n            overlayStack.splice(index, 1);\r\n            zIndexPool.remove(this._zIndex)\r\n        }\r\n    },\r\n    _toggleShading: function(visible) {\r\n        this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\r\n        this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\r\n        this._toggleTabTerminator(visible && this.option(\"shading\"))\r\n    },\r\n    _initTabTerminatorHandler: function() {\r\n        var _this5 = this;\r\n        this._proxiedTabTerminatorHandler = function() {\r\n            _this5._tabKeyHandler(...arguments)\r\n        }\r\n    },\r\n    _toggleTabTerminator: function(enabled) {\r\n        var eventName = addNamespace(\"keydown\", this.NAME);\r\n        if (enabled) {\r\n            eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        } else {\r\n            eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        }\r\n    },\r\n    _findTabbableBounds: function() {\r\n        var $elements = this._$wrapper.find(\"*\");\r\n        var elementsCount = $elements.length - 1;\r\n        var result = {\r\n            first: null,\r\n            last: null\r\n        };\r\n        for (var i = 0; i <= elementsCount; i++) {\r\n            if (!result.first && $elements.eq(i).is(tabbable)) {\r\n                result.first = $elements.eq(i)\r\n            }\r\n            if (!result.last && $elements.eq(elementsCount - i).is(tabbable)) {\r\n                result.last = $elements.eq(elementsCount - i)\r\n            }\r\n            if (result.first && result.last) {\r\n                break\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _tabKeyHandler: function(e) {\r\n        if (normalizeKeyName(e) !== TAB_KEY || !this._isTopOverlay()) {\r\n            return\r\n        }\r\n        var tabbableElements = this._findTabbableBounds();\r\n        var $firstTabbable = tabbableElements.first;\r\n        var $lastTabbable = tabbableElements.last;\r\n        var isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0);\r\n        var isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0);\r\n        var isEmptyTabList = 0 === tabbableElements.length;\r\n        var isOutsideTarget = !contains(this._$wrapper.get(0), e.target);\r\n        if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\r\n            e.preventDefault();\r\n            var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\r\n            eventsEngine.trigger($focusElement, \"focusin\");\r\n            eventsEngine.trigger($focusElement, \"focus\")\r\n        }\r\n    },\r\n    _toggleSubscriptions: function(enabled) {\r\n        if (hasWindow()) {\r\n            this._toggleHideTopOverlayCallback(enabled);\r\n            this._toggleHideOnParentsScrollSubscription(enabled)\r\n        }\r\n    },\r\n    _toggleHideTopOverlayCallback: function(subscribe) {\r\n        if (!this._hideTopOverlayHandler) {\r\n            return\r\n        }\r\n        if (subscribe) {\r\n            hideTopOverlayCallback.add(this._hideTopOverlayHandler)\r\n        } else {\r\n            hideTopOverlayCallback.remove(this._hideTopOverlayHandler)\r\n        }\r\n    },\r\n    _toggleHideOnParentsScrollSubscription: function(needSubscribe) {\r\n        var _this$_parentsScrollS;\r\n        var scrollEvent = addNamespace(\"scroll\", this.NAME);\r\n        var {\r\n            prevTargets: prevTargets,\r\n            handler: handler\r\n        } = null !== (_this$_parentsScrollS = this._parentsScrollSubscriptionInfo) && void 0 !== _this$_parentsScrollS ? _this$_parentsScrollS : {};\r\n        eventsEngine.off(prevTargets, scrollEvent, handler);\r\n        var closeOnScroll = this.option(\"hideOnParentScroll\");\r\n        if (needSubscribe && closeOnScroll) {\r\n            var $parents = this._hideOnParentScrollTarget().parents();\r\n            if (\"desktop\" === devices.real().deviceType) {\r\n                $parents = $parents.add(window)\r\n            }\r\n            eventsEngine.on($parents, scrollEvent, handler);\r\n            this._parentsScrollSubscriptionInfo.prevTargets = $parents\r\n        }\r\n    },\r\n    _hideOnParentsScrollHandler: function(e) {\r\n        var closeHandled = false;\r\n        var closeOnScroll = this.option(\"hideOnParentScroll\");\r\n        if (isFunction(closeOnScroll)) {\r\n            closeHandled = closeOnScroll(e)\r\n        }\r\n        if (!closeHandled && !this._showAnimationProcessing) {\r\n            this.hide()\r\n        }\r\n    },\r\n    _hideOnParentScrollTarget: function() {\r\n        return this._$wrapper\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._appendContentToElement();\r\n        this._renderVisibilityAnimate(this.option(\"visible\"))\r\n    },\r\n    _appendContentToElement: function() {\r\n        if (!this._$content.parent().is(this.$element())) {\r\n            this._$content.appendTo(this.$element())\r\n        }\r\n    },\r\n    _renderContent: function() {\r\n        var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\r\n        var isParentHidden = this.option(\"visible\") && this._isParentHidden();\r\n        if (isParentHidden) {\r\n            this._isHidden = true;\r\n            return\r\n        }\r\n        if (this._contentAlreadyRendered || shouldDeferRendering) {\r\n            return\r\n        }\r\n        this._contentAlreadyRendered = true;\r\n        this._appendContentToElement();\r\n        this.callBase()\r\n    },\r\n    _isParentHidden: function() {\r\n        if (!this.option(\"_checkParentVisibility\")) {\r\n            return false\r\n        }\r\n        if (void 0 !== this._parentHidden) {\r\n            return this._parentHidden\r\n        }\r\n        var $parent = this.$element().parent();\r\n        if ($parent.is(\":visible\")) {\r\n            return false\r\n        }\r\n        var isHidden = false;\r\n        $parent.add($parent.parents()).each((function() {\r\n            var $element = $(this);\r\n            if (\"none\" === $element.css(\"display\")) {\r\n                isHidden = true;\r\n                return false\r\n            }\r\n        }));\r\n        return isHidden || !domAdapter.getBody().contains($parent.get(0))\r\n    },\r\n    _renderContentImpl: function() {\r\n        var whenContentRendered = new Deferred;\r\n        var contentTemplateOption = this.option(\"contentTemplate\");\r\n        var contentTemplate = this._getTemplate(contentTemplateOption);\r\n        var transclude = this._templateManager.anonymousTemplateName === contentTemplateOption;\r\n        contentTemplate && contentTemplate.render({\r\n            container: getPublicElement(this.$content()),\r\n            noModel: true,\r\n            transclude: transclude,\r\n            onRendered: () => {\r\n                whenContentRendered.resolve();\r\n                if (this.option(\"templatesRenderAsynchronously\")) {\r\n                    this._dimensionChanged()\r\n                }\r\n            }\r\n        });\r\n        this._toggleWrapperScrollEventsSubscription(this.option(\"preventScrollEvents\"));\r\n        whenContentRendered.done(() => {\r\n            if (this.option(\"visible\")) {\r\n                this._moveToContainer()\r\n            }\r\n        });\r\n        return whenContentRendered.promise()\r\n    },\r\n    _getPositionControllerConfig() {\r\n        var {\r\n            container: container,\r\n            visualContainer: visualContainer,\r\n            _fixWrapperPosition: _fixWrapperPosition,\r\n            restorePosition: restorePosition\r\n        } = this.option();\r\n        return {\r\n            container: container,\r\n            visualContainer: visualContainer,\r\n            $root: this.$element(),\r\n            $content: this._$content,\r\n            $wrapper: this._$wrapper,\r\n            onPositioned: this._actions.onPositioned,\r\n            onVisualPositionChanged: this._actions.onVisualPositionChanged,\r\n            restorePosition: restorePosition,\r\n            _fixWrapperPosition: _fixWrapperPosition\r\n        }\r\n    },\r\n    _initPositionController() {\r\n        this._positionController = new OverlayPositionController(this._getPositionControllerConfig())\r\n    },\r\n    _toggleWrapperScrollEventsSubscription: function(enabled) {\r\n        var eventName = addNamespace(dragEventMove, this.NAME);\r\n        eventsEngine.off(this._$wrapper, eventName);\r\n        if (enabled) {\r\n            eventsEngine.on(this._$wrapper, eventName, {\r\n                validate: function() {\r\n                    return true\r\n                },\r\n                getDirection: function() {\r\n                    return \"both\"\r\n                },\r\n                _toggleGestureCover: function(toggle) {\r\n                    if (!toggle) {\r\n                        this._toggleGestureCoverImpl(toggle)\r\n                    }\r\n                },\r\n                _clearSelection: noop,\r\n                isNative: true\r\n            }, e => {\r\n                var originalEvent = e.originalEvent.originalEvent;\r\n                var {\r\n                    type: type\r\n                } = originalEvent || {};\r\n                var isWheel = \"wheel\" === type;\r\n                var isMouseMove = \"mousemove\" === type;\r\n                var isScrollByWheel = isWheel && !isCommandKeyPressed(e);\r\n                e._cancelPreventDefault = true;\r\n                if (originalEvent && false !== e.cancelable && (!isMouseMove && !isWheel || isScrollByWheel)) {\r\n                    e.preventDefault()\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _moveFromContainer: function() {\r\n        this._$content.appendTo(this.$element());\r\n        this._$wrapper.detach()\r\n    },\r\n    _checkContainerExists() {\r\n        var $wrapperContainer = this._positionController.$container;\r\n        if (void 0 === $wrapperContainer) {\r\n            return\r\n        }\r\n        var containerExists = $wrapperContainer.length > 0;\r\n        if (!containerExists) {\r\n            uiErrors.log(\"W1021\", this.NAME)\r\n        }\r\n    },\r\n    _moveToContainer: function() {\r\n        var $wrapperContainer = this._positionController.$container;\r\n        this._$wrapper.appendTo($wrapperContainer);\r\n        this._$content.appendTo(this._$wrapper)\r\n    },\r\n    _renderGeometry: function(options) {\r\n        var {\r\n            visible: visible\r\n        } = this.option();\r\n        if (visible && hasWindow()) {\r\n            this._stopAnimation();\r\n            this._renderGeometryImpl()\r\n        }\r\n    },\r\n    _renderGeometryImpl: function() {\r\n        this._positionController.updatePosition(this._getOptionValue(\"position\"));\r\n        this._renderWrapper();\r\n        this._renderDimensions();\r\n        this._renderPosition()\r\n    },\r\n    _renderPosition() {\r\n        this._positionController.positionContent()\r\n    },\r\n    _isAllWindowCovered: function() {\r\n        return isWindow(this._positionController.$visualContainer.get(0)) && this.option(\"shading\")\r\n    },\r\n    _toggleSafariScrolling: function() {\r\n        var visible = this.option(\"visible\");\r\n        var $body = $(domAdapter.getBody());\r\n        var isIosSafari = \"ios\" === devices.real().platform && browser.safari;\r\n        var isAllWindowCovered = this._isAllWindowCovered();\r\n        var isScrollingPrevented = $body.hasClass(PREVENT_SAFARI_SCROLLING_CLASS);\r\n        var shouldPreventScrolling = !isScrollingPrevented && visible && isAllWindowCovered;\r\n        var shouldEnableScrolling = isScrollingPrevented && (!visible || !isAllWindowCovered || this._disposed);\r\n        if (isIosSafari) {\r\n            if (shouldEnableScrolling) {\r\n                $body.removeClass(PREVENT_SAFARI_SCROLLING_CLASS);\r\n                window.scrollTo(0, this._cachedBodyScrollTop);\r\n                this._cachedBodyScrollTop = void 0\r\n            } else if (shouldPreventScrolling) {\r\n                this._cachedBodyScrollTop = window.pageYOffset;\r\n                $body.addClass(PREVENT_SAFARI_SCROLLING_CLASS)\r\n            }\r\n        }\r\n    },\r\n    _renderWrapper: function() {\r\n        this._positionController.styleWrapperPosition();\r\n        this._renderWrapperDimensions();\r\n        this._positionController.positionWrapper()\r\n    },\r\n    _renderWrapperDimensions: function() {\r\n        var $visualContainer = this._positionController.$visualContainer;\r\n        var documentElement = domAdapter.getDocumentElement();\r\n        var isVisualContainerWindow = isWindow($visualContainer.get(0));\r\n        var wrapperWidth = isVisualContainerWindow ? documentElement.clientWidth : getOuterWidth($visualContainer);\r\n        var wrapperHeight = isVisualContainerWindow ? window.innerHeight : getOuterHeight($visualContainer);\r\n        this._$wrapper.css({\r\n            width: wrapperWidth,\r\n            height: wrapperHeight\r\n        })\r\n    },\r\n    _renderDimensions: function() {\r\n        var content = this._$content.get(0);\r\n        this._$content.css({\r\n            minWidth: this._getOptionValue(\"minWidth\", content),\r\n            maxWidth: this._getOptionValue(\"maxWidth\", content),\r\n            minHeight: this._getOptionValue(\"minHeight\", content),\r\n            maxHeight: this._getOptionValue(\"maxHeight\", content),\r\n            width: this._getOptionValue(\"width\", content),\r\n            height: this._getOptionValue(\"height\", content)\r\n        })\r\n    },\r\n    _focusTarget: function() {\r\n        return this._$content\r\n    },\r\n    _attachKeyboardEvents: function() {\r\n        this._keyboardListenerId = keyboard.on(this._$content, null, opts => this._keyboardHandler(opts))\r\n    },\r\n    _keyboardHandler: function(options) {\r\n        var e = options.originalEvent;\r\n        var $target = $(e.target);\r\n        if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\r\n            this.callBase(...arguments)\r\n        }\r\n    },\r\n    _isVisible: function() {\r\n        return this.option(\"visible\")\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            if (this.option(\"visible\")) {\r\n                this._renderVisibilityAnimate(visible)\r\n            }\r\n        } else {\r\n            this._renderVisibilityAnimate(visible)\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._renderGeometry()\r\n    },\r\n    _clean: function() {\r\n        var options = this.option();\r\n        if (!this._contentAlreadyRendered && !options.isRenovated) {\r\n            this.$content().empty()\r\n        }\r\n        this._renderVisibility(false);\r\n        this._stopShowTimer();\r\n        this._cleanFocusState()\r\n    },\r\n    _stopShowTimer() {\r\n        if (this._asyncShowTimeout) {\r\n            clearTimeout(this._asyncShowTimeout)\r\n        }\r\n        this._asyncShowTimeout = null\r\n    },\r\n    _dispose: function() {\r\n        fx.stop(this._$content, false);\r\n        clearTimeout(this._deferShowTimer);\r\n        this._toggleViewPortSubscription(false);\r\n        this._toggleSubscriptions(false);\r\n        this._updateZIndexStackPosition(false);\r\n        this._toggleTabTerminator(false);\r\n        this._actions = null;\r\n        this._parentsScrollSubscriptionInfo = null;\r\n        this.callBase();\r\n        this._toggleSafariScrolling();\r\n        this.option(\"visible\") && zIndexPool.remove(this._zIndex);\r\n        this._$wrapper.remove();\r\n        this._$content.remove()\r\n    },\r\n    _toggleRTLDirection: function(rtl) {\r\n        this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl)\r\n    },\r\n    _optionChanged: function(args) {\r\n        var {\r\n            value: value,\r\n            name: name\r\n        } = args;\r\n        if (this._getActionsList().includes(name)) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (name) {\r\n            case \"animation\":\r\n                break;\r\n            case \"shading\":\r\n                this._toggleShading(this.option(\"visible\"));\r\n                this._toggleSafariScrolling();\r\n                break;\r\n            case \"shadingColor\":\r\n                this._toggleShading(this.option(\"visible\"));\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this._renderGeometry();\r\n                break;\r\n            case \"minWidth\":\r\n            case \"maxWidth\":\r\n            case \"minHeight\":\r\n            case \"maxHeight\":\r\n                this._renderGeometry();\r\n                break;\r\n            case \"position\":\r\n                this._positionController.updatePosition(this.option(\"position\"));\r\n                this._positionController.restorePositionOnNextRender(true);\r\n                this._renderGeometry();\r\n                this._toggleSafariScrolling();\r\n                break;\r\n            case \"visible\":\r\n                this._renderVisibilityAnimate(value).done(() => {\r\n                    var _this$_animateDeferre;\r\n                    return null === (_this$_animateDeferre = this._animateDeferred) || void 0 === _this$_animateDeferre ? void 0 : _this$_animateDeferre.resolveWith(this)\r\n                }).fail(() => {\r\n                    var _this$_animateDeferre2;\r\n                    return null === (_this$_animateDeferre2 = this._animateDeferred) || void 0 === _this$_animateDeferre2 ? void 0 : _this$_animateDeferre2.reject()\r\n                });\r\n                break;\r\n            case \"container\":\r\n                this._positionController.updateContainer(value);\r\n                this._invalidate();\r\n                this._toggleSafariScrolling();\r\n                break;\r\n            case \"visualContainer\":\r\n                this._positionController.updateVisualContainer(value);\r\n                this._renderWrapper();\r\n                this._toggleSafariScrolling();\r\n                break;\r\n            case \"innerOverlay\":\r\n                this._initInnerOverlayClass();\r\n                break;\r\n            case \"deferRendering\":\r\n            case \"contentTemplate\":\r\n                this._contentAlreadyRendered = false;\r\n                this._clean();\r\n                this._invalidate();\r\n                break;\r\n            case \"hideTopOverlayHandler\":\r\n                this._toggleHideTopOverlayCallback(false);\r\n                this._initHideTopOverlayHandler(value);\r\n                this._toggleHideTopOverlayCallback(this.option(\"visible\"));\r\n                break;\r\n            case \"hideOnParentScroll\":\r\n                this._toggleHideOnParentsScrollSubscription(this.option(\"visible\"));\r\n                break;\r\n            case \"closeOnOutsideClick\":\r\n            case \"hideOnOutsideClick\":\r\n            case \"propagateOutsideClick\":\r\n                break;\r\n            case \"rtlEnabled\":\r\n                this._contentAlreadyRendered = false;\r\n                this.callBase(args);\r\n                break;\r\n            case \"_fixWrapperPosition\":\r\n                this._positionController.fixWrapperPosition = value;\r\n                break;\r\n            case \"wrapperAttr\":\r\n                this._renderWrapperAttributes();\r\n                break;\r\n            case \"restorePosition\":\r\n                this._positionController.restorePosition = value;\r\n                break;\r\n            case \"preventScrollEvents\":\r\n                this._logDeprecatedPreventScrollEventsInfo();\r\n                this._toggleWrapperScrollEventsSubscription(value);\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    toggle: function(showing) {\r\n        showing = void 0 === showing ? !this.option(\"visible\") : showing;\r\n        var result = new Deferred;\r\n        if (showing === this.option(\"visible\")) {\r\n            return result.resolveWith(this, [showing]).promise()\r\n        }\r\n        var animateDeferred = new Deferred;\r\n        this._animateDeferred = animateDeferred;\r\n        this.option(\"visible\", showing);\r\n        animateDeferred.promise().done(() => {\r\n            delete this._animateDeferred;\r\n            result.resolveWith(this, [this.option(\"visible\")])\r\n        }).fail(() => {\r\n            delete this._animateDeferred;\r\n            result.reject()\r\n        });\r\n        return result.promise()\r\n    },\r\n    $content: function() {\r\n        return this._$content\r\n    },\r\n    show: function() {\r\n        return this.toggle(true)\r\n    },\r\n    hide: function() {\r\n        return this.toggle(false)\r\n    },\r\n    content: function() {\r\n        return getPublicElement(this._$content)\r\n    },\r\n    repaint: function() {\r\n        if (this._contentAlreadyRendered) {\r\n            this._positionController.restorePositionOnNextRender(true);\r\n            this._renderGeometry({\r\n                forceStopAnimation: true\r\n            });\r\n            triggerResizeEvent(this._$content)\r\n        } else {\r\n            this.callBase()\r\n        }\r\n    }\r\n});\r\nOverlay.baseZIndex = zIndex => zIndexPool.base(zIndex);\r\nregisterComponent(\"dxOverlay\", Overlay);\r\nexport default Overlay;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}