{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scheduler/ui.scheduler.js)\r\n * Version: 23.1.5\r\n * Build date: Wed Aug 30 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport registerComponent from \"../../core/component_registrator\";\nimport config from \"../../core/config\";\nimport devices from \"../../core/devices\";\nimport $ from \"../../core/renderer\";\nimport { BindableTemplate } from \"../../core/templates/bindable_template\";\nimport { EmptyTemplate } from \"../../core/templates/empty_template\";\nimport Callbacks from \"../../core/utils/callbacks\";\nimport { noop } from \"../../core/utils/common\";\nimport { compileGetter } from \"../../core/utils/data\";\nimport { getBoundingRect } from \"../../core/utils/position\";\nimport dateUtils from \"../../core/utils/date\";\nimport dateSerialization from \"../../core/utils/date_serialization\";\nimport { Deferred, when, fromPromise } from \"../../core/utils/deferred\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport { isDefined, isString, isObject, isFunction, isEmptyObject, isDeferred, isPromise } from \"../../core/utils/type\";\nimport { hasWindow } from \"../../core/utils/window\";\nimport DataHelperMixin from \"../../data_helper\";\nimport { triggerResizeEvent } from \"../../events/visibility_change\";\nimport dateLocalization from \"../../localization/date\";\nimport messageLocalization from \"../../localization/message\";\nimport { custom as customDialog } from \"../dialog\";\nimport { isMaterial } from \"../themes\";\nimport errors from \"../widget/ui.errors\";\nimport Widget from \"../widget/ui.widget\";\nimport { AppointmentPopup, ACTION_TO_APPOINTMENT } from \"../../__internal/scheduler/appointment_popup/m_popup\";\nimport { AppointmentForm } from \"../../__internal/scheduler/appointment_popup/m_form\";\nimport { CompactAppointmentsHelper } from \"./compactAppointmentsHelper\";\nimport { DesktopTooltipStrategy } from \"../../__internal/scheduler/tooltip_strategies/m_desktop_tooltip_strategy\";\nimport { MobileTooltipStrategy } from \"../../__internal/scheduler/tooltip_strategies/m_mobile_tooltip_strategy\";\nimport { hide as hideLoading, show as showLoading } from \"./loading\";\nimport AppointmentCollection from \"../../__internal/scheduler/appointments/m_appointment_collection\";\nimport AppointmentLayoutManager from \"./appointments.layout_manager\";\nimport { SchedulerHeader } from \"../../__internal/scheduler/header/m_header\";\nimport subscribes from \"./subscribes\";\nimport { getRecurrenceProcessor } from \"./recurrence\";\nimport timeZoneUtils from \"./utils.timeZone\";\nimport SchedulerAgenda from \"./workspaces/ui.scheduler.agenda\";\nimport SchedulerTimelineDay from \"./workspaces/ui.scheduler.timeline_day\";\nimport SchedulerTimelineMonth from \"./workspaces/ui.scheduler.timeline_month\";\nimport SchedulerTimelineWeek from \"./workspaces/ui.scheduler.timeline_week\";\nimport SchedulerTimelineWorkWeek from \"./workspaces/ui.scheduler.timeline_work_week\";\nimport SchedulerWorkSpaceDay from \"./workspaces/ui.scheduler.work_space_day\";\nimport SchedulerWorkSpaceMonth from \"./workspaces/ui.scheduler.work_space_month\";\nimport SchedulerWorkSpaceWeek from \"./workspaces/ui.scheduler.work_space_week\";\nimport SchedulerWorkSpaceWorkWeek from \"./workspaces/ui.scheduler.work_space_work_week\";\nimport { createAppointmentAdapter } from \"./appointmentAdapter\";\nimport { AppointmentTooltipInfo } from \"./dataStructures\";\nimport { utils } from \"./utils\";\nimport { createExpressions, createResourceEditorModel as _createResourceEditorModel, getAppointmentColor, getCellGroups, loadResources, setResourceToAppointment } from \"../../__internal/scheduler/resources/m_utils\";\nimport { ExpressionUtils } from \"./expressionUtils\";\nimport { validateDayHours, isDateAndTimeView as _isDateAndTimeView, isTimelineView } from \"../../renovation/ui/scheduler/view_model/to_test/views/utils/base\";\nimport { renderAppointments } from \"../../__internal/scheduler/appointments/m_render\";\nimport { AgendaResourceProcessor } from \"../../__internal/scheduler/resources/m_agenda_resource_processor\";\nimport { AppointmentDataProvider } from \"../../__internal/scheduler/appointments/data_provider/m_appointment_data_provider\";\nimport { getAppointmentTakesAllDay } from \"../../renovation/ui/scheduler/appointment/utils/getAppointmentTakesAllDay\";\nimport { getPreparedDataItems } from \"../../renovation/ui/scheduler/utils/data\";\nimport { getCurrentView } from \"../../renovation/ui/scheduler/model/views\";\nimport { createTimeZoneCalculator } from \"../../renovation/ui/scheduler/timeZoneCalculator/createTimeZoneCalculator\";\nimport { excludeFromRecurrence } from \"../../renovation/ui/scheduler/utils/recurrence/excludeFromRecurrence\";\nvar MINUTES_IN_HOUR = 60;\nvar DEFAULT_AGENDA_DURATION = 7;\nvar WIDGET_CLASS = \"dx-scheduler\";\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\nvar WIDGET_SMALL_WIDTH = 400;\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\nvar DEFAULT_APPOINTMENT_TEMPLATE_NAME = \"item\";\nvar DEFAULT_APPOINTMENT_COLLECTOR_TEMPLATE_NAME = \"appointmentCollector\";\nvar DEFAULT_DROP_DOWN_APPOINTMENT_TEMPLATE_NAME = \"dropDownAppointment\";\nvar VIEWS_CONFIG = {\n  day: {\n    workSpace: SchedulerWorkSpaceDay,\n    renderingStrategy: \"vertical\"\n  },\n  week: {\n    workSpace: SchedulerWorkSpaceWeek,\n    renderingStrategy: \"vertical\"\n  },\n  workWeek: {\n    workSpace: SchedulerWorkSpaceWorkWeek,\n    renderingStrategy: \"vertical\"\n  },\n  month: {\n    workSpace: SchedulerWorkSpaceMonth,\n    renderingStrategy: \"horizontalMonth\"\n  },\n  timelineDay: {\n    workSpace: SchedulerTimelineDay,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWeek: {\n    workSpace: SchedulerTimelineWeek,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWorkWeek: {\n    workSpace: SchedulerTimelineWorkWeek,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineMonth: {\n    workSpace: SchedulerTimelineMonth,\n    renderingStrategy: \"horizontalMonthLine\"\n  },\n  agenda: {\n    workSpace: SchedulerAgenda,\n    renderingStrategy: \"agenda\"\n  }\n};\nvar StoreEventNames = {\n  ADDING: \"onAppointmentAdding\",\n  ADDED: \"onAppointmentAdded\",\n  DELETING: \"onAppointmentDeleting\",\n  DELETED: \"onAppointmentDeleted\",\n  UPDATING: \"onAppointmentUpdating\",\n  UPDATED: \"onAppointmentUpdated\"\n};\nvar RECURRENCE_EDITING_MODE = {\n  SERIES: \"editSeries\",\n  OCCURENCE: \"editOccurence\",\n  CANCEL: \"cancel\"\n};\nclass Scheduler extends Widget {\n  _getDefaultOptions() {\n    var defaultOptions = extend(super._getDefaultOptions(), {\n      views: [\"day\", \"week\"],\n      currentView: \"day\",\n      currentDate: dateUtils.trimTime(new Date()),\n      min: void 0,\n      max: void 0,\n      dateSerializationFormat: void 0,\n      firstDayOfWeek: void 0,\n      groups: [],\n      resources: [],\n      loadedResources: [],\n      resourceLoaderMap: new Map(),\n      dataSource: null,\n      customizeDateNavigatorText: void 0,\n      appointmentTemplate: DEFAULT_APPOINTMENT_TEMPLATE_NAME,\n      dropDownAppointmentTemplate: DEFAULT_DROP_DOWN_APPOINTMENT_TEMPLATE_NAME,\n      appointmentCollectorTemplate: DEFAULT_APPOINTMENT_COLLECTOR_TEMPLATE_NAME,\n      dataCellTemplate: null,\n      timeCellTemplate: null,\n      resourceCellTemplate: null,\n      dateCellTemplate: null,\n      startDayHour: 0,\n      endDayHour: 24,\n      editing: {\n        allowAdding: true,\n        allowDeleting: true,\n        allowDragging: true,\n        allowResizing: true,\n        allowUpdating: true,\n        allowTimeZoneEditing: false\n      },\n      showAllDayPanel: true,\n      showCurrentTimeIndicator: true,\n      shadeUntilCurrentTime: false,\n      indicatorUpdateInterval: 3e5,\n      indicatorTime: void 0,\n      recurrenceEditMode: \"dialog\",\n      cellDuration: 30,\n      maxAppointmentsPerCell: \"auto\",\n      selectedCellData: [],\n      groupByDate: false,\n      onAppointmentRendered: null,\n      onAppointmentClick: null,\n      onAppointmentDblClick: null,\n      onAppointmentContextMenu: null,\n      onCellClick: null,\n      onCellContextMenu: null,\n      onAppointmentAdding: null,\n      onAppointmentAdded: null,\n      onAppointmentUpdating: null,\n      onAppointmentUpdated: null,\n      onAppointmentDeleting: null,\n      onAppointmentDeleted: null,\n      onAppointmentFormOpening: null,\n      onAppointmentTooltipShowing: null,\n      appointmentTooltipTemplate: \"appointmentTooltip\",\n      appointmentPopupTemplate: \"appointmentPopup\",\n      crossScrollingEnabled: false,\n      useDropDownViewSwitcher: false,\n      startDateExpr: \"startDate\",\n      endDateExpr: \"endDate\",\n      textExpr: \"text\",\n      descriptionExpr: \"description\",\n      allDayExpr: \"allDay\",\n      recurrenceRuleExpr: \"recurrenceRule\",\n      recurrenceExceptionExpr: \"recurrenceException\",\n      disabledExpr: \"disabled\",\n      remoteFiltering: false,\n      timeZone: \"\",\n      startDateTimeZoneExpr: \"startDateTimeZone\",\n      endDateTimeZoneExpr: \"endDateTimeZone\",\n      noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\n      adaptivityEnabled: false,\n      allowMultipleCellSelection: true,\n      scrolling: {\n        mode: \"standard\"\n      },\n      allDayPanelMode: \"all\",\n      renovateRender: true,\n      _draggingMode: \"outlook\",\n      _appointmentTooltipOffset: {\n        x: 0,\n        y: 0\n      },\n      _appointmentTooltipButtonsPosition: \"bottom\",\n      _appointmentTooltipOpenButtonText: messageLocalization.format(\"dxScheduler-openAppointment\"),\n      _appointmentCountPerCell: 2,\n      _collectorOffset: 0,\n      _appointmentOffset: 26,\n      toolbar: [{\n        location: \"before\",\n        defaultElement: \"dateNavigator\"\n      }, {\n        location: \"after\",\n        defaultElement: \"viewSwitcher\"\n      }]\n    });\n    return extend(true, defaultOptions, {\n      integrationOptions: {\n        useDeferUpdateForTemplates: false\n      }\n    });\n  }\n  get filteredItems() {\n    if (!this._filteredItems) {\n      this._filteredItems = [];\n    }\n    return this._filteredItems;\n  }\n  set filteredItems(value) {\n    this._filteredItems = value;\n  }\n  get preparedItems() {\n    if (!this._preparedItems) {\n      this._preparedItems = [];\n    }\n    return this._preparedItems;\n  }\n  set preparedItems(value) {\n    this._preparedItems = value;\n  }\n  get currentView() {\n    return getCurrentView(this.option(\"currentView\"), this.option(\"views\"));\n  }\n  get currentViewType() {\n    return isObject(this.currentView) ? this.currentView.type : this.currentView;\n  }\n  get timeZoneCalculator() {\n    if (!this._timeZoneCalculator) {\n      this._timeZoneCalculator = createTimeZoneCalculator(this.option(\"timeZone\"));\n    }\n    return this._timeZoneCalculator;\n  }\n  _setDeprecatedOptions() {\n    super._setDeprecatedOptions();\n    extend(this._deprecatedOptions, {\n      dropDownAppointmentTemplate: {\n        since: \"19.2\",\n        message: \"appointmentTooltipTemplate\"\n      }\n    });\n  }\n  _defaultOptionsRules() {\n    return super._defaultOptionsRules().concat([{\n      device: function () {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }, {\n      device: function () {\n        return !devices.current().generic;\n      },\n      options: {\n        useDropDownViewSwitcher: true,\n        editing: {\n          allowDragging: false,\n          allowResizing: false\n        }\n      }\n    }, {\n      device: function () {\n        return isMaterial();\n      },\n      options: {\n        useDropDownViewSwitcher: true,\n        dateCellTemplate: function (data, index, element) {\n          var text = data.text;\n          text.split(\" \").forEach(function (text, index) {\n            var span = $(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\n            $(element).append(span);\n            if (!index) {\n              $(element).append(\" \");\n            }\n          });\n        },\n        _appointmentTooltipOffset: {\n          x: 0,\n          y: 11\n        },\n        _appointmentTooltipButtonsPosition: \"top\",\n        _appointmentTooltipOpenButtonText: null,\n        _appointmentCountPerCell: 1,\n        _collectorOffset: 20,\n        _appointmentOffset: 30\n      }\n    }]);\n  }\n  _postponeDataSourceLoading(promise) {\n    this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise);\n  }\n  _postponeResourceLoading() {\n    var whenLoaded = this.postponedOperations.add(\"loadResources\", () => {\n      var groups = this._getCurrentViewOption(\"groups\");\n      return loadResources(groups, this.option(\"resources\"), this.option(\"resourceLoaderMap\"));\n    });\n    var resolveCallbacks = new Deferred();\n    whenLoaded.done(resources => {\n      this.option(\"loadedResources\", resources);\n      resolveCallbacks.resolve(resources);\n    });\n    this._postponeDataSourceLoading(whenLoaded);\n    return resolveCallbacks.promise();\n  }\n  _optionChanged(args) {\n    var _this$_header, _this$_header2, _this$_header4;\n    var value = args.value;\n    var name = args.name;\n    switch (args.name) {\n      case \"customizeDateNavigatorText\":\n        this._updateOption(\"header\", name, value);\n        break;\n      case \"firstDayOfWeek\":\n        this._updateOption(\"workSpace\", name, value);\n        this._updateOption(\"header\", name, value);\n        break;\n      case \"currentDate\":\n        value = this._dateOption(name);\n        value = dateUtils.trimTime(new Date(value));\n        this.option(\"selectedCellData\", []);\n        this._workSpace.option(name, new Date(value));\n        null === (_this$_header = this._header) || void 0 === _this$_header ? void 0 : _this$_header.option(name, new Date(value));\n        null === (_this$_header2 = this._header) || void 0 === _this$_header2 ? void 0 : _this$_header2.option(\"startViewDate\", this.getStartViewDate());\n        this._appointments.option(\"items\", []);\n        this._filterAppointmentsByDate();\n        this._postponeDataSourceLoading();\n        break;\n      case \"dataSource\":\n        this._initDataSource();\n        this.appointmentDataProvider.setDataSource(this._dataSource);\n        this._postponeResourceLoading().done(resources => {\n          this._filterAppointmentsByDate();\n          this._updateOption(\"workSpace\", \"showAllDayPanel\", this.option(\"showAllDayPanel\"));\n        });\n        break;\n      case \"min\":\n      case \"max\":\n        value = this._dateOption(name);\n        this._updateOption(\"header\", name, new Date(value));\n        this._updateOption(\"workSpace\", name, new Date(value));\n        break;\n      case \"views\":\n        if (this._getCurrentViewOptions()) {\n          this.repaint();\n        } else {\n          var _this$_header3;\n          null === (_this$_header3 = this._header) || void 0 === _this$_header3 ? void 0 : _this$_header3.option(name, value);\n        }\n        break;\n      case \"useDropDownViewSwitcher\":\n        null === (_this$_header4 = this._header) || void 0 === _this$_header4 ? void 0 : _this$_header4.option(name, value);\n        break;\n      case \"currentView\":\n        this._validateDayHours();\n        this._validateCellDuration();\n        this._appointments.option({\n          items: [],\n          allowDrag: this._allowDragging(),\n          allowResize: this._allowResizing(),\n          itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\n        });\n        this._postponeResourceLoading().done(resources => {\n          var _this$_header5;\n          this._refreshWorkSpace(resources);\n          null === (_this$_header5 = this._header) || void 0 === _this$_header5 ? void 0 : _this$_header5.option(this._headerConfig());\n          this._filterAppointmentsByDate();\n          this._appointments.option(\"allowAllDayResize\", \"day\" !== value);\n        });\n        this.postponedOperations.callPostponedOperations();\n        break;\n      case \"appointmentTemplate\":\n        this._appointments.option(\"itemTemplate\", value);\n        break;\n      case \"dateCellTemplate\":\n      case \"resourceCellTemplate\":\n      case \"dataCellTemplate\":\n      case \"timeCellTemplate\":\n        this.repaint();\n        break;\n      case \"groups\":\n        this._postponeResourceLoading().done(resources => {\n          this._refreshWorkSpace(resources);\n          this._filterAppointmentsByDate();\n        });\n        break;\n      case \"resources\":\n        this._dataAccessors.resources = createExpressions(this.option(\"resources\"));\n        this.agendaResourceProcessor.initializeState(this.option(\"resources\"));\n        this.updateInstances();\n        this._postponeResourceLoading().done(resources => {\n          this._appointments.option(\"items\", []);\n          this._refreshWorkSpace(resources);\n          this._filterAppointmentsByDate();\n          this._createAppointmentPopupForm();\n        });\n        break;\n      case \"startDayHour\":\n      case \"endDayHour\":\n        this._validateDayHours();\n        this.updateInstances();\n        this._appointments.option(\"items\", []);\n        this._updateOption(\"workSpace\", name, value);\n        this._appointments.repaint();\n        this._filterAppointmentsByDate();\n        this._postponeDataSourceLoading();\n        break;\n      case StoreEventNames.ADDING:\n      case StoreEventNames.ADDED:\n      case StoreEventNames.UPDATING:\n      case StoreEventNames.UPDATED:\n      case StoreEventNames.DELETING:\n      case StoreEventNames.DELETED:\n      case \"onAppointmentFormOpening\":\n      case \"onAppointmentTooltipShowing\":\n        this._actions[name] = this._createActionByOption(name);\n        break;\n      case \"onAppointmentRendered\":\n        this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\n        break;\n      case \"onAppointmentClick\":\n        this._appointments.option(\"onItemClick\", this._createActionByOption(name));\n        break;\n      case \"onAppointmentDblClick\":\n        this._appointments.option(name, this._createActionByOption(name));\n        break;\n      case \"onAppointmentContextMenu\":\n        this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\n        break;\n      case \"noDataText\":\n      case \"allowMultipleCellSelection\":\n      case \"selectedCellData\":\n      case \"accessKey\":\n      case \"onCellClick\":\n      case \"onCellContextMenu\":\n        this._workSpace.option(name, value);\n        break;\n      case \"crossScrollingEnabled\":\n        this._postponeResourceLoading().done(resources => {\n          this._appointments.option(\"items\", []);\n          this._refreshWorkSpace(resources);\n          if (this._readyToRenderAppointments) {\n            this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n          }\n        });\n        break;\n      case \"cellDuration\":\n        this._validateCellDuration();\n        this._updateOption(\"workSpace\", name, value);\n        this._appointments.option(\"items\", []);\n        if (this._readyToRenderAppointments) {\n          this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\n          this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n        }\n        break;\n      case \"tabIndex\":\n      case \"focusStateEnabled\":\n        this._updateOption(\"header\", name, value);\n        this._updateOption(\"workSpace\", name, value);\n        this._appointments.option(name, value);\n        super._optionChanged(args);\n        break;\n      case \"width\":\n        this._updateOption(\"header\", name, value);\n        if (this.option(\"crossScrollingEnabled\")) {\n          this._updateOption(\"workSpace\", \"width\", value);\n        }\n        this._updateOption(\"workSpace\", \"schedulerWidth\", value);\n        super._optionChanged(args);\n        this._dimensionChanged(null, true);\n        break;\n      case \"height\":\n        super._optionChanged(args);\n        this._dimensionChanged(null, true);\n        this._updateOption(\"workSpace\", \"schedulerHeight\", value);\n        break;\n      case \"editing\":\n        this._initEditing();\n        var editing = this._editing;\n        this._bringEditingModeToAppointments(editing);\n        this.hideAppointmentTooltip();\n        this._cleanPopup();\n        break;\n      case \"showAllDayPanel\":\n        this.updateInstances();\n        this.repaint();\n        break;\n      case \"showCurrentTimeIndicator\":\n      case \"indicatorTime\":\n      case \"indicatorUpdateInterval\":\n      case \"shadeUntilCurrentTime\":\n      case \"groupByDate\":\n        this._updateOption(\"workSpace\", name, value);\n        this.repaint();\n        break;\n      case \"appointmentDragging\":\n      case \"appointmentTooltipTemplate\":\n      case \"appointmentPopupTemplate\":\n      case \"recurrenceEditMode\":\n      case \"remoteFiltering\":\n      case \"timeZone\":\n        this.updateInstances();\n        this.repaint();\n        break;\n      case \"dropDownAppointmentTemplate\":\n      case \"appointmentCollectorTemplate\":\n      case \"_appointmentTooltipOffset\":\n      case \"_appointmentTooltipButtonsPosition\":\n      case \"_appointmentTooltipOpenButtonText\":\n      case \"_appointmentCountPerCell\":\n      case \"_collectorOffset\":\n      case \"_appointmentOffset\":\n        this.repaint();\n        break;\n      case \"dateSerializationFormat\":\n      case \"maxAppointmentsPerCell\":\n        break;\n      case \"startDateExpr\":\n      case \"endDateExpr\":\n      case \"startDateTimeZoneExpr\":\n      case \"endDateTimeZoneExpr\":\n      case \"textExpr\":\n      case \"descriptionExpr\":\n      case \"allDayExpr\":\n      case \"recurrenceRuleExpr\":\n      case \"recurrenceExceptionExpr\":\n      case \"disabledExpr\":\n        this._updateExpression(name, value);\n        this.appointmentDataProvider.updateDataAccessors(this._dataAccessors);\n        this._initAppointmentTemplate();\n        this.repaint();\n        break;\n      case \"adaptivityEnabled\":\n        this._toggleAdaptiveClass();\n        this.repaint();\n        break;\n      case \"scrolling\":\n        this.option(\"crossScrollingEnabled\", this._isHorizontalVirtualScrolling() || this.option(\"crossScrollingEnabled\"));\n        this._updateOption(\"workSpace\", args.fullName, value);\n        break;\n      case \"allDayPanelMode\":\n        this._updateOption(\"workSpace\", args.fullName, value);\n        break;\n      case \"renovateRender\":\n        this._updateOption(\"workSpace\", name, value);\n        break;\n      case \"_draggingMode\":\n        this._workSpace.option(\"draggingMode\", value);\n        break;\n      case \"toolbar\":\n        this._header ? this._header.option(\"items\", value) : this.repaint();\n        break;\n      case \"loadedResources\":\n      case \"resourceLoaderMap\":\n        break;\n      default:\n        super._optionChanged(args);\n    }\n  }\n  _dateOption(optionName) {\n    var optionValue = this._getCurrentViewOption(optionName);\n    return dateSerialization.deserializeDate(optionValue);\n  }\n  _getSerializationFormat(optionName) {\n    var value = this._getCurrentViewOption(optionName);\n    if (\"number\" === typeof value) {\n      return \"number\";\n    }\n    if (!isString(value)) {\n      return;\n    }\n    return dateSerialization.getDateSerializationFormat(value);\n  }\n  _bringEditingModeToAppointments(editing) {\n    var editingConfig = {\n      allowDelete: editing.allowUpdating && editing.allowDeleting\n    };\n    if (!this._isAgenda()) {\n      editingConfig.allowDrag = editing.allowDragging;\n      editingConfig.allowResize = editing.allowResizing;\n      editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing();\n    }\n    this._appointments.option(editingConfig);\n    this.repaint();\n  }\n  _isAgenda() {\n    return \"agenda\" === this.getLayoutManager().appointmentRenderingStrategyName;\n  }\n  _allowDragging() {\n    return this._editing.allowDragging && !this._isAgenda();\n  }\n  _allowResizing() {\n    return this._editing.allowResizing && !this._isAgenda();\n  }\n  _allowAllDayResizing() {\n    return this._editing.allowResizing && this._supportAllDayResizing();\n  }\n  _supportAllDayResizing() {\n    return \"day\" !== this.currentViewType || this.currentView.intervalCount > 1;\n  }\n  _isAllDayExpanded() {\n    return this.option(\"showAllDayPanel\") && this.appointmentDataProvider.hasAllDayAppointments(this.filteredItems, this.preparedItems);\n  }\n  _getTimezoneOffsetByOption(date) {\n    return timeZoneUtils.calculateTimezoneByValue(this.option(\"timeZone\"), date);\n  }\n  _filterAppointmentsByDate() {\n    var dateRange = this._workSpace.getDateRange();\n    var startDate = this.timeZoneCalculator.createDate(dateRange[0], {\n      path: \"fromGrid\"\n    });\n    var endDate = this.timeZoneCalculator.createDate(dateRange[1], {\n      path: \"fromGrid\"\n    });\n    this.appointmentDataProvider.filterByDate(startDate, endDate, this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"));\n  }\n  _reloadDataSource() {\n    var result = new Deferred();\n    if (this._dataSource) {\n      this._dataSource.load().done(function () {\n        hideLoading();\n        this._fireContentReadyAction(result);\n      }.bind(this)).fail(function () {\n        hideLoading();\n        result.reject();\n      });\n      this._dataSource.isLoading() && showLoading({\n        container: this.$element(),\n        position: {\n          of: this.$element()\n        }\n      });\n    } else {\n      this._fireContentReadyAction(result);\n    }\n    return result.promise();\n  }\n  _fireContentReadyAction(result) {\n    var contentReadyBase = super._fireContentReadyAction.bind(this);\n    var fireContentReady = () => {\n      contentReadyBase();\n      null === result || void 0 === result ? void 0 : result.resolve();\n    };\n    if (this._workSpaceRecalculation) {\n      var _this$_workSpaceRecal;\n      null === (_this$_workSpaceRecal = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal ? void 0 : _this$_workSpaceRecal.done(() => {\n        fireContentReady();\n      });\n    } else {\n      fireContentReady();\n    }\n  }\n  _dimensionChanged(value) {\n    var isForce = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : false;\n    var isFixedHeight = \"number\" === typeof this.option(\"height\");\n    var isFixedWidth = \"number\" === typeof this.option(\"width\");\n    if (!this._isVisible()) {\n      return;\n    }\n    this._toggleSmallClass();\n    var workspace = this.getWorkSpace();\n    if (!this._isAgenda() && this.filteredItems && workspace) {\n      if (isForce || !isFixedHeight || !isFixedWidth) {\n        workspace.option(\"allDayExpanded\", this._isAllDayExpanded());\n        workspace._dimensionChanged();\n        var appointments = this.getLayoutManager().createAppointmentsMap(this.filteredItems);\n        this._appointments.option(\"items\", appointments);\n      }\n    }\n    this.hideAppointmentTooltip();\n    this._appointmentPopup.triggerResize();\n    this._appointmentPopup.updatePopupFullScreenMode();\n  }\n  _clean() {\n    this._cleanPopup();\n    super._clean();\n  }\n  _toggleSmallClass() {\n    var width = getBoundingRect(this.$element().get(0)).width;\n    this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH);\n  }\n  _toggleAdaptiveClass() {\n    this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"));\n  }\n  _visibilityChanged(visible) {\n    visible && this._dimensionChanged(null, true);\n  }\n  _dataSourceOptions() {\n    return {\n      paginate: false\n    };\n  }\n  _initAllDayPanel() {\n    if (\"hidden\" === this.option(\"allDayPanelMode\")) {\n      this.option(\"showAllDayPanel\", false);\n    }\n  }\n  _init() {\n    this._initExpressions({\n      startDate: this.option(\"startDateExpr\"),\n      endDate: this.option(\"endDateExpr\"),\n      startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\n      endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\n      allDay: this.option(\"allDayExpr\"),\n      text: this.option(\"textExpr\"),\n      description: this.option(\"descriptionExpr\"),\n      recurrenceRule: this.option(\"recurrenceRuleExpr\"),\n      recurrenceException: this.option(\"recurrenceExceptionExpr\"),\n      disabled: this.option(\"disabledExpr\")\n    });\n    super._init();\n    this._initAllDayPanel();\n    this._initDataSource();\n    this._customizeDataSourceLoadOptions();\n    this.$element().addClass(WIDGET_CLASS);\n    this._initEditing();\n    this.updateInstances();\n    this._initActions();\n    this._compactAppointmentsHelper = new CompactAppointmentsHelper(this);\n    this._asyncTemplatesTimers = [];\n    this._dataSourceLoadedCallback = Callbacks();\n    this._subscribes = subscribes;\n    this.agendaResourceProcessor = new AgendaResourceProcessor(this.option(\"resources\"));\n  }\n  createAppointmentDataProvider() {\n    var _this$appointmentData;\n    null === (_this$appointmentData = this.appointmentDataProvider) || void 0 === _this$appointmentData ? void 0 : _this$appointmentData.destroy();\n    this.appointmentDataProvider = new AppointmentDataProvider({\n      dataSource: this._dataSource,\n      dataAccessors: this._dataAccessors,\n      timeZoneCalculator: this.timeZoneCalculator,\n      dateSerializationFormat: this.option(\"dateSerializationFormat\"),\n      resources: this.option(\"resources\"),\n      startDayHour: this._getCurrentViewOption(\"startDayHour\"),\n      endDayHour: this._getCurrentViewOption(\"endDayHour\"),\n      appointmentDuration: this._getCurrentViewOption(\"cellDuration\"),\n      allDayPanelMode: this._getCurrentViewOption(\"allDayPanelMode\"),\n      showAllDayPanel: this.option(\"showAllDayPanel\"),\n      getLoadedResources: () => this.option(\"loadedResources\"),\n      getIsVirtualScrolling: () => this.isVirtualScrolling(),\n      getSupportAllDayRow: () => this._workSpace.supportAllDayRow(),\n      getViewType: () => this._workSpace.type,\n      getViewDirection: () => this._workSpace.viewDirection,\n      getDateRange: () => this._workSpace.getDateRange(),\n      getGroupCount: () => this._workSpace._getGroupCount(),\n      getViewDataProvider: () => this._workSpace.viewDataProvider\n    });\n  }\n  updateInstances() {\n    this._timeZoneCalculator = null;\n    if (this.getWorkSpace()) {\n      this.createAppointmentDataProvider();\n    }\n  }\n  _customizeDataSourceLoadOptions() {\n    var _this$_dataSource;\n    null === (_this$_dataSource = this._dataSource) || void 0 === _this$_dataSource ? void 0 : _this$_dataSource.on(\"customizeStoreLoadOptions\", _ref => {\n      var {\n        storeLoadOptions: storeLoadOptions\n      } = _ref;\n      storeLoadOptions.startDate = this.getStartViewDate();\n      storeLoadOptions.endDate = this.getEndViewDate();\n    });\n  }\n  _initTemplates() {\n    this._initAppointmentTemplate();\n    this._templateManager.addDefaultTemplates({\n      appointmentTooltip: new EmptyTemplate(),\n      dropDownAppointment: new EmptyTemplate()\n    });\n    super._initTemplates();\n  }\n  _initAppointmentTemplate() {\n    var {\n      expr: expr\n    } = this._dataAccessors;\n    var createGetter = property => compileGetter(\"appointmentData.\".concat(property));\n    var getDate = getter => data => {\n      var value = getter(data);\n      if (value instanceof Date) {\n        return value.valueOf();\n      }\n      return value;\n    };\n    this._templateManager.addDefaultTemplates({\n      item: new BindableTemplate(($container, data, model) => this.getAppointmentsInstance()._renderAppointmentTemplate($container, data, model), [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\n        text: createGetter(expr.textExpr),\n        startDate: getDate(createGetter(expr.startDateExpr)),\n        endDate: getDate(createGetter(expr.endDateExpr)),\n        startDateTimeZone: createGetter(expr.startDateTimeZoneExpr),\n        endDateTimeZone: createGetter(expr.endDateTimeZoneExpr),\n        allDay: createGetter(expr.allDayExpr),\n        recurrenceRule: createGetter(expr.recurrenceRuleExpr)\n      })\n    });\n  }\n  _renderContent() {\n    this._renderContentImpl();\n  }\n  _updatePreparedItems(items) {\n    this.preparedItems = getPreparedDataItems(items, this._dataAccessors, this._getCurrentViewOption(\"cellDuration\"), this.timeZoneCalculator);\n  }\n  _dataSourceChangedHandler(result) {\n    if (this._readyToRenderAppointments) {\n      this._workSpaceRecalculation.done(function () {\n        this._updatePreparedItems(result);\n        this._renderAppointments();\n        this.getWorkSpace().onDataSourceChanged(this.filteredItems);\n      }.bind(this));\n    }\n  }\n  isVirtualScrolling() {\n    var _currentViewOptions$s;\n    var workspace = this.getWorkSpace();\n    if (workspace) {\n      return workspace.isVirtualScrolling();\n    }\n    var currentViewOptions = this._getCurrentViewOptions();\n    var scrolling = this.option(\"scrolling\");\n    return \"virtual\" === (null === scrolling || void 0 === scrolling ? void 0 : scrolling.mode) || \"virtual\" === (null === currentViewOptions || void 0 === currentViewOptions ? void 0 : null === (_currentViewOptions$s = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s ? void 0 : _currentViewOptions$s.mode);\n  }\n  _filterAppointments() {\n    this.filteredItems = this.appointmentDataProvider.filter(this.preparedItems);\n  }\n  _renderAppointments() {\n    var workspace = this.getWorkSpace();\n    this._filterAppointments();\n    workspace.option(\"allDayExpanded\", this._isAllDayExpanded());\n    var viewModel = [];\n    if (this._isVisible()) {\n      viewModel = this._getAppointmentsToRepaint();\n    }\n    if (this.option(\"isRenovatedAppointments\")) {\n      renderAppointments({\n        instance: this,\n        $dateTable: this.getWorkSpace()._getDateTable(),\n        viewModel: viewModel\n      });\n    } else {\n      this._appointments.option(\"items\", viewModel);\n    }\n    this.appointmentDataProvider.cleanState();\n  }\n  _getAppointmentsToRepaint() {\n    var layoutManager = this.getLayoutManager();\n    var appointmentsMap = layoutManager.createAppointmentsMap(this.filteredItems);\n    if (this.option(\"isRenovatedAppointments\")) {\n      var appointmentTemplate = this.option(\"appointmentTemplate\") !== DEFAULT_APPOINTMENT_TEMPLATE_NAME ? this.option(\"appointmentTemplate\") : void 0;\n      return {\n        appointments: appointmentsMap,\n        appointmentTemplate: appointmentTemplate\n      };\n    }\n    return layoutManager.getRepaintedAppointments(appointmentsMap, this.getAppointmentsInstance().option(\"items\"));\n  }\n  _initExpressions(fields) {\n    this._dataAccessors = utils.dataAccessors.create(fields, this._dataAccessors, config().forceIsoDateParsing, this.option(\"dateSerializationFormat\"));\n    this._dataAccessors.resources = createExpressions(this.option(\"resources\"));\n  }\n  _updateExpression(name, value) {\n    var exprObj = {};\n    exprObj[name.replace(\"Expr\", \"\")] = value;\n    this._initExpressions(exprObj);\n  }\n  getResourceDataAccessors() {\n    return this._dataAccessors.resources;\n  }\n  _initEditing() {\n    var editing = this.option(\"editing\");\n    this._editing = {\n      allowAdding: !!editing,\n      allowUpdating: !!editing,\n      allowDeleting: !!editing,\n      allowResizing: !!editing,\n      allowDragging: !!editing\n    };\n    if (isObject(editing)) {\n      this._editing = extend(this._editing, editing);\n    }\n    this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\n    this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\n    this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly());\n  }\n  _isReadOnly() {\n    var result = true;\n    var editing = this._editing;\n    for (var prop in editing) {\n      if (Object.prototype.hasOwnProperty.call(editing, prop)) {\n        result = result && !editing[prop];\n      }\n    }\n    return result;\n  }\n  _dispose() {\n    var _this$_recurrenceDial;\n    this._appointmentTooltip && this._appointmentTooltip.dispose();\n    null === (_this$_recurrenceDial = this._recurrenceDialog) || void 0 === _this$_recurrenceDial ? void 0 : _this$_recurrenceDial.hide(RECURRENCE_EDITING_MODE.CANCEL);\n    this.hideAppointmentPopup();\n    this.hideAppointmentTooltip();\n    this._asyncTemplatesTimers.forEach(clearTimeout);\n    this._asyncTemplatesTimers = [];\n    super._dispose();\n  }\n  _initActions() {\n    this._actions = {\n      onAppointmentAdding: this._createActionByOption(StoreEventNames.ADDING),\n      onAppointmentAdded: this._createActionByOption(StoreEventNames.ADDED),\n      onAppointmentUpdating: this._createActionByOption(StoreEventNames.UPDATING),\n      onAppointmentUpdated: this._createActionByOption(StoreEventNames.UPDATED),\n      onAppointmentDeleting: this._createActionByOption(StoreEventNames.DELETING),\n      onAppointmentDeleted: this._createActionByOption(StoreEventNames.DELETED),\n      onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\"),\n      onAppointmentTooltipShowing: this._createActionByOption(\"onAppointmentTooltipShowing\")\n    };\n  }\n  _getAppointmentRenderedAction() {\n    return this._createActionByOption(\"onAppointmentRendered\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  }\n  _renderFocusTarget() {\n    return noop();\n  }\n  _initMarkup() {\n    super._initMarkup();\n    this._validateDayHours();\n    this._validateCellDuration();\n    this._renderMainContainer();\n    this._renderHeader();\n    this._layoutManager = new AppointmentLayoutManager(this);\n    this._appointments = this._createComponent(\"<div>\", AppointmentCollection, this._appointmentsConfig());\n    this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\n    this._appointmentTooltip = new (this.option(\"adaptivityEnabled\") ? MobileTooltipStrategy : DesktopTooltipStrategy)(this._getAppointmentTooltipOptions());\n    this._createAppointmentPopupForm();\n    if (this._isDataSourceLoaded() || this._isDataSourceLoading()) {\n      this._initMarkupCore(this.option(\"loadedResources\"));\n      this._dataSourceChangedHandler(this._dataSource.items());\n      this._fireContentReadyAction();\n    } else {\n      var groups = this._getCurrentViewOption(\"groups\");\n      loadResources(groups, this.option(\"resources\"), this.option(\"resourceLoaderMap\")).done(resources => {\n        this.option(\"loadedResources\", resources);\n        this._initMarkupCore(resources);\n        this._reloadDataSource();\n      });\n    }\n  }\n  _createAppointmentPopupForm() {\n    var _this$_appointmentPop;\n    if (this._appointmentForm) {\n      var _this$_appointmentFor;\n      null === (_this$_appointmentFor = this._appointmentForm.form) || void 0 === _this$_appointmentFor ? void 0 : _this$_appointmentFor.dispose();\n    }\n    this._appointmentForm = this.createAppointmentForm();\n    null === (_this$_appointmentPop = this._appointmentPopup) || void 0 === _this$_appointmentPop ? void 0 : _this$_appointmentPop.dispose();\n    this._appointmentPopup = this.createAppointmentPopup(this._appointmentForm);\n  }\n  _renderMainContainer() {\n    this._mainContainer = $(\"<div>\").addClass(\"dx-scheduler-container\");\n    this.$element().append(this._mainContainer);\n  }\n  createAppointmentForm() {\n    var scheduler = {\n      createResourceEditorModel: () => _createResourceEditorModel(this.option(\"resources\"), this.option(\"loadedResources\")),\n      getDataAccessors: () => this._dataAccessors,\n      createComponent: (element, component, options) => this._createComponent(element, component, options),\n      getEditingConfig: () => this._editing,\n      getFirstDayOfWeek: () => this.option(\"firstDayOfWeek\"),\n      getStartDayHour: () => this.option(\"startDayHour\"),\n      getCalculatedEndDate: startDateWithStartHour => this._workSpace.calculateEndDate(startDateWithStartHour),\n      getTimeZoneCalculator: () => this.timeZoneCalculator\n    };\n    return new AppointmentForm(scheduler);\n  }\n  createAppointmentPopup(form) {\n    var scheduler = {\n      getElement: () => this.$element(),\n      createComponent: (element, component, options) => this._createComponent(element, component, options),\n      focus: () => this.focus(),\n      getResources: () => this.option(\"resources\"),\n      getEditingConfig: () => this._editing,\n      getTimeZoneCalculator: () => this.timeZoneCalculator,\n      getDataAccessors: () => this._dataAccessors,\n      getAppointmentFormOpening: () => this._actions.onAppointmentFormOpening,\n      processActionResult: (arg, canceled) => this._processActionResult(arg, canceled),\n      addAppointment: appointment => this.addAppointment(appointment),\n      updateAppointment: (sourceAppointment, updatedAppointment) => this.updateAppointment(sourceAppointment, updatedAppointment),\n      updateScrollPosition: (startDate, resourceItem, inAllDayRow) => {\n        this._workSpace.updateScrollPosition(startDate, resourceItem, inAllDayRow);\n      }\n    };\n    return new AppointmentPopup(scheduler, form);\n  }\n  _getAppointmentTooltipOptions() {\n    return {\n      createComponent: this._createComponent.bind(this),\n      container: this.$element(),\n      getScrollableContainer: this.getWorkSpaceScrollableContainer.bind(this),\n      addDefaultTemplates: this._templateManager.addDefaultTemplates.bind(this._templateManager),\n      getAppointmentTemplate: this._getAppointmentTemplate.bind(this),\n      showAppointmentPopup: this.showAppointmentPopup.bind(this),\n      checkAndDeleteAppointment: this.checkAndDeleteAppointment.bind(this),\n      isAppointmentInAllDayPanel: this.isAppointmentInAllDayPanel.bind(this),\n      createFormattedDateText: (appointment, targetedAppointment, format) => this.fire(\"getTextAndFormatDate\", appointment, targetedAppointment, format),\n      getAppointmentDisabled: appointment => createAppointmentAdapter(appointment, this._dataAccessors, this.timeZoneCalculator).disabled\n    };\n  }\n  checkAndDeleteAppointment(appointment, targetedAppointment) {\n    var targetedAdapter = createAppointmentAdapter(targetedAppointment, this._dataAccessors, this.timeZoneCalculator);\n    var deletingOptions = this.fireOnAppointmentDeleting(appointment, targetedAdapter);\n    this._checkRecurringAppointment(appointment, targetedAppointment, targetedAdapter.startDate, () => {\n      this.processDeleteAppointment(appointment, deletingOptions);\n    }, true);\n  }\n  _getExtraAppointmentTooltipOptions() {\n    return {\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      editing: this.option(\"editing\"),\n      offset: this.option(\"_appointmentTooltipOffset\")\n    };\n  }\n  isAppointmentInAllDayPanel(appointmentData) {\n    var workSpace = this._workSpace;\n    var itTakesAllDay = this.appointmentTakesAllDay(appointmentData);\n    return itTakesAllDay && workSpace.supportAllDayRow() && workSpace.option(\"showAllDayPanel\");\n  }\n  _initMarkupCore(resources) {\n    this._readyToRenderAppointments = hasWindow();\n    this._workSpace && this._cleanWorkspace();\n    this._renderWorkSpace(resources);\n    this._appointments.option({\n      fixedContainer: this._workSpace.getFixedContainer(),\n      allDayContainer: this._workSpace.getAllDayContainer()\n    });\n    this._waitAsyncTemplate(() => {\n      var _this$_workSpaceRecal2;\n      return null === (_this$_workSpaceRecal2 = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal2 ? void 0 : _this$_workSpaceRecal2.resolve();\n    });\n    this.createAppointmentDataProvider();\n    this._filterAppointmentsByDate();\n    this._validateKeyFieldIfAgendaExist();\n  }\n  _isDataSourceLoaded() {\n    return this._dataSource && this._dataSource.isLoaded();\n  }\n  _render() {\n    var _this$getWorkSpace;\n    this._toggleSmallClass();\n    this._toggleAdaptiveClass();\n    null === (_this$getWorkSpace = this.getWorkSpace()) || void 0 === _this$getWorkSpace ? void 0 : _this$getWorkSpace.updateHeaderEmptyCellWidth();\n    super._render();\n  }\n  _renderHeader() {\n    if (0 !== this.option(\"toolbar\").length) {\n      var $header = $(\"<div>\").appendTo(this._mainContainer);\n      this._header = this._createComponent($header, SchedulerHeader, this._headerConfig());\n    }\n  }\n  _headerConfig() {\n    var currentViewOptions = this._getCurrentViewOptions();\n    var countConfig = this._getViewCountConfig();\n    var result = extend({\n      firstDayOfWeek: this.getFirstDayOfWeek(),\n      currentView: this.option(\"currentView\"),\n      isAdaptive: this.option(\"adaptivityEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\n      customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\"),\n      agendaDuration: currentViewOptions.agendaDuration || DEFAULT_AGENDA_DURATION\n    }, currentViewOptions);\n    result.intervalCount = countConfig.intervalCount;\n    result.views = this.option(\"views\");\n    result.min = new Date(this._dateOption(\"min\"));\n    result.max = new Date(this._dateOption(\"max\"));\n    result.currentDate = dateUtils.trimTime(new Date(this._dateOption(\"currentDate\")));\n    result.onCurrentViewChange = name => {\n      this.option(\"currentView\", name);\n    }, result.onCurrentDateChange = date => {\n      this.option(\"currentDate\", date);\n    };\n    result.items = this.option(\"toolbar\");\n    result.startViewDate = this.getStartViewDate();\n    result.todayDate = () => {\n      var result = this.timeZoneCalculator.createDate(new Date(), {\n        path: \"toGrid\"\n      });\n      return result;\n    };\n    return result;\n  }\n  _appointmentsConfig() {\n    var config = {\n      getResources: () => this.option(\"resources\"),\n      getResourceDataAccessors: this.getResourceDataAccessors.bind(this),\n      getAgendaResourceProcessor: () => this.agendaResourceProcessor,\n      getAppointmentColor: this.createGetAppointmentColor(),\n      getAppointmentDataProvider: () => this.appointmentDataProvider,\n      dataAccessors: this._dataAccessors,\n      observer: this,\n      onItemRendered: this._getAppointmentRenderedAction(),\n      onItemClick: this._createActionByOption(\"onAppointmentClick\"),\n      onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\n      onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\n      tabIndex: this.option(\"tabIndex\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      allowDrag: this._allowDragging(),\n      allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\n      allowResize: this._allowResizing(),\n      allowAllDayResize: this._allowAllDayResizing(),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      currentView: this.currentView,\n      groups: this._getCurrentViewOption(\"groups\"),\n      isRenovatedAppointments: this.option(\"isRenovatedAppointments\"),\n      timeZoneCalculator: this.timeZoneCalculator,\n      getResizableStep: () => this._workSpace ? this._workSpace.positionHelper.getResizableStep() : 0,\n      getDOMElementsMetaData: () => {\n        var _this$_workSpace;\n        return null === (_this$_workSpace = this._workSpace) || void 0 === _this$_workSpace ? void 0 : _this$_workSpace.getDOMElementsMetaData();\n      },\n      getViewDataProvider: () => {\n        var _this$_workSpace2;\n        return null === (_this$_workSpace2 = this._workSpace) || void 0 === _this$_workSpace2 ? void 0 : _this$_workSpace2.viewDataProvider;\n      },\n      isVerticalViewDirection: () => \"vertical\" === this.getRenderingStrategyInstance().getDirection(),\n      isVerticalGroupedWorkSpace: () => this._workSpace._isVerticalGroupedWorkSpace(),\n      isDateAndTimeView: () => _isDateAndTimeView(this._workSpace.type),\n      onContentReady: () => {\n        var _this$_workSpace3;\n        null === (_this$_workSpace3 = this._workSpace) || void 0 === _this$_workSpace3 ? void 0 : _this$_workSpace3.option(\"allDayExpanded\", this._isAllDayExpanded());\n      }\n    };\n    return config;\n  }\n  getCollectorOffset() {\n    if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\n      return this.option(\"_collectorOffset\");\n    } else {\n      return 0;\n    }\n  }\n  getAppointmentDurationInMinutes() {\n    return this._getCurrentViewOption(\"cellDuration\");\n  }\n  _getCurrentViewType() {\n    return this.currentViewType;\n  }\n  _renderWorkSpace(groups) {\n    var _this$_header6;\n    this._readyToRenderAppointments && this._toggleSmallClass();\n    var $workSpace = $(\"<div>\").appendTo(this._mainContainer);\n    var countConfig = this._getViewCountConfig();\n    var workSpaceComponent = VIEWS_CONFIG[this._getCurrentViewType()].workSpace;\n    var workSpaceConfig = this._workSpaceConfig(groups, countConfig);\n    this._workSpace = this._createComponent($workSpace, workSpaceComponent, workSpaceConfig);\n    this._allowDragging() && this._workSpace.initDragBehavior(this, this._all);\n    this._workSpace._attachTablesEvents();\n    this._workSpace.getWorkArea().append(this._appointments.$element());\n    this._recalculateWorkspace();\n    countConfig.startDate && (null === (_this$_header6 = this._header) || void 0 === _this$_header6 ? void 0 : _this$_header6.option(\"currentDate\", this._workSpace._getHeaderDate()));\n    this._appointments.option(\"_collectorOffset\", this.getCollectorOffset());\n  }\n  _getViewCountConfig() {\n    var currentView = this.option(\"currentView\");\n    var view = this._getViewByName(currentView);\n    var viewCount = view && view.intervalCount || 1;\n    var startDate = view && view.startDate || null;\n    return {\n      intervalCount: viewCount,\n      startDate: startDate\n    };\n  }\n  _getViewByName(name) {\n    var views = this.option(\"views\");\n    for (var i = 0; i < views.length; i++) {\n      if (views[i].name === name || views[i].type === name || views[i] === name) {\n        return views[i];\n      }\n    }\n  }\n  _recalculateWorkspace() {\n    this._workSpaceRecalculation = new Deferred();\n    this._waitAsyncTemplate(() => {\n      triggerResizeEvent(this._workSpace.$element());\n      this._workSpace._refreshDateTimeIndication();\n    });\n  }\n  _workSpaceConfig(groups, countConfig) {\n    var _currentViewOptions$s2;\n    var currentViewOptions = this._getCurrentViewOptions();\n    var scrolling = this.option(\"scrolling\");\n    var isVirtualScrolling = \"virtual\" === scrolling.mode || \"virtual\" === (null === (_currentViewOptions$s2 = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s2 ? void 0 : _currentViewOptions$s2.mode);\n    var horizontalVirtualScrollingAllowed = isVirtualScrolling && (!isDefined(scrolling.orientation) || [\"horizontal\", \"both\"].filter(item => {\n      var _currentViewOptions$s3;\n      return scrolling.orientation === item || (null === (_currentViewOptions$s3 = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s3 ? void 0 : _currentViewOptions$s3.orientation) === item;\n    }).length > 0);\n    var crossScrollingEnabled = this.option(\"crossScrollingEnabled\") || horizontalVirtualScrollingAllowed || isTimelineView(this.currentViewType);\n    var result = extend({\n      resources: this.option(\"resources\"),\n      loadedResources: this.option(\"loadedResources\"),\n      getFilteredItems: () => this.filteredItems,\n      getResourceDataAccessors: this.getResourceDataAccessors.bind(this),\n      noDataText: this.option(\"noDataText\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      startDayHour: this.option(\"startDayHour\"),\n      endDayHour: this.option(\"endDayHour\"),\n      tabIndex: this.option(\"tabIndex\"),\n      accessKey: this.option(\"accessKey\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      cellDuration: this.option(\"cellDuration\"),\n      showAllDayPanel: this.option(\"showAllDayPanel\"),\n      showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\n      indicatorTime: this.option(\"indicatorTime\"),\n      indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\n      shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\n      allDayExpanded: this._appointments.option(\"items\"),\n      crossScrollingEnabled: crossScrollingEnabled,\n      dataCellTemplate: this.option(\"dataCellTemplate\"),\n      timeCellTemplate: this.option(\"timeCellTemplate\"),\n      resourceCellTemplate: this.option(\"resourceCellTemplate\"),\n      dateCellTemplate: this.option(\"dateCellTemplate\"),\n      allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\n      selectedCellData: this.option(\"selectedCellData\"),\n      onSelectionChanged: args => {\n        this.option(\"selectedCellData\", args.selectedCellData);\n      },\n      groupByDate: this._getCurrentViewOption(\"groupByDate\"),\n      scrolling: scrolling,\n      draggingMode: this.option(\"_draggingMode\"),\n      timeZoneCalculator: this.timeZoneCalculator,\n      schedulerHeight: this.option(\"height\"),\n      schedulerWidth: this.option(\"width\"),\n      allDayPanelMode: this.option(\"allDayPanelMode\"),\n      onSelectedCellsClick: this.showAddAppointmentPopup.bind(this),\n      onRenderAppointments: this._renderAppointments.bind(this),\n      onShowAllDayPanel: value => this.option(\"showAllDayPanel\", value),\n      getHeaderHeight: () => utils.DOM.getHeaderHeight(this._header),\n      onScrollEnd: () => this._appointments.updateResizableArea(),\n      renovateRender: this._isRenovatedRender(isVirtualScrolling),\n      isRenovatedAppointments: this.option(\"isRenovatedAppointments\")\n    }, currentViewOptions);\n    result.observer = this;\n    result.intervalCount = countConfig.intervalCount;\n    result.startDate = countConfig.startDate;\n    result.groups = groups;\n    result.onCellClick = this._createActionByOption(\"onCellClick\");\n    result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\n    result.currentDate = dateUtils.trimTime(new Date(this._dateOption(\"currentDate\")));\n    result.hoursInterval = result.cellDuration / 60;\n    result.allDayExpanded = false;\n    result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\n    result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\n    result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\n    result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\n    result.getAppointmentDataProvider = () => this.appointmentDataProvider;\n    return result;\n  }\n  _isRenovatedRender(isVirtualScrolling) {\n    return this.option(\"renovateRender\") && hasWindow() || isVirtualScrolling;\n  }\n  _waitAsyncTemplate(callback) {\n    if (this._options.silent(\"templatesRenderAsynchronously\")) {\n      var timer = setTimeout(() => {\n        callback();\n        clearTimeout(timer);\n      });\n      this._asyncTemplatesTimers.push(timer);\n    } else {\n      callback();\n    }\n  }\n  _getCurrentViewOptions() {\n    return this.currentView;\n  }\n  _getCurrentViewOption(optionName) {\n    if (this.currentView && void 0 !== this.currentView[optionName]) {\n      return this.currentView[optionName];\n    }\n    return this.option(optionName);\n  }\n  _getAppointmentTemplate(optionName) {\n    var currentViewOptions = this._getCurrentViewOptions();\n    if (currentViewOptions && currentViewOptions[optionName]) {\n      return this._getTemplate(currentViewOptions[optionName]);\n    }\n    return this._getTemplateByOption(optionName);\n  }\n  _updateOption(viewName, optionName, value) {\n    var currentViewOptions = this._getCurrentViewOptions();\n    if (!currentViewOptions || !isDefined(currentViewOptions[optionName])) {\n      this[\"_\" + viewName].option(optionName, value);\n    }\n  }\n  _refreshWorkSpace(groups) {\n    this._cleanWorkspace();\n    delete this._workSpace;\n    this._renderWorkSpace(groups);\n    if (this._readyToRenderAppointments) {\n      this._appointments.option({\n        fixedContainer: this._workSpace.getFixedContainer(),\n        allDayContainer: this._workSpace.getAllDayContainer()\n      });\n      this._waitAsyncTemplate(() => this._workSpaceRecalculation.resolve());\n    }\n  }\n  _cleanWorkspace() {\n    this._appointments.$element().detach();\n    this._workSpace._dispose();\n    this._workSpace.$element().remove();\n    this.option(\"selectedCellData\", []);\n  }\n  getWorkSpaceScrollable() {\n    return this._workSpace.getScrollable();\n  }\n  getWorkSpaceScrollableContainer() {\n    return this._workSpace.getScrollableContainer();\n  }\n  getWorkSpace() {\n    return this._workSpace;\n  }\n  getHeader() {\n    return this._header;\n  }\n  _cleanPopup() {\n    var _this$_appointmentPop2;\n    null === (_this$_appointmentPop2 = this._appointmentPopup) || void 0 === _this$_appointmentPop2 ? void 0 : _this$_appointmentPop2.dispose();\n  }\n  _checkRecurringAppointment(rawAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing, dragEvent, recurrenceEditMode) {\n    var recurrenceRule = ExpressionUtils.getField(this._dataAccessors, \"recurrenceRule\", rawAppointment);\n    if (!getRecurrenceProcessor().evalRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\n      callback();\n      return;\n    }\n    var editMode = recurrenceEditMode || this.option(\"recurrenceEditMode\");\n    switch (editMode) {\n      case \"series\":\n        callback();\n        break;\n      case \"occurrence\":\n        this._excludeAppointmentFromSeries(rawAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\n        break;\n      default:\n        if (dragEvent) {\n          dragEvent.cancel = new Deferred();\n        }\n        this._showRecurrenceChangeConfirm(isDeleted).done(editingMode => {\n          editingMode === RECURRENCE_EDITING_MODE.SERIES && callback();\n          editingMode === RECURRENCE_EDITING_MODE.OCCURENCE && this._excludeAppointmentFromSeries(rawAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\n        }).fail(() => this._appointments.moveAppointmentBack(dragEvent));\n    }\n  }\n  _excludeAppointmentFromSeries(rawAppointment, newRawAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent) {\n    var appointment = excludeFromRecurrence(rawAppointment, exceptionDate, this._dataAccessors, this._timeZoneCalculator);\n    var singleRawAppointment = _extends({}, newRawAppointment);\n    delete singleRawAppointment[this._dataAccessors.expr.recurrenceExceptionExpr];\n    delete singleRawAppointment[this._dataAccessors.expr.recurrenceRuleExpr];\n    var keyPropertyName = this.appointmentDataProvider.keyName;\n    delete singleRawAppointment[keyPropertyName];\n    var canCreateNewAppointment = !isDeleted && !isPopupEditing;\n    if (canCreateNewAppointment) {\n      this.addAppointment(singleRawAppointment);\n    }\n    if (isPopupEditing) {\n      this._appointmentPopup.show(singleRawAppointment, {\n        isToolbarVisible: true,\n        action: ACTION_TO_APPOINTMENT.EXCLUDE_FROM_SERIES,\n        excludeInfo: {\n          sourceAppointment: rawAppointment,\n          updatedAppointment: appointment.source()\n        }\n      });\n      this._editAppointmentData = rawAppointment;\n    } else {\n      this._updateAppointment(rawAppointment, appointment.source(), () => {\n        this._appointments.moveAppointmentBack(dragEvent);\n      }, dragEvent);\n    }\n  }\n  _createRecurrenceException(appointment, exceptionDate) {\n    var result = [];\n    if (appointment.recurrenceException) {\n      result.push(appointment.recurrenceException);\n    }\n    result.push(this._getSerializedDate(exceptionDate, appointment.startDate, appointment.allDay));\n    return result.join();\n  }\n  _getSerializedDate(date, startDate, isAllDay) {\n    isAllDay && date.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds(), startDate.getMilliseconds());\n    return dateSerialization.serializeDate(date, UTC_FULL_DATE_FORMAT);\n  }\n  _showRecurrenceChangeConfirm(isDeleted) {\n    var message = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\n    var seriesText = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\n    var occurrenceText = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\n    this._recurrenceDialog = customDialog({\n      messageHtml: message,\n      showCloseButton: true,\n      showTitle: true,\n      buttons: [{\n        text: seriesText,\n        onClick: function () {\n          return RECURRENCE_EDITING_MODE.SERIES;\n        }\n      }, {\n        text: occurrenceText,\n        onClick: function () {\n          return RECURRENCE_EDITING_MODE.OCCURENCE;\n        }\n      }],\n      popupOptions: {\n        wrapperAttr: {\n          class: \"dx-dialog\"\n        }\n      }\n    });\n    return this._recurrenceDialog.show();\n  }\n  _getUpdatedData(rawAppointment) {\n    var getConvertedFromGrid = date => date ? this.timeZoneCalculator.createDate(date, {\n      path: \"fromGrid\"\n    }) : void 0;\n    var isValidDate = date => !isNaN(new Date(date).getTime());\n    var targetCell = this.getTargetCellData();\n    var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\n    var cellStartDate = getConvertedFromGrid(targetCell.startDate);\n    var cellEndDate = getConvertedFromGrid(targetCell.endDate);\n    var appointmentStartDate = new Date(appointment.startDate);\n    var appointmentEndDate = new Date(appointment.endDate);\n    var resultedStartDate = cellStartDate || appointmentStartDate;\n    if (!isValidDate(appointmentStartDate)) {\n      appointmentStartDate = resultedStartDate;\n    }\n    if (!isValidDate(appointmentEndDate)) {\n      appointmentEndDate = cellEndDate;\n    }\n    var duration = appointmentEndDate.getTime() - appointmentStartDate.getTime();\n    var isKeepAppointmentHours = this._workSpace.keepOriginalHours() && isValidDate(appointment.startDate) && isValidDate(cellStartDate);\n    if (isKeepAppointmentHours) {\n      var {\n        trimTime: trimTime\n      } = dateUtils;\n      var startDate = this.timeZoneCalculator.createDate(appointment.startDate, {\n        path: \"toGrid\"\n      });\n      var timeInMs = startDate.getTime() - trimTime(startDate).getTime();\n      resultedStartDate = new Date(trimTime(targetCell.startDate).getTime() + timeInMs);\n      resultedStartDate = this.timeZoneCalculator.createDate(resultedStartDate, {\n        path: \"fromGrid\"\n      });\n    }\n    var result = createAppointmentAdapter({}, this._dataAccessors, this.timeZoneCalculator);\n    if (void 0 !== targetCell.allDay) {\n      result.allDay = targetCell.allDay;\n    }\n    result.startDate = resultedStartDate;\n    var resultedEndDate = new Date(resultedStartDate.getTime() + duration);\n    if (this.appointmentTakesAllDay(rawAppointment) && !result.allDay && this._workSpace.supportAllDayRow()) {\n      resultedEndDate = this._workSpace.calculateEndDate(resultedStartDate);\n    }\n    if (appointment.allDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\n      var dateCopy = new Date(resultedStartDate);\n      dateCopy.setHours(0);\n      resultedEndDate = new Date(dateCopy.getTime() + duration);\n      if (0 !== resultedEndDate.getHours()) {\n        resultedEndDate.setHours(this._getCurrentViewOption(\"endDayHour\"));\n      }\n    }\n    var timeZoneOffset = timeZoneUtils.getTimezoneOffsetChangeInMs(appointmentStartDate, appointmentEndDate, resultedStartDate, resultedEndDate);\n    result.endDate = new Date(resultedEndDate.getTime() - timeZoneOffset);\n    var rawResult = result.source();\n    setResourceToAppointment(this.option(\"resources\"), this.getResourceDataAccessors(), rawResult, targetCell.groups);\n    return rawResult;\n  }\n  getTargetedAppointment(appointment, element) {\n    var settings = utils.dataAccessors.getAppointmentSettings(element);\n    var info = utils.dataAccessors.getAppointmentInfo(element);\n    var appointmentIndex = $(element).data(this._appointments._itemIndexKey());\n    var adapter = createAppointmentAdapter(appointment, this._dataAccessors, this.timeZoneCalculator);\n    var targetedAdapter = adapter.clone();\n    if (this._isAgenda() && adapter.isRecurrent) {\n      var agendaSettings = settings.agendaSettings;\n      targetedAdapter.startDate = ExpressionUtils.getField(this._dataAccessors, \"startDate\", agendaSettings);\n      targetedAdapter.endDate = ExpressionUtils.getField(this._dataAccessors, \"endDate\", agendaSettings);\n    } else if (settings) {\n      targetedAdapter.startDate = info ? info.sourceAppointment.startDate : adapter.startDate;\n      targetedAdapter.endDate = info ? info.sourceAppointment.endDate : adapter.endDate;\n    }\n    var rawTargetedAppointment = targetedAdapter.source();\n    if (element) {\n      this.setTargetedAppointmentResources(rawTargetedAppointment, element, appointmentIndex);\n    }\n    if (info) {\n      rawTargetedAppointment.displayStartDate = new Date(info.appointment.startDate);\n      rawTargetedAppointment.displayEndDate = new Date(info.appointment.endDate);\n    }\n    return rawTargetedAppointment;\n  }\n  subscribe(subject, action) {\n    this._subscribes[subject] = subscribes[subject] = action;\n  }\n  fire(subject) {\n    var callback = this._subscribes[subject];\n    var args = Array.prototype.slice.call(arguments);\n    if (!isFunction(callback)) {\n      throw errors.Error(\"E1031\", subject);\n    }\n    return callback.apply(this, args.slice(1));\n  }\n  getTargetCellData() {\n    return this._workSpace.getDataByDroppableCell();\n  }\n  _updateAppointment(target, rawAppointment, onUpdatePrevented, dragEvent) {\n    var updatingOptions = {\n      newData: rawAppointment,\n      oldData: extend({}, target),\n      cancel: false\n    };\n    var performFailAction = function (err) {\n      if (onUpdatePrevented) {\n        onUpdatePrevented.call(this);\n      }\n      if (err && \"Error\" === err.name) {\n        throw err;\n      }\n    }.bind(this);\n    this._actions[StoreEventNames.UPDATING](updatingOptions);\n    if (dragEvent && !isDeferred(dragEvent.cancel)) {\n      dragEvent.cancel = new Deferred();\n    }\n    return this._processActionResult(updatingOptions, function (canceled) {\n      var deferred = new Deferred();\n      if (!canceled) {\n        this._expandAllDayPanel(rawAppointment);\n        try {\n          deferred = this.appointmentDataProvider.update(target, rawAppointment).done(() => {\n            dragEvent && dragEvent.cancel.resolve(false);\n          }).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.UPDATED, storeAppointment)).fail(() => performFailAction());\n        } catch (err) {\n          performFailAction(err);\n          deferred.resolve();\n        }\n      } else {\n        performFailAction();\n        deferred.resolve();\n      }\n      return deferred.promise();\n    });\n  }\n  _processActionResult(actionOptions, callback) {\n    var deferred = new Deferred();\n    var resolveCallback = callbackResult => {\n      when(fromPromise(callbackResult)).always(deferred.resolve);\n    };\n    if (isPromise(actionOptions.cancel)) {\n      when(fromPromise(actionOptions.cancel)).always(cancel => {\n        if (!isDefined(cancel)) {\n          cancel = \"rejected\" === actionOptions.cancel.state();\n        }\n        resolveCallback(callback.call(this, cancel));\n      });\n    } else {\n      resolveCallback(callback.call(this, actionOptions.cancel));\n    }\n    return deferred.promise();\n  }\n  _expandAllDayPanel(appointment) {\n    if (!this._isAllDayExpanded() && this.appointmentTakesAllDay(appointment)) {\n      this._workSpace.option(\"allDayExpanded\", true);\n    }\n  }\n  _onDataPromiseCompleted(handlerName, storeAppointment, appointment) {\n    var args = {\n      appointmentData: appointment || storeAppointment\n    };\n    if (storeAppointment instanceof Error) {\n      args.error = storeAppointment;\n    } else {\n      this._appointmentPopup.visible && this._appointmentPopup.hide();\n    }\n    this._actions[handlerName](args);\n    this._fireContentReadyAction();\n  }\n  getAppointmentsInstance() {\n    return this._appointments;\n  }\n  getLayoutManager() {\n    return this._layoutManager;\n  }\n  getRenderingStrategyInstance() {\n    return this.getLayoutManager().getRenderingStrategyInstance();\n  }\n  getActions() {\n    return this._actions;\n  }\n  appointmentTakesAllDay(rawAppointment) {\n    var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\n    return getAppointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"), this._getCurrentViewOption(\"allDayPanelMode\"));\n  }\n  dayHasAppointment(day, rawAppointment, trimTime) {\n    var getConvertedToTimeZone = date => this.timeZoneCalculator.createDate(date, {\n      path: \"toGrid\"\n    });\n    var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\n    var startDate = new Date(appointment.startDate);\n    var endDate = new Date(appointment.endDate);\n    startDate = getConvertedToTimeZone(startDate);\n    endDate = getConvertedToTimeZone(endDate);\n    if (day.getTime() === endDate.getTime()) {\n      return startDate.getTime() === endDate.getTime();\n    }\n    if (trimTime) {\n      day = dateUtils.trimTime(day);\n      startDate = dateUtils.trimTime(startDate);\n      endDate = dateUtils.trimTime(endDate);\n    }\n    var dayTimeStamp = day.getTime();\n    var startDateTimeStamp = startDate.getTime();\n    var endDateTimeStamp = endDate.getTime();\n    return startDateTimeStamp <= dayTimeStamp && dayTimeStamp <= endDateTimeStamp;\n  }\n  setTargetedAppointmentResources(rawAppointment, element, appointmentIndex) {\n    var groups = this._getCurrentViewOption(\"groups\");\n    if (null !== groups && void 0 !== groups && groups.length) {\n      var resourcesSetter = this.getResourceDataAccessors().setter;\n      var workSpace = this._workSpace;\n      var getGroups;\n      var setResourceCallback;\n      if (this._isAgenda()) {\n        getGroups = function () {\n          var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\n          return getCellGroups(apptSettings[0].groupIndex, this.getWorkSpace().option(\"groups\"));\n        };\n        setResourceCallback = function (_, group) {\n          resourcesSetter[group.name](rawAppointment, group.id);\n        };\n      } else {\n        getGroups = function () {\n          var setting = utils.dataAccessors.getAppointmentSettings(element) || {};\n          return workSpace.getCellDataByCoordinates({\n            left: setting.left,\n            top: setting.top\n          }).groups;\n        };\n        setResourceCallback = function (field, value) {\n          resourcesSetter[field](rawAppointment, value);\n        };\n      }\n      each(getGroups.call(this), setResourceCallback);\n    }\n  }\n  getStartViewDate() {\n    var _this$_workSpace4;\n    return null === (_this$_workSpace4 = this._workSpace) || void 0 === _this$_workSpace4 ? void 0 : _this$_workSpace4.getStartViewDate();\n  }\n  getEndViewDate() {\n    return this._workSpace.getEndViewDate();\n  }\n  showAddAppointmentPopup(cellData, cellGroups) {\n    var appointmentAdapter = createAppointmentAdapter({}, this._dataAccessors, this.timeZoneCalculator);\n    appointmentAdapter.allDay = cellData.allDay;\n    appointmentAdapter.startDate = this.timeZoneCalculator.createDate(cellData.startDate, {\n      path: \"fromGrid\"\n    });\n    appointmentAdapter.endDate = this.timeZoneCalculator.createDate(cellData.endDate, {\n      path: \"fromGrid\"\n    });\n    var resultAppointment = extend(appointmentAdapter.source(), cellGroups);\n    this.showAppointmentPopup(resultAppointment, true);\n  }\n  showAppointmentPopup(rawAppointment, createNewAppointment, rawTargetedAppointment) {\n    var newRawTargetedAppointment = _extends({}, rawTargetedAppointment);\n    if (newRawTargetedAppointment) {\n      delete newRawTargetedAppointment.displayStartDate;\n      delete newRawTargetedAppointment.displayEndDate;\n    }\n    var appointment = createAppointmentAdapter(newRawTargetedAppointment || rawAppointment, this._dataAccessors, this.timeZoneCalculator);\n    var newTargetedAppointment = extend({}, rawAppointment, newRawTargetedAppointment);\n    var isCreateAppointment = null !== createNewAppointment && void 0 !== createNewAppointment ? createNewAppointment : isEmptyObject(rawAppointment);\n    if (isEmptyObject(rawAppointment)) {\n      rawAppointment = this.createPopupAppointment();\n    }\n    if (isCreateAppointment) {\n      delete this._editAppointmentData;\n      this._editing.allowAdding && this._appointmentPopup.show(rawAppointment, {\n        isToolbarVisible: true,\n        action: ACTION_TO_APPOINTMENT.CREATE\n      });\n    } else {\n      this._checkRecurringAppointment(rawAppointment, newTargetedAppointment, appointment.startDate, () => {\n        this._editAppointmentData = rawAppointment;\n        this._appointmentPopup.show(rawAppointment, {\n          isToolbarVisible: this._editing.allowUpdating,\n          action: ACTION_TO_APPOINTMENT.UPDATE\n        });\n      }, false, true);\n    }\n  }\n  createPopupAppointment() {\n    var result = {};\n    var toMs = dateUtils.dateToMilliseconds;\n    var startDate = new Date(this.option(\"currentDate\"));\n    var endDate = new Date(startDate.getTime() + this.option(\"cellDuration\") * toMs(\"minute\"));\n    ExpressionUtils.setField(this._dataAccessors, \"startDate\", result, startDate);\n    ExpressionUtils.setField(this._dataAccessors, \"endDate\", result, endDate);\n    return result;\n  }\n  hideAppointmentPopup(saveChanges) {\n    var _this$_appointmentPop3;\n    if (null !== (_this$_appointmentPop3 = this._appointmentPopup) && void 0 !== _this$_appointmentPop3 && _this$_appointmentPop3.visible) {\n      saveChanges && this._appointmentPopup.saveChangesAsync();\n      this._appointmentPopup.hide();\n    }\n  }\n  showAppointmentTooltip(appointment, element, targetedAppointment) {\n    if (appointment) {\n      var settings = utils.dataAccessors.getAppointmentSettings(element);\n      var appointmentConfig = {\n        itemData: targetedAppointment || appointment,\n        groupIndex: null === settings || void 0 === settings ? void 0 : settings.groupIndex,\n        groups: this.option(\"groups\")\n      };\n      var _getAppointmentColor = this.createGetAppointmentColor();\n      var deferredColor = _getAppointmentColor(appointmentConfig);\n      var info = new AppointmentTooltipInfo(appointment, targetedAppointment, deferredColor);\n      this.showAppointmentTooltipCore(element, [info]);\n    }\n  }\n  createGetAppointmentColor() {\n    return appointmentConfig => {\n      var resourceConfig = {\n        resources: this.option(\"resources\"),\n        dataAccessors: this.getResourceDataAccessors(),\n        loadedResources: this.option(\"loadedResources\"),\n        resourceLoaderMap: this.option(\"resourceLoaderMap\")\n      };\n      return getAppointmentColor(resourceConfig, appointmentConfig);\n    };\n  }\n  showAppointmentTooltipCore(target, data, options) {\n    var arg = {\n      cancel: false,\n      appointments: data.map(item => {\n        var result = {\n          appointmentData: item.appointment,\n          currentAppointmentData: _extends({}, item.targetedAppointment),\n          color: item.color\n        };\n        if (item.settings.info) {\n          var {\n            startDate: startDate,\n            endDate: endDate\n          } = item.settings.info.appointment;\n          result.currentAppointmentData.displayStartDate = startDate;\n          result.currentAppointmentData.displayEndDate = endDate;\n        }\n        return result;\n      }),\n      targetElement: target\n    };\n    this._createActionByOption(\"onAppointmentTooltipShowing\")(arg);\n    if (this._appointmentTooltip.isAlreadyShown(target)) {\n      this.hideAppointmentTooltip();\n    } else {\n      this._processActionResult(arg, canceled => {\n        !canceled && this._appointmentTooltip.show(target, data, _extends({}, this._getExtraAppointmentTooltipOptions(), options));\n      });\n    }\n  }\n  hideAppointmentTooltip() {\n    this._appointmentTooltip && this._appointmentTooltip.hide();\n  }\n  scrollToTime(hours, minutes, date) {\n    errors.log(\"W0002\", \"dxScheduler\", \"scrollToTime\", \"21.1\", 'Use the \"scrollTo\" method instead');\n    this._workSpace.scrollToTime(hours, minutes, date);\n  }\n  scrollTo(date, groups, allDay) {\n    this._workSpace.scrollTo(date, groups, allDay);\n  }\n  _isHorizontalVirtualScrolling() {\n    var scrolling = this.option(\"scrolling\");\n    var {\n      orientation: orientation,\n      mode: mode\n    } = scrolling;\n    var isVirtualScrolling = \"virtual\" === mode;\n    return isVirtualScrolling && (\"horizontal\" === orientation || \"both\" === orientation);\n  }\n  addAppointment(rawAppointment) {\n    var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\n    appointment.text = appointment.text || \"\";\n    var serializedAppointment = appointment.source(true);\n    var addingOptions = {\n      appointmentData: serializedAppointment,\n      cancel: false\n    };\n    this._actions[StoreEventNames.ADDING](addingOptions);\n    return this._processActionResult(addingOptions, canceled => {\n      if (canceled) {\n        return new Deferred().resolve();\n      }\n      this._expandAllDayPanel(serializedAppointment);\n      return this.appointmentDataProvider.add(serializedAppointment).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.ADDED, storeAppointment));\n    });\n  }\n  updateAppointment(target, appointment) {\n    return this._updateAppointment(target, appointment);\n  }\n  deleteAppointment(rawAppointment) {\n    var deletingOptions = this.fireOnAppointmentDeleting(rawAppointment);\n    this.processDeleteAppointment(rawAppointment, deletingOptions);\n  }\n  fireOnAppointmentDeleting(rawAppointment, targetedAppointmentData) {\n    var deletingOptions = {\n      appointmentData: rawAppointment,\n      targetedAppointmentData: targetedAppointmentData,\n      cancel: false\n    };\n    this._actions[StoreEventNames.DELETING](deletingOptions);\n    return deletingOptions;\n  }\n  processDeleteAppointment(rawAppointment, deletingOptions) {\n    this._processActionResult(deletingOptions, function (canceled) {\n      if (!canceled) {\n        this.appointmentDataProvider.remove(rawAppointment).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.DELETED, storeAppointment, rawAppointment));\n      }\n    });\n  }\n  deleteRecurrence(appointment, date, recurrenceEditMode) {\n    this._checkRecurringAppointment(appointment, {}, date, () => {\n      this.processDeleteAppointment(appointment, {\n        cancel: false\n      });\n    }, true, false, null, recurrenceEditMode);\n  }\n  focus() {\n    if (this._editAppointmentData) {\n      this._appointments.focus();\n    } else {\n      this._workSpace.focus();\n    }\n  }\n  getFirstDayOfWeek() {\n    return isDefined(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : dateLocalization.firstDayOfWeekIndex();\n  }\n  _validateKeyFieldIfAgendaExist() {\n    if (!this.appointmentDataProvider.isDataSourceInit) {\n      return;\n    }\n    var hasAgendaView = !!this._getViewByName(\"agenda\");\n    var isKeyExist = !!this.appointmentDataProvider.keyName;\n    if (hasAgendaView && !isKeyExist) {\n      errors.log(\"W1023\");\n    }\n  }\n  _validateCellDuration() {\n    var endDayHour = this._getCurrentViewOption(\"endDayHour\");\n    var startDayHour = this._getCurrentViewOption(\"startDayHour\");\n    var cellDuration = this._getCurrentViewOption(\"cellDuration\");\n    if ((endDayHour - startDayHour) * MINUTES_IN_HOUR % cellDuration !== 0) {\n      errors.log(\"W1015\");\n    }\n  }\n  _validateDayHours() {\n    var startDayHour = this._getCurrentViewOption(\"startDayHour\");\n    var endDayHour = this._getCurrentViewOption(\"endDayHour\");\n    validateDayHours(startDayHour, endDayHour);\n  }\n  _getDragBehavior() {\n    return this._workSpace.dragBehavior;\n  }\n}\nScheduler.include(DataHelperMixin);\nregisterComponent(\"dxScheduler\", Scheduler);\nexport default Scheduler;","map":{"version":3,"names":["_extends","registerComponent","config","devices","$","BindableTemplate","EmptyTemplate","Callbacks","noop","compileGetter","getBoundingRect","dateUtils","dateSerialization","Deferred","when","fromPromise","extend","each","isDefined","isString","isObject","isFunction","isEmptyObject","isDeferred","isPromise","hasWindow","DataHelperMixin","triggerResizeEvent","dateLocalization","messageLocalization","custom","customDialog","isMaterial","errors","Widget","AppointmentPopup","ACTION_TO_APPOINTMENT","AppointmentForm","CompactAppointmentsHelper","DesktopTooltipStrategy","MobileTooltipStrategy","hide","hideLoading","show","showLoading","AppointmentCollection","AppointmentLayoutManager","SchedulerHeader","subscribes","getRecurrenceProcessor","timeZoneUtils","SchedulerAgenda","SchedulerTimelineDay","SchedulerTimelineMonth","SchedulerTimelineWeek","SchedulerTimelineWorkWeek","SchedulerWorkSpaceDay","SchedulerWorkSpaceMonth","SchedulerWorkSpaceWeek","SchedulerWorkSpaceWorkWeek","createAppointmentAdapter","AppointmentTooltipInfo","utils","createExpressions","createResourceEditorModel","_createResourceEditorModel","getAppointmentColor","getCellGroups","loadResources","setResourceToAppointment","ExpressionUtils","validateDayHours","isDateAndTimeView","_isDateAndTimeView","isTimelineView","renderAppointments","AgendaResourceProcessor","AppointmentDataProvider","getAppointmentTakesAllDay","getPreparedDataItems","getCurrentView","createTimeZoneCalculator","excludeFromRecurrence","MINUTES_IN_HOUR","DEFAULT_AGENDA_DURATION","WIDGET_CLASS","WIDGET_SMALL_CLASS","concat","WIDGET_ADAPTIVE_CLASS","WIDGET_READONLY_CLASS","WIDGET_SMALL_WIDTH","FULL_DATE_FORMAT","UTC_FULL_DATE_FORMAT","DEFAULT_APPOINTMENT_TEMPLATE_NAME","DEFAULT_APPOINTMENT_COLLECTOR_TEMPLATE_NAME","DEFAULT_DROP_DOWN_APPOINTMENT_TEMPLATE_NAME","VIEWS_CONFIG","day","workSpace","renderingStrategy","week","workWeek","month","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","agenda","StoreEventNames","ADDING","ADDED","DELETING","DELETED","UPDATING","UPDATED","RECURRENCE_EDITING_MODE","SERIES","OCCURENCE","CANCEL","Scheduler","_getDefaultOptions","defaultOptions","views","currentView","currentDate","trimTime","Date","min","max","dateSerializationFormat","firstDayOfWeek","groups","resources","loadedResources","resourceLoaderMap","Map","dataSource","customizeDateNavigatorText","appointmentTemplate","dropDownAppointmentTemplate","appointmentCollectorTemplate","dataCellTemplate","timeCellTemplate","resourceCellTemplate","dateCellTemplate","startDayHour","endDayHour","editing","allowAdding","allowDeleting","allowDragging","allowResizing","allowUpdating","allowTimeZoneEditing","showAllDayPanel","showCurrentTimeIndicator","shadeUntilCurrentTime","indicatorUpdateInterval","indicatorTime","recurrenceEditMode","cellDuration","maxAppointmentsPerCell","selectedCellData","groupByDate","onAppointmentRendered","onAppointmentClick","onAppointmentDblClick","onAppointmentContextMenu","onCellClick","onCellContextMenu","onAppointmentAdding","onAppointmentAdded","onAppointmentUpdating","onAppointmentUpdated","onAppointmentDeleting","onAppointmentDeleted","onAppointmentFormOpening","onAppointmentTooltipShowing","appointmentTooltipTemplate","appointmentPopupTemplate","crossScrollingEnabled","useDropDownViewSwitcher","startDateExpr","endDateExpr","textExpr","descriptionExpr","allDayExpr","recurrenceRuleExpr","recurrenceExceptionExpr","disabledExpr","remoteFiltering","timeZone","startDateTimeZoneExpr","endDateTimeZoneExpr","noDataText","format","adaptivityEnabled","allowMultipleCellSelection","scrolling","mode","allDayPanelMode","renovateRender","_draggingMode","_appointmentTooltipOffset","x","y","_appointmentTooltipButtonsPosition","_appointmentTooltipOpenButtonText","_appointmentCountPerCell","_collectorOffset","_appointmentOffset","toolbar","location","defaultElement","integrationOptions","useDeferUpdateForTemplates","filteredItems","_filteredItems","value","preparedItems","_preparedItems","option","currentViewType","type","timeZoneCalculator","_timeZoneCalculator","_setDeprecatedOptions","_deprecatedOptions","since","message","_defaultOptionsRules","device","real","deviceType","isSimulator","options","focusStateEnabled","current","generic","data","index","element","text","split","forEach","span","addClass","append","_postponeDataSourceLoading","promise","postponedOperations","add","_reloadDataSource","bind","_postponeResourceLoading","whenLoaded","_getCurrentViewOption","resolveCallbacks","done","resolve","_optionChanged","args","_this$_header","_this$_header2","_this$_header4","name","_updateOption","_dateOption","_workSpace","_header","getStartViewDate","_appointments","_filterAppointmentsByDate","_initDataSource","appointmentDataProvider","setDataSource","_dataSource","_getCurrentViewOptions","repaint","_this$_header3","_validateDayHours","_validateCellDuration","items","allowDrag","_allowDragging","allowResize","_allowResizing","itemTemplate","_getAppointmentTemplate","_this$_header5","_refreshWorkSpace","_headerConfig","callPostponedOperations","_dataAccessors","agendaResourceProcessor","initializeState","updateInstances","_createAppointmentPopupForm","_actions","_createActionByOption","_getAppointmentRenderedAction","_readyToRenderAppointments","_getAppointmentsToRepaint","_dimensionChanged","_initEditing","_editing","_bringEditingModeToAppointments","hideAppointmentTooltip","_cleanPopup","_updateExpression","updateDataAccessors","_initAppointmentTemplate","_toggleAdaptiveClass","_isHorizontalVirtualScrolling","fullName","optionName","optionValue","deserializeDate","_getSerializationFormat","getDateSerializationFormat","editingConfig","allowDelete","_isAgenda","allowAllDayResize","_supportAllDayResizing","getLayoutManager","appointmentRenderingStrategyName","_allowAllDayResizing","intervalCount","_isAllDayExpanded","hasAllDayAppointments","_getTimezoneOffsetByOption","date","calculateTimezoneByValue","dateRange","getDateRange","startDate","createDate","path","endDate","filterByDate","result","load","_fireContentReadyAction","fail","reject","isLoading","container","$element","position","of","contentReadyBase","fireContentReady","_workSpaceRecalculation","_this$_workSpaceRecal","isForce","arguments","length","isFixedHeight","isFixedWidth","_isVisible","_toggleSmallClass","workspace","getWorkSpace","appointments","createAppointmentsMap","_appointmentPopup","triggerResize","updatePopupFullScreenMode","_clean","width","get","toggleClass","_visibilityChanged","visible","_dataSourceOptions","paginate","_initAllDayPanel","_init","_initExpressions","startDateTimeZone","endDateTimeZone","allDay","description","recurrenceRule","recurrenceException","disabled","_customizeDataSourceLoadOptions","_initActions","_compactAppointmentsHelper","_asyncTemplatesTimers","_dataSourceLoadedCallback","_subscribes","createAppointmentDataProvider","_this$appointmentData","destroy","dataAccessors","appointmentDuration","getLoadedResources","getIsVirtualScrolling","isVirtualScrolling","getSupportAllDayRow","supportAllDayRow","getViewType","getViewDirection","viewDirection","getGroupCount","_getGroupCount","getViewDataProvider","viewDataProvider","_this$_dataSource","on","_ref","storeLoadOptions","getEndViewDate","_initTemplates","_templateManager","addDefaultTemplates","appointmentTooltip","dropDownAppointment","expr","createGetter","property","getDate","getter","valueOf","item","$container","model","getAppointmentsInstance","_renderAppointmentTemplate","_renderContent","_renderContentImpl","_updatePreparedItems","_dataSourceChangedHandler","_renderAppointments","onDataSourceChanged","_currentViewOptions$s","currentViewOptions","_filterAppointments","filter","viewModel","instance","$dateTable","_getDateTable","cleanState","layoutManager","appointmentsMap","getRepaintedAppointments","fields","create","forceIsoDateParsing","exprObj","replace","getResourceDataAccessors","_isReadOnly","prop","Object","prototype","hasOwnProperty","call","_dispose","_this$_recurrenceDial","_appointmentTooltip","dispose","_recurrenceDialog","hideAppointmentPopup","clearTimeout","excludeValidators","_renderFocusTarget","_initMarkup","_renderMainContainer","_renderHeader","_layoutManager","_createComponent","_appointmentsConfig","_getAppointmentTooltipOptions","_isDataSourceLoaded","_isDataSourceLoading","_initMarkupCore","_this$_appointmentPop","_appointmentForm","_this$_appointmentFor","form","createAppointmentForm","createAppointmentPopup","_mainContainer","scheduler","getDataAccessors","createComponent","component","getEditingConfig","getFirstDayOfWeek","getStartDayHour","getCalculatedEndDate","startDateWithStartHour","calculateEndDate","getTimeZoneCalculator","getElement","focus","getResources","getAppointmentFormOpening","processActionResult","arg","canceled","_processActionResult","addAppointment","appointment","updateAppointment","sourceAppointment","updatedAppointment","updateScrollPosition","resourceItem","inAllDayRow","getScrollableContainer","getWorkSpaceScrollableContainer","getAppointmentTemplate","showAppointmentPopup","checkAndDeleteAppointment","isAppointmentInAllDayPanel","createFormattedDateText","targetedAppointment","fire","getAppointmentDisabled","targetedAdapter","deletingOptions","fireOnAppointmentDeleting","_checkRecurringAppointment","processDeleteAppointment","_getExtraAppointmentTooltipOptions","rtlEnabled","offset","appointmentData","itTakesAllDay","appointmentTakesAllDay","_cleanWorkspace","_renderWorkSpace","fixedContainer","getFixedContainer","allDayContainer","getAllDayContainer","_waitAsyncTemplate","_this$_workSpaceRecal2","_validateKeyFieldIfAgendaExist","isLoaded","_render","_this$getWorkSpace","updateHeaderEmptyCellWidth","$header","appendTo","countConfig","_getViewCountConfig","isAdaptive","tabIndex","agendaDuration","onCurrentViewChange","onCurrentDateChange","startViewDate","todayDate","getAgendaResourceProcessor","createGetAppointmentColor","getAppointmentDataProvider","observer","onItemRendered","onItemClick","onItemContextMenu","isRenovatedAppointments","getResizableStep","positionHelper","getDOMElementsMetaData","_this$_workSpace","_this$_workSpace2","isVerticalViewDirection","getRenderingStrategyInstance","getDirection","isVerticalGroupedWorkSpace","_isVerticalGroupedWorkSpace","onContentReady","_this$_workSpace3","getCollectorOffset","needApplyCollectorOffset","getAppointmentDurationInMinutes","_getCurrentViewType","_this$_header6","$workSpace","workSpaceComponent","workSpaceConfig","_workSpaceConfig","initDragBehavior","_all","_attachTablesEvents","getWorkArea","_recalculateWorkspace","_getHeaderDate","view","_getViewByName","viewCount","i","_refreshDateTimeIndication","_currentViewOptions$s2","horizontalVirtualScrollingAllowed","orientation","_currentViewOptions$s3","getFilteredItems","accessKey","allDayExpanded","onSelectionChanged","draggingMode","schedulerHeight","schedulerWidth","onSelectedCellsClick","showAddAppointmentPopup","onRenderAppointments","onShowAllDayPanel","getHeaderHeight","DOM","onScrollEnd","updateResizableArea","_isRenovatedRender","hoursInterval","_getTemplate","callback","_options","silent","timer","setTimeout","push","_getTemplateByOption","viewName","detach","remove","getWorkSpaceScrollable","getScrollable","getHeader","_this$_appointmentPop2","rawAppointment","singleAppointment","exceptionDate","isDeleted","isPopupEditing","dragEvent","getField","evalRecurrenceRule","isValid","editMode","_excludeAppointmentFromSeries","cancel","_showRecurrenceChangeConfirm","editingMode","moveAppointmentBack","newRawAppointment","singleRawAppointment","keyPropertyName","keyName","canCreateNewAppointment","isToolbarVisible","action","EXCLUDE_FROM_SERIES","excludeInfo","source","_editAppointmentData","_updateAppointment","_createRecurrenceException","_getSerializedDate","join","isAllDay","setHours","getHours","getMinutes","getSeconds","getMilliseconds","serializeDate","seriesText","occurrenceText","messageHtml","showCloseButton","showTitle","buttons","onClick","popupOptions","wrapperAttr","class","_getUpdatedData","getConvertedFromGrid","isValidDate","isNaN","getTime","targetCell","getTargetCellData","cellStartDate","cellEndDate","appointmentStartDate","appointmentEndDate","resultedStartDate","duration","isKeepAppointmentHours","keepOriginalHours","timeInMs","resultedEndDate","dateCopy","timeZoneOffset","getTimezoneOffsetChangeInMs","rawResult","getTargetedAppointment","settings","getAppointmentSettings","info","getAppointmentInfo","appointmentIndex","_itemIndexKey","adapter","clone","isRecurrent","agendaSettings","rawTargetedAppointment","setTargetedAppointmentResources","displayStartDate","displayEndDate","subscribe","subject","Array","slice","Error","apply","getDataByDroppableCell","target","onUpdatePrevented","updatingOptions","newData","oldData","performFailAction","err","deferred","_expandAllDayPanel","update","always","storeAppointment","_onDataPromiseCompleted","actionOptions","resolveCallback","callbackResult","state","handlerName","error","getActions","dayHasAppointment","getConvertedToTimeZone","dayTimeStamp","startDateTimeStamp","endDateTimeStamp","resourcesSetter","setter","getGroups","setResourceCallback","apptSettings","_positionMap","groupIndex","_","group","id","setting","getCellDataByCoordinates","left","top","field","_this$_workSpace4","cellData","cellGroups","appointmentAdapter","resultAppointment","createNewAppointment","newRawTargetedAppointment","newTargetedAppointment","isCreateAppointment","createPopupAppointment","CREATE","UPDATE","toMs","dateToMilliseconds","setField","saveChanges","_this$_appointmentPop3","saveChangesAsync","showAppointmentTooltip","appointmentConfig","itemData","_getAppointmentColor","deferredColor","showAppointmentTooltipCore","resourceConfig","map","currentAppointmentData","color","targetElement","isAlreadyShown","scrollToTime","hours","minutes","log","scrollTo","serializedAppointment","addingOptions","deleteAppointment","targetedAppointmentData","deleteRecurrence","firstDayOfWeekIndex","isDataSourceInit","hasAgendaView","isKeyExist","_getDragBehavior","dragBehavior","include"],"sources":["C:/Users/Michal Abargel/Desktop/FULLSTACK_PROJECTS/PrivateLessones/F(x)/client/gui/node_modules/devextreme/esm/ui/scheduler/ui.scheduler.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/ui.scheduler.js)\r\n * Version: 23.1.5\r\n * Build date: Wed Aug 30 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport config from \"../../core/config\";\r\nimport devices from \"../../core/devices\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    BindableTemplate\r\n} from \"../../core/templates/bindable_template\";\r\nimport {\r\n    EmptyTemplate\r\n} from \"../../core/templates/empty_template\";\r\nimport Callbacks from \"../../core/utils/callbacks\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    compileGetter\r\n} from \"../../core/utils/data\";\r\nimport {\r\n    getBoundingRect\r\n} from \"../../core/utils/position\";\r\nimport dateUtils from \"../../core/utils/date\";\r\nimport dateSerialization from \"../../core/utils/date_serialization\";\r\nimport {\r\n    Deferred,\r\n    when,\r\n    fromPromise\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    isDefined,\r\n    isString,\r\n    isObject,\r\n    isFunction,\r\n    isEmptyObject,\r\n    isDeferred,\r\n    isPromise\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport DataHelperMixin from \"../../data_helper\";\r\nimport {\r\n    triggerResizeEvent\r\n} from \"../../events/visibility_change\";\r\nimport dateLocalization from \"../../localization/date\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport {\r\n    custom as customDialog\r\n} from \"../dialog\";\r\nimport {\r\n    isMaterial\r\n} from \"../themes\";\r\nimport errors from \"../widget/ui.errors\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport {\r\n    AppointmentPopup,\r\n    ACTION_TO_APPOINTMENT\r\n} from \"../../__internal/scheduler/appointment_popup/m_popup\";\r\nimport {\r\n    AppointmentForm\r\n} from \"../../__internal/scheduler/appointment_popup/m_form\";\r\nimport {\r\n    CompactAppointmentsHelper\r\n} from \"./compactAppointmentsHelper\";\r\nimport {\r\n    DesktopTooltipStrategy\r\n} from \"../../__internal/scheduler/tooltip_strategies/m_desktop_tooltip_strategy\";\r\nimport {\r\n    MobileTooltipStrategy\r\n} from \"../../__internal/scheduler/tooltip_strategies/m_mobile_tooltip_strategy\";\r\nimport {\r\n    hide as hideLoading,\r\n    show as showLoading\r\n} from \"./loading\";\r\nimport AppointmentCollection from \"../../__internal/scheduler/appointments/m_appointment_collection\";\r\nimport AppointmentLayoutManager from \"./appointments.layout_manager\";\r\nimport {\r\n    SchedulerHeader\r\n} from \"../../__internal/scheduler/header/m_header\";\r\nimport subscribes from \"./subscribes\";\r\nimport {\r\n    getRecurrenceProcessor\r\n} from \"./recurrence\";\r\nimport timeZoneUtils from \"./utils.timeZone\";\r\nimport SchedulerAgenda from \"./workspaces/ui.scheduler.agenda\";\r\nimport SchedulerTimelineDay from \"./workspaces/ui.scheduler.timeline_day\";\r\nimport SchedulerTimelineMonth from \"./workspaces/ui.scheduler.timeline_month\";\r\nimport SchedulerTimelineWeek from \"./workspaces/ui.scheduler.timeline_week\";\r\nimport SchedulerTimelineWorkWeek from \"./workspaces/ui.scheduler.timeline_work_week\";\r\nimport SchedulerWorkSpaceDay from \"./workspaces/ui.scheduler.work_space_day\";\r\nimport SchedulerWorkSpaceMonth from \"./workspaces/ui.scheduler.work_space_month\";\r\nimport SchedulerWorkSpaceWeek from \"./workspaces/ui.scheduler.work_space_week\";\r\nimport SchedulerWorkSpaceWorkWeek from \"./workspaces/ui.scheduler.work_space_work_week\";\r\nimport {\r\n    createAppointmentAdapter\r\n} from \"./appointmentAdapter\";\r\nimport {\r\n    AppointmentTooltipInfo\r\n} from \"./dataStructures\";\r\nimport {\r\n    utils\r\n} from \"./utils\";\r\nimport {\r\n    createExpressions,\r\n    createResourceEditorModel as _createResourceEditorModel,\r\n    getAppointmentColor,\r\n    getCellGroups,\r\n    loadResources,\r\n    setResourceToAppointment\r\n} from \"../../__internal/scheduler/resources/m_utils\";\r\nimport {\r\n    ExpressionUtils\r\n} from \"./expressionUtils\";\r\nimport {\r\n    validateDayHours,\r\n    isDateAndTimeView as _isDateAndTimeView,\r\n    isTimelineView\r\n} from \"../../renovation/ui/scheduler/view_model/to_test/views/utils/base\";\r\nimport {\r\n    renderAppointments\r\n} from \"../../__internal/scheduler/appointments/m_render\";\r\nimport {\r\n    AgendaResourceProcessor\r\n} from \"../../__internal/scheduler/resources/m_agenda_resource_processor\";\r\nimport {\r\n    AppointmentDataProvider\r\n} from \"../../__internal/scheduler/appointments/data_provider/m_appointment_data_provider\";\r\nimport {\r\n    getAppointmentTakesAllDay\r\n} from \"../../renovation/ui/scheduler/appointment/utils/getAppointmentTakesAllDay\";\r\nimport {\r\n    getPreparedDataItems\r\n} from \"../../renovation/ui/scheduler/utils/data\";\r\nimport {\r\n    getCurrentView\r\n} from \"../../renovation/ui/scheduler/model/views\";\r\nimport {\r\n    createTimeZoneCalculator\r\n} from \"../../renovation/ui/scheduler/timeZoneCalculator/createTimeZoneCalculator\";\r\nimport {\r\n    excludeFromRecurrence\r\n} from \"../../renovation/ui/scheduler/utils/recurrence/excludeFromRecurrence\";\r\nvar MINUTES_IN_HOUR = 60;\r\nvar DEFAULT_AGENDA_DURATION = 7;\r\nvar WIDGET_CLASS = \"dx-scheduler\";\r\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\r\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\r\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\r\nvar WIDGET_SMALL_WIDTH = 400;\r\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\r\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\r\nvar DEFAULT_APPOINTMENT_TEMPLATE_NAME = \"item\";\r\nvar DEFAULT_APPOINTMENT_COLLECTOR_TEMPLATE_NAME = \"appointmentCollector\";\r\nvar DEFAULT_DROP_DOWN_APPOINTMENT_TEMPLATE_NAME = \"dropDownAppointment\";\r\nvar VIEWS_CONFIG = {\r\n    day: {\r\n        workSpace: SchedulerWorkSpaceDay,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    week: {\r\n        workSpace: SchedulerWorkSpaceWeek,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    workWeek: {\r\n        workSpace: SchedulerWorkSpaceWorkWeek,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    month: {\r\n        workSpace: SchedulerWorkSpaceMonth,\r\n        renderingStrategy: \"horizontalMonth\"\r\n    },\r\n    timelineDay: {\r\n        workSpace: SchedulerTimelineDay,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWeek: {\r\n        workSpace: SchedulerTimelineWeek,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWorkWeek: {\r\n        workSpace: SchedulerTimelineWorkWeek,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineMonth: {\r\n        workSpace: SchedulerTimelineMonth,\r\n        renderingStrategy: \"horizontalMonthLine\"\r\n    },\r\n    agenda: {\r\n        workSpace: SchedulerAgenda,\r\n        renderingStrategy: \"agenda\"\r\n    }\r\n};\r\nvar StoreEventNames = {\r\n    ADDING: \"onAppointmentAdding\",\r\n    ADDED: \"onAppointmentAdded\",\r\n    DELETING: \"onAppointmentDeleting\",\r\n    DELETED: \"onAppointmentDeleted\",\r\n    UPDATING: \"onAppointmentUpdating\",\r\n    UPDATED: \"onAppointmentUpdated\"\r\n};\r\nvar RECURRENCE_EDITING_MODE = {\r\n    SERIES: \"editSeries\",\r\n    OCCURENCE: \"editOccurence\",\r\n    CANCEL: \"cancel\"\r\n};\r\nclass Scheduler extends Widget {\r\n    _getDefaultOptions() {\r\n        var defaultOptions = extend(super._getDefaultOptions(), {\r\n            views: [\"day\", \"week\"],\r\n            currentView: \"day\",\r\n            currentDate: dateUtils.trimTime(new Date),\r\n            min: void 0,\r\n            max: void 0,\r\n            dateSerializationFormat: void 0,\r\n            firstDayOfWeek: void 0,\r\n            groups: [],\r\n            resources: [],\r\n            loadedResources: [],\r\n            resourceLoaderMap: new Map,\r\n            dataSource: null,\r\n            customizeDateNavigatorText: void 0,\r\n            appointmentTemplate: DEFAULT_APPOINTMENT_TEMPLATE_NAME,\r\n            dropDownAppointmentTemplate: DEFAULT_DROP_DOWN_APPOINTMENT_TEMPLATE_NAME,\r\n            appointmentCollectorTemplate: DEFAULT_APPOINTMENT_COLLECTOR_TEMPLATE_NAME,\r\n            dataCellTemplate: null,\r\n            timeCellTemplate: null,\r\n            resourceCellTemplate: null,\r\n            dateCellTemplate: null,\r\n            startDayHour: 0,\r\n            endDayHour: 24,\r\n            editing: {\r\n                allowAdding: true,\r\n                allowDeleting: true,\r\n                allowDragging: true,\r\n                allowResizing: true,\r\n                allowUpdating: true,\r\n                allowTimeZoneEditing: false\r\n            },\r\n            showAllDayPanel: true,\r\n            showCurrentTimeIndicator: true,\r\n            shadeUntilCurrentTime: false,\r\n            indicatorUpdateInterval: 3e5,\r\n            indicatorTime: void 0,\r\n            recurrenceEditMode: \"dialog\",\r\n            cellDuration: 30,\r\n            maxAppointmentsPerCell: \"auto\",\r\n            selectedCellData: [],\r\n            groupByDate: false,\r\n            onAppointmentRendered: null,\r\n            onAppointmentClick: null,\r\n            onAppointmentDblClick: null,\r\n            onAppointmentContextMenu: null,\r\n            onCellClick: null,\r\n            onCellContextMenu: null,\r\n            onAppointmentAdding: null,\r\n            onAppointmentAdded: null,\r\n            onAppointmentUpdating: null,\r\n            onAppointmentUpdated: null,\r\n            onAppointmentDeleting: null,\r\n            onAppointmentDeleted: null,\r\n            onAppointmentFormOpening: null,\r\n            onAppointmentTooltipShowing: null,\r\n            appointmentTooltipTemplate: \"appointmentTooltip\",\r\n            appointmentPopupTemplate: \"appointmentPopup\",\r\n            crossScrollingEnabled: false,\r\n            useDropDownViewSwitcher: false,\r\n            startDateExpr: \"startDate\",\r\n            endDateExpr: \"endDate\",\r\n            textExpr: \"text\",\r\n            descriptionExpr: \"description\",\r\n            allDayExpr: \"allDay\",\r\n            recurrenceRuleExpr: \"recurrenceRule\",\r\n            recurrenceExceptionExpr: \"recurrenceException\",\r\n            disabledExpr: \"disabled\",\r\n            remoteFiltering: false,\r\n            timeZone: \"\",\r\n            startDateTimeZoneExpr: \"startDateTimeZone\",\r\n            endDateTimeZoneExpr: \"endDateTimeZone\",\r\n            noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\r\n            adaptivityEnabled: false,\r\n            allowMultipleCellSelection: true,\r\n            scrolling: {\r\n                mode: \"standard\"\r\n            },\r\n            allDayPanelMode: \"all\",\r\n            renovateRender: true,\r\n            _draggingMode: \"outlook\",\r\n            _appointmentTooltipOffset: {\r\n                x: 0,\r\n                y: 0\r\n            },\r\n            _appointmentTooltipButtonsPosition: \"bottom\",\r\n            _appointmentTooltipOpenButtonText: messageLocalization.format(\"dxScheduler-openAppointment\"),\r\n            _appointmentCountPerCell: 2,\r\n            _collectorOffset: 0,\r\n            _appointmentOffset: 26,\r\n            toolbar: [{\r\n                location: \"before\",\r\n                defaultElement: \"dateNavigator\"\r\n            }, {\r\n                location: \"after\",\r\n                defaultElement: \"viewSwitcher\"\r\n            }]\r\n        });\r\n        return extend(true, defaultOptions, {\r\n            integrationOptions: {\r\n                useDeferUpdateForTemplates: false\r\n            }\r\n        })\r\n    }\r\n    get filteredItems() {\r\n        if (!this._filteredItems) {\r\n            this._filteredItems = []\r\n        }\r\n        return this._filteredItems\r\n    }\r\n    set filteredItems(value) {\r\n        this._filteredItems = value\r\n    }\r\n    get preparedItems() {\r\n        if (!this._preparedItems) {\r\n            this._preparedItems = []\r\n        }\r\n        return this._preparedItems\r\n    }\r\n    set preparedItems(value) {\r\n        this._preparedItems = value\r\n    }\r\n    get currentView() {\r\n        return getCurrentView(this.option(\"currentView\"), this.option(\"views\"))\r\n    }\r\n    get currentViewType() {\r\n        return isObject(this.currentView) ? this.currentView.type : this.currentView\r\n    }\r\n    get timeZoneCalculator() {\r\n        if (!this._timeZoneCalculator) {\r\n            this._timeZoneCalculator = createTimeZoneCalculator(this.option(\"timeZone\"))\r\n        }\r\n        return this._timeZoneCalculator\r\n    }\r\n    _setDeprecatedOptions() {\r\n        super._setDeprecatedOptions();\r\n        extend(this._deprecatedOptions, {\r\n            dropDownAppointmentTemplate: {\r\n                since: \"19.2\",\r\n                message: \"appointmentTooltipTemplate\"\r\n            }\r\n        })\r\n    }\r\n    _defaultOptionsRules() {\r\n        return super._defaultOptionsRules().concat([{\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return !devices.current().generic\r\n            },\r\n            options: {\r\n                useDropDownViewSwitcher: true,\r\n                editing: {\r\n                    allowDragging: false,\r\n                    allowResizing: false\r\n                }\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return isMaterial()\r\n            },\r\n            options: {\r\n                useDropDownViewSwitcher: true,\r\n                dateCellTemplate: function(data, index, element) {\r\n                    var text = data.text;\r\n                    text.split(\" \").forEach((function(text, index) {\r\n                        var span = $(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\r\n                        $(element).append(span);\r\n                        if (!index) {\r\n                            $(element).append(\" \")\r\n                        }\r\n                    }))\r\n                },\r\n                _appointmentTooltipOffset: {\r\n                    x: 0,\r\n                    y: 11\r\n                },\r\n                _appointmentTooltipButtonsPosition: \"top\",\r\n                _appointmentTooltipOpenButtonText: null,\r\n                _appointmentCountPerCell: 1,\r\n                _collectorOffset: 20,\r\n                _appointmentOffset: 30\r\n            }\r\n        }])\r\n    }\r\n    _postponeDataSourceLoading(promise) {\r\n        this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise)\r\n    }\r\n    _postponeResourceLoading() {\r\n        var whenLoaded = this.postponedOperations.add(\"loadResources\", () => {\r\n            var groups = this._getCurrentViewOption(\"groups\");\r\n            return loadResources(groups, this.option(\"resources\"), this.option(\"resourceLoaderMap\"))\r\n        });\r\n        var resolveCallbacks = new Deferred;\r\n        whenLoaded.done(resources => {\r\n            this.option(\"loadedResources\", resources);\r\n            resolveCallbacks.resolve(resources)\r\n        });\r\n        this._postponeDataSourceLoading(whenLoaded);\r\n        return resolveCallbacks.promise()\r\n    }\r\n    _optionChanged(args) {\r\n        var _this$_header, _this$_header2, _this$_header4;\r\n        var value = args.value;\r\n        var name = args.name;\r\n        switch (args.name) {\r\n            case \"customizeDateNavigatorText\":\r\n                this._updateOption(\"header\", name, value);\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._updateOption(\"header\", name, value);\r\n                break;\r\n            case \"currentDate\":\r\n                value = this._dateOption(name);\r\n                value = dateUtils.trimTime(new Date(value));\r\n                this.option(\"selectedCellData\", []);\r\n                this._workSpace.option(name, new Date(value));\r\n                null === (_this$_header = this._header) || void 0 === _this$_header ? void 0 : _this$_header.option(name, new Date(value));\r\n                null === (_this$_header2 = this._header) || void 0 === _this$_header2 ? void 0 : _this$_header2.option(\"startViewDate\", this.getStartViewDate());\r\n                this._appointments.option(\"items\", []);\r\n                this._filterAppointmentsByDate();\r\n                this._postponeDataSourceLoading();\r\n                break;\r\n            case \"dataSource\":\r\n                this._initDataSource();\r\n                this.appointmentDataProvider.setDataSource(this._dataSource);\r\n                this._postponeResourceLoading().done(resources => {\r\n                    this._filterAppointmentsByDate();\r\n                    this._updateOption(\"workSpace\", \"showAllDayPanel\", this.option(\"showAllDayPanel\"))\r\n                });\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                value = this._dateOption(name);\r\n                this._updateOption(\"header\", name, new Date(value));\r\n                this._updateOption(\"workSpace\", name, new Date(value));\r\n                break;\r\n            case \"views\":\r\n                if (this._getCurrentViewOptions()) {\r\n                    this.repaint()\r\n                } else {\r\n                    var _this$_header3;\r\n                    null === (_this$_header3 = this._header) || void 0 === _this$_header3 ? void 0 : _this$_header3.option(name, value)\r\n                }\r\n                break;\r\n            case \"useDropDownViewSwitcher\":\r\n                null === (_this$_header4 = this._header) || void 0 === _this$_header4 ? void 0 : _this$_header4.option(name, value);\r\n                break;\r\n            case \"currentView\":\r\n                this._validateDayHours();\r\n                this._validateCellDuration();\r\n                this._appointments.option({\r\n                    items: [],\r\n                    allowDrag: this._allowDragging(),\r\n                    allowResize: this._allowResizing(),\r\n                    itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\r\n                });\r\n                this._postponeResourceLoading().done(resources => {\r\n                    var _this$_header5;\r\n                    this._refreshWorkSpace(resources);\r\n                    null === (_this$_header5 = this._header) || void 0 === _this$_header5 ? void 0 : _this$_header5.option(this._headerConfig());\r\n                    this._filterAppointmentsByDate();\r\n                    this._appointments.option(\"allowAllDayResize\", \"day\" !== value)\r\n                });\r\n                this.postponedOperations.callPostponedOperations();\r\n                break;\r\n            case \"appointmentTemplate\":\r\n                this._appointments.option(\"itemTemplate\", value);\r\n                break;\r\n            case \"dateCellTemplate\":\r\n            case \"resourceCellTemplate\":\r\n            case \"dataCellTemplate\":\r\n            case \"timeCellTemplate\":\r\n                this.repaint();\r\n                break;\r\n            case \"groups\":\r\n                this._postponeResourceLoading().done(resources => {\r\n                    this._refreshWorkSpace(resources);\r\n                    this._filterAppointmentsByDate()\r\n                });\r\n                break;\r\n            case \"resources\":\r\n                this._dataAccessors.resources = createExpressions(this.option(\"resources\"));\r\n                this.agendaResourceProcessor.initializeState(this.option(\"resources\"));\r\n                this.updateInstances();\r\n                this._postponeResourceLoading().done(resources => {\r\n                    this._appointments.option(\"items\", []);\r\n                    this._refreshWorkSpace(resources);\r\n                    this._filterAppointmentsByDate();\r\n                    this._createAppointmentPopupForm()\r\n                });\r\n                break;\r\n            case \"startDayHour\":\r\n            case \"endDayHour\":\r\n                this._validateDayHours();\r\n                this.updateInstances();\r\n                this._appointments.option(\"items\", []);\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.repaint();\r\n                this._filterAppointmentsByDate();\r\n                this._postponeDataSourceLoading();\r\n                break;\r\n            case StoreEventNames.ADDING:\r\n            case StoreEventNames.ADDED:\r\n            case StoreEventNames.UPDATING:\r\n            case StoreEventNames.UPDATED:\r\n            case StoreEventNames.DELETING:\r\n            case StoreEventNames.DELETED:\r\n            case \"onAppointmentFormOpening\":\r\n            case \"onAppointmentTooltipShowing\":\r\n                this._actions[name] = this._createActionByOption(name);\r\n                break;\r\n            case \"onAppointmentRendered\":\r\n                this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\r\n                break;\r\n            case \"onAppointmentClick\":\r\n                this._appointments.option(\"onItemClick\", this._createActionByOption(name));\r\n                break;\r\n            case \"onAppointmentDblClick\":\r\n                this._appointments.option(name, this._createActionByOption(name));\r\n                break;\r\n            case \"onAppointmentContextMenu\":\r\n                this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\r\n                break;\r\n            case \"noDataText\":\r\n            case \"allowMultipleCellSelection\":\r\n            case \"selectedCellData\":\r\n            case \"accessKey\":\r\n            case \"onCellClick\":\r\n            case \"onCellContextMenu\":\r\n                this._workSpace.option(name, value);\r\n                break;\r\n            case \"crossScrollingEnabled\":\r\n                this._postponeResourceLoading().done(resources => {\r\n                    this._appointments.option(\"items\", []);\r\n                    this._refreshWorkSpace(resources);\r\n                    if (this._readyToRenderAppointments) {\r\n                        this._appointments.option(\"items\", this._getAppointmentsToRepaint())\r\n                    }\r\n                });\r\n                break;\r\n            case \"cellDuration\":\r\n                this._validateCellDuration();\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.option(\"items\", []);\r\n                if (this._readyToRenderAppointments) {\r\n                    this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\r\n                    this._appointments.option(\"items\", this._getAppointmentsToRepaint())\r\n                }\r\n                break;\r\n            case \"tabIndex\":\r\n            case \"focusStateEnabled\":\r\n                this._updateOption(\"header\", name, value);\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.option(name, value);\r\n                super._optionChanged(args);\r\n                break;\r\n            case \"width\":\r\n                this._updateOption(\"header\", name, value);\r\n                if (this.option(\"crossScrollingEnabled\")) {\r\n                    this._updateOption(\"workSpace\", \"width\", value)\r\n                }\r\n                this._updateOption(\"workSpace\", \"schedulerWidth\", value);\r\n                super._optionChanged(args);\r\n                this._dimensionChanged(null, true);\r\n                break;\r\n            case \"height\":\r\n                super._optionChanged(args);\r\n                this._dimensionChanged(null, true);\r\n                this._updateOption(\"workSpace\", \"schedulerHeight\", value);\r\n                break;\r\n            case \"editing\":\r\n                this._initEditing();\r\n                var editing = this._editing;\r\n                this._bringEditingModeToAppointments(editing);\r\n                this.hideAppointmentTooltip();\r\n                this._cleanPopup();\r\n                break;\r\n            case \"showAllDayPanel\":\r\n                this.updateInstances();\r\n                this.repaint();\r\n                break;\r\n            case \"showCurrentTimeIndicator\":\r\n            case \"indicatorTime\":\r\n            case \"indicatorUpdateInterval\":\r\n            case \"shadeUntilCurrentTime\":\r\n            case \"groupByDate\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this.repaint();\r\n                break;\r\n            case \"appointmentDragging\":\r\n            case \"appointmentTooltipTemplate\":\r\n            case \"appointmentPopupTemplate\":\r\n            case \"recurrenceEditMode\":\r\n            case \"remoteFiltering\":\r\n            case \"timeZone\":\r\n                this.updateInstances();\r\n                this.repaint();\r\n                break;\r\n            case \"dropDownAppointmentTemplate\":\r\n            case \"appointmentCollectorTemplate\":\r\n            case \"_appointmentTooltipOffset\":\r\n            case \"_appointmentTooltipButtonsPosition\":\r\n            case \"_appointmentTooltipOpenButtonText\":\r\n            case \"_appointmentCountPerCell\":\r\n            case \"_collectorOffset\":\r\n            case \"_appointmentOffset\":\r\n                this.repaint();\r\n                break;\r\n            case \"dateSerializationFormat\":\r\n            case \"maxAppointmentsPerCell\":\r\n                break;\r\n            case \"startDateExpr\":\r\n            case \"endDateExpr\":\r\n            case \"startDateTimeZoneExpr\":\r\n            case \"endDateTimeZoneExpr\":\r\n            case \"textExpr\":\r\n            case \"descriptionExpr\":\r\n            case \"allDayExpr\":\r\n            case \"recurrenceRuleExpr\":\r\n            case \"recurrenceExceptionExpr\":\r\n            case \"disabledExpr\":\r\n                this._updateExpression(name, value);\r\n                this.appointmentDataProvider.updateDataAccessors(this._dataAccessors);\r\n                this._initAppointmentTemplate();\r\n                this.repaint();\r\n                break;\r\n            case \"adaptivityEnabled\":\r\n                this._toggleAdaptiveClass();\r\n                this.repaint();\r\n                break;\r\n            case \"scrolling\":\r\n                this.option(\"crossScrollingEnabled\", this._isHorizontalVirtualScrolling() || this.option(\"crossScrollingEnabled\"));\r\n                this._updateOption(\"workSpace\", args.fullName, value);\r\n                break;\r\n            case \"allDayPanelMode\":\r\n                this._updateOption(\"workSpace\", args.fullName, value);\r\n                break;\r\n            case \"renovateRender\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                break;\r\n            case \"_draggingMode\":\r\n                this._workSpace.option(\"draggingMode\", value);\r\n                break;\r\n            case \"toolbar\":\r\n                this._header ? this._header.option(\"items\", value) : this.repaint();\r\n                break;\r\n            case \"loadedResources\":\r\n            case \"resourceLoaderMap\":\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    _dateOption(optionName) {\r\n        var optionValue = this._getCurrentViewOption(optionName);\r\n        return dateSerialization.deserializeDate(optionValue)\r\n    }\r\n    _getSerializationFormat(optionName) {\r\n        var value = this._getCurrentViewOption(optionName);\r\n        if (\"number\" === typeof value) {\r\n            return \"number\"\r\n        }\r\n        if (!isString(value)) {\r\n            return\r\n        }\r\n        return dateSerialization.getDateSerializationFormat(value)\r\n    }\r\n    _bringEditingModeToAppointments(editing) {\r\n        var editingConfig = {\r\n            allowDelete: editing.allowUpdating && editing.allowDeleting\r\n        };\r\n        if (!this._isAgenda()) {\r\n            editingConfig.allowDrag = editing.allowDragging;\r\n            editingConfig.allowResize = editing.allowResizing;\r\n            editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing()\r\n        }\r\n        this._appointments.option(editingConfig);\r\n        this.repaint()\r\n    }\r\n    _isAgenda() {\r\n        return \"agenda\" === this.getLayoutManager().appointmentRenderingStrategyName\r\n    }\r\n    _allowDragging() {\r\n        return this._editing.allowDragging && !this._isAgenda()\r\n    }\r\n    _allowResizing() {\r\n        return this._editing.allowResizing && !this._isAgenda()\r\n    }\r\n    _allowAllDayResizing() {\r\n        return this._editing.allowResizing && this._supportAllDayResizing()\r\n    }\r\n    _supportAllDayResizing() {\r\n        return \"day\" !== this.currentViewType || this.currentView.intervalCount > 1\r\n    }\r\n    _isAllDayExpanded() {\r\n        return this.option(\"showAllDayPanel\") && this.appointmentDataProvider.hasAllDayAppointments(this.filteredItems, this.preparedItems)\r\n    }\r\n    _getTimezoneOffsetByOption(date) {\r\n        return timeZoneUtils.calculateTimezoneByValue(this.option(\"timeZone\"), date)\r\n    }\r\n    _filterAppointmentsByDate() {\r\n        var dateRange = this._workSpace.getDateRange();\r\n        var startDate = this.timeZoneCalculator.createDate(dateRange[0], {\r\n            path: \"fromGrid\"\r\n        });\r\n        var endDate = this.timeZoneCalculator.createDate(dateRange[1], {\r\n            path: \"fromGrid\"\r\n        });\r\n        this.appointmentDataProvider.filterByDate(startDate, endDate, this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"))\r\n    }\r\n    _reloadDataSource() {\r\n        var result = new Deferred;\r\n        if (this._dataSource) {\r\n            this._dataSource.load().done(function() {\r\n                hideLoading();\r\n                this._fireContentReadyAction(result)\r\n            }.bind(this)).fail((function() {\r\n                hideLoading();\r\n                result.reject()\r\n            }));\r\n            this._dataSource.isLoading() && showLoading({\r\n                container: this.$element(),\r\n                position: {\r\n                    of: this.$element()\r\n                }\r\n            })\r\n        } else {\r\n            this._fireContentReadyAction(result)\r\n        }\r\n        return result.promise()\r\n    }\r\n    _fireContentReadyAction(result) {\r\n        var contentReadyBase = super._fireContentReadyAction.bind(this);\r\n        var fireContentReady = () => {\r\n            contentReadyBase();\r\n            null === result || void 0 === result ? void 0 : result.resolve()\r\n        };\r\n        if (this._workSpaceRecalculation) {\r\n            var _this$_workSpaceRecal;\r\n            null === (_this$_workSpaceRecal = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal ? void 0 : _this$_workSpaceRecal.done(() => {\r\n                fireContentReady()\r\n            })\r\n        } else {\r\n            fireContentReady()\r\n        }\r\n    }\r\n    _dimensionChanged(value) {\r\n        var isForce = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : false;\r\n        var isFixedHeight = \"number\" === typeof this.option(\"height\");\r\n        var isFixedWidth = \"number\" === typeof this.option(\"width\");\r\n        if (!this._isVisible()) {\r\n            return\r\n        }\r\n        this._toggleSmallClass();\r\n        var workspace = this.getWorkSpace();\r\n        if (!this._isAgenda() && this.filteredItems && workspace) {\r\n            if (isForce || !isFixedHeight || !isFixedWidth) {\r\n                workspace.option(\"allDayExpanded\", this._isAllDayExpanded());\r\n                workspace._dimensionChanged();\r\n                var appointments = this.getLayoutManager().createAppointmentsMap(this.filteredItems);\r\n                this._appointments.option(\"items\", appointments)\r\n            }\r\n        }\r\n        this.hideAppointmentTooltip();\r\n        this._appointmentPopup.triggerResize();\r\n        this._appointmentPopup.updatePopupFullScreenMode()\r\n    }\r\n    _clean() {\r\n        this._cleanPopup();\r\n        super._clean()\r\n    }\r\n    _toggleSmallClass() {\r\n        var width = getBoundingRect(this.$element().get(0)).width;\r\n        this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH)\r\n    }\r\n    _toggleAdaptiveClass() {\r\n        this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"))\r\n    }\r\n    _visibilityChanged(visible) {\r\n        visible && this._dimensionChanged(null, true)\r\n    }\r\n    _dataSourceOptions() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    }\r\n    _initAllDayPanel() {\r\n        if (\"hidden\" === this.option(\"allDayPanelMode\")) {\r\n            this.option(\"showAllDayPanel\", false)\r\n        }\r\n    }\r\n    _init() {\r\n        this._initExpressions({\r\n            startDate: this.option(\"startDateExpr\"),\r\n            endDate: this.option(\"endDateExpr\"),\r\n            startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\r\n            endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\r\n            allDay: this.option(\"allDayExpr\"),\r\n            text: this.option(\"textExpr\"),\r\n            description: this.option(\"descriptionExpr\"),\r\n            recurrenceRule: this.option(\"recurrenceRuleExpr\"),\r\n            recurrenceException: this.option(\"recurrenceExceptionExpr\"),\r\n            disabled: this.option(\"disabledExpr\")\r\n        });\r\n        super._init();\r\n        this._initAllDayPanel();\r\n        this._initDataSource();\r\n        this._customizeDataSourceLoadOptions();\r\n        this.$element().addClass(WIDGET_CLASS);\r\n        this._initEditing();\r\n        this.updateInstances();\r\n        this._initActions();\r\n        this._compactAppointmentsHelper = new CompactAppointmentsHelper(this);\r\n        this._asyncTemplatesTimers = [];\r\n        this._dataSourceLoadedCallback = Callbacks();\r\n        this._subscribes = subscribes;\r\n        this.agendaResourceProcessor = new AgendaResourceProcessor(this.option(\"resources\"))\r\n    }\r\n    createAppointmentDataProvider() {\r\n        var _this$appointmentData;\r\n        null === (_this$appointmentData = this.appointmentDataProvider) || void 0 === _this$appointmentData ? void 0 : _this$appointmentData.destroy();\r\n        this.appointmentDataProvider = new AppointmentDataProvider({\r\n            dataSource: this._dataSource,\r\n            dataAccessors: this._dataAccessors,\r\n            timeZoneCalculator: this.timeZoneCalculator,\r\n            dateSerializationFormat: this.option(\"dateSerializationFormat\"),\r\n            resources: this.option(\"resources\"),\r\n            startDayHour: this._getCurrentViewOption(\"startDayHour\"),\r\n            endDayHour: this._getCurrentViewOption(\"endDayHour\"),\r\n            appointmentDuration: this._getCurrentViewOption(\"cellDuration\"),\r\n            allDayPanelMode: this._getCurrentViewOption(\"allDayPanelMode\"),\r\n            showAllDayPanel: this.option(\"showAllDayPanel\"),\r\n            getLoadedResources: () => this.option(\"loadedResources\"),\r\n            getIsVirtualScrolling: () => this.isVirtualScrolling(),\r\n            getSupportAllDayRow: () => this._workSpace.supportAllDayRow(),\r\n            getViewType: () => this._workSpace.type,\r\n            getViewDirection: () => this._workSpace.viewDirection,\r\n            getDateRange: () => this._workSpace.getDateRange(),\r\n            getGroupCount: () => this._workSpace._getGroupCount(),\r\n            getViewDataProvider: () => this._workSpace.viewDataProvider\r\n        })\r\n    }\r\n    updateInstances() {\r\n        this._timeZoneCalculator = null;\r\n        if (this.getWorkSpace()) {\r\n            this.createAppointmentDataProvider()\r\n        }\r\n    }\r\n    _customizeDataSourceLoadOptions() {\r\n        var _this$_dataSource;\r\n        null === (_this$_dataSource = this._dataSource) || void 0 === _this$_dataSource ? void 0 : _this$_dataSource.on(\"customizeStoreLoadOptions\", _ref => {\r\n            var {\r\n                storeLoadOptions: storeLoadOptions\r\n            } = _ref;\r\n            storeLoadOptions.startDate = this.getStartViewDate();\r\n            storeLoadOptions.endDate = this.getEndViewDate()\r\n        })\r\n    }\r\n    _initTemplates() {\r\n        this._initAppointmentTemplate();\r\n        this._templateManager.addDefaultTemplates({\r\n            appointmentTooltip: new EmptyTemplate,\r\n            dropDownAppointment: new EmptyTemplate\r\n        });\r\n        super._initTemplates()\r\n    }\r\n    _initAppointmentTemplate() {\r\n        var {\r\n            expr: expr\r\n        } = this._dataAccessors;\r\n        var createGetter = property => compileGetter(\"appointmentData.\".concat(property));\r\n        var getDate = getter => data => {\r\n            var value = getter(data);\r\n            if (value instanceof Date) {\r\n                return value.valueOf()\r\n            }\r\n            return value\r\n        };\r\n        this._templateManager.addDefaultTemplates({\r\n            item: new BindableTemplate(($container, data, model) => this.getAppointmentsInstance()._renderAppointmentTemplate($container, data, model), [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\r\n                text: createGetter(expr.textExpr),\r\n                startDate: getDate(createGetter(expr.startDateExpr)),\r\n                endDate: getDate(createGetter(expr.endDateExpr)),\r\n                startDateTimeZone: createGetter(expr.startDateTimeZoneExpr),\r\n                endDateTimeZone: createGetter(expr.endDateTimeZoneExpr),\r\n                allDay: createGetter(expr.allDayExpr),\r\n                recurrenceRule: createGetter(expr.recurrenceRuleExpr)\r\n            })\r\n        })\r\n    }\r\n    _renderContent() {\r\n        this._renderContentImpl()\r\n    }\r\n    _updatePreparedItems(items) {\r\n        this.preparedItems = getPreparedDataItems(items, this._dataAccessors, this._getCurrentViewOption(\"cellDuration\"), this.timeZoneCalculator)\r\n    }\r\n    _dataSourceChangedHandler(result) {\r\n        if (this._readyToRenderAppointments) {\r\n            this._workSpaceRecalculation.done(function() {\r\n                this._updatePreparedItems(result);\r\n                this._renderAppointments();\r\n                this.getWorkSpace().onDataSourceChanged(this.filteredItems)\r\n            }.bind(this))\r\n        }\r\n    }\r\n    isVirtualScrolling() {\r\n        var _currentViewOptions$s;\r\n        var workspace = this.getWorkSpace();\r\n        if (workspace) {\r\n            return workspace.isVirtualScrolling()\r\n        }\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var scrolling = this.option(\"scrolling\");\r\n        return \"virtual\" === (null === scrolling || void 0 === scrolling ? void 0 : scrolling.mode) || \"virtual\" === (null === currentViewOptions || void 0 === currentViewOptions ? void 0 : null === (_currentViewOptions$s = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s ? void 0 : _currentViewOptions$s.mode)\r\n    }\r\n    _filterAppointments() {\r\n        this.filteredItems = this.appointmentDataProvider.filter(this.preparedItems)\r\n    }\r\n    _renderAppointments() {\r\n        var workspace = this.getWorkSpace();\r\n        this._filterAppointments();\r\n        workspace.option(\"allDayExpanded\", this._isAllDayExpanded());\r\n        var viewModel = [];\r\n        if (this._isVisible()) {\r\n            viewModel = this._getAppointmentsToRepaint()\r\n        }\r\n        if (this.option(\"isRenovatedAppointments\")) {\r\n            renderAppointments({\r\n                instance: this,\r\n                $dateTable: this.getWorkSpace()._getDateTable(),\r\n                viewModel: viewModel\r\n            })\r\n        } else {\r\n            this._appointments.option(\"items\", viewModel)\r\n        }\r\n        this.appointmentDataProvider.cleanState()\r\n    }\r\n    _getAppointmentsToRepaint() {\r\n        var layoutManager = this.getLayoutManager();\r\n        var appointmentsMap = layoutManager.createAppointmentsMap(this.filteredItems);\r\n        if (this.option(\"isRenovatedAppointments\")) {\r\n            var appointmentTemplate = this.option(\"appointmentTemplate\") !== DEFAULT_APPOINTMENT_TEMPLATE_NAME ? this.option(\"appointmentTemplate\") : void 0;\r\n            return {\r\n                appointments: appointmentsMap,\r\n                appointmentTemplate: appointmentTemplate\r\n            }\r\n        }\r\n        return layoutManager.getRepaintedAppointments(appointmentsMap, this.getAppointmentsInstance().option(\"items\"))\r\n    }\r\n    _initExpressions(fields) {\r\n        this._dataAccessors = utils.dataAccessors.create(fields, this._dataAccessors, config().forceIsoDateParsing, this.option(\"dateSerializationFormat\"));\r\n        this._dataAccessors.resources = createExpressions(this.option(\"resources\"))\r\n    }\r\n    _updateExpression(name, value) {\r\n        var exprObj = {};\r\n        exprObj[name.replace(\"Expr\", \"\")] = value;\r\n        this._initExpressions(exprObj)\r\n    }\r\n    getResourceDataAccessors() {\r\n        return this._dataAccessors.resources\r\n    }\r\n    _initEditing() {\r\n        var editing = this.option(\"editing\");\r\n        this._editing = {\r\n            allowAdding: !!editing,\r\n            allowUpdating: !!editing,\r\n            allowDeleting: !!editing,\r\n            allowResizing: !!editing,\r\n            allowDragging: !!editing\r\n        };\r\n        if (isObject(editing)) {\r\n            this._editing = extend(this._editing, editing)\r\n        }\r\n        this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\r\n        this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\r\n        this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly())\r\n    }\r\n    _isReadOnly() {\r\n        var result = true;\r\n        var editing = this._editing;\r\n        for (var prop in editing) {\r\n            if (Object.prototype.hasOwnProperty.call(editing, prop)) {\r\n                result = result && !editing[prop]\r\n            }\r\n        }\r\n        return result\r\n    }\r\n    _dispose() {\r\n        var _this$_recurrenceDial;\r\n        this._appointmentTooltip && this._appointmentTooltip.dispose();\r\n        null === (_this$_recurrenceDial = this._recurrenceDialog) || void 0 === _this$_recurrenceDial ? void 0 : _this$_recurrenceDial.hide(RECURRENCE_EDITING_MODE.CANCEL);\r\n        this.hideAppointmentPopup();\r\n        this.hideAppointmentTooltip();\r\n        this._asyncTemplatesTimers.forEach(clearTimeout);\r\n        this._asyncTemplatesTimers = [];\r\n        super._dispose()\r\n    }\r\n    _initActions() {\r\n        this._actions = {\r\n            onAppointmentAdding: this._createActionByOption(StoreEventNames.ADDING),\r\n            onAppointmentAdded: this._createActionByOption(StoreEventNames.ADDED),\r\n            onAppointmentUpdating: this._createActionByOption(StoreEventNames.UPDATING),\r\n            onAppointmentUpdated: this._createActionByOption(StoreEventNames.UPDATED),\r\n            onAppointmentDeleting: this._createActionByOption(StoreEventNames.DELETING),\r\n            onAppointmentDeleted: this._createActionByOption(StoreEventNames.DELETED),\r\n            onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\"),\r\n            onAppointmentTooltipShowing: this._createActionByOption(\"onAppointmentTooltipShowing\")\r\n        }\r\n    }\r\n    _getAppointmentRenderedAction() {\r\n        return this._createActionByOption(\"onAppointmentRendered\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    }\r\n    _renderFocusTarget() {\r\n        return noop()\r\n    }\r\n    _initMarkup() {\r\n        super._initMarkup();\r\n        this._validateDayHours();\r\n        this._validateCellDuration();\r\n        this._renderMainContainer();\r\n        this._renderHeader();\r\n        this._layoutManager = new AppointmentLayoutManager(this);\r\n        this._appointments = this._createComponent(\"<div>\", AppointmentCollection, this._appointmentsConfig());\r\n        this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\r\n        this._appointmentTooltip = new(this.option(\"adaptivityEnabled\") ? MobileTooltipStrategy : DesktopTooltipStrategy)(this._getAppointmentTooltipOptions());\r\n        this._createAppointmentPopupForm();\r\n        if (this._isDataSourceLoaded() || this._isDataSourceLoading()) {\r\n            this._initMarkupCore(this.option(\"loadedResources\"));\r\n            this._dataSourceChangedHandler(this._dataSource.items());\r\n            this._fireContentReadyAction()\r\n        } else {\r\n            var groups = this._getCurrentViewOption(\"groups\");\r\n            loadResources(groups, this.option(\"resources\"), this.option(\"resourceLoaderMap\")).done(resources => {\r\n                this.option(\"loadedResources\", resources);\r\n                this._initMarkupCore(resources);\r\n                this._reloadDataSource()\r\n            })\r\n        }\r\n    }\r\n    _createAppointmentPopupForm() {\r\n        var _this$_appointmentPop;\r\n        if (this._appointmentForm) {\r\n            var _this$_appointmentFor;\r\n            null === (_this$_appointmentFor = this._appointmentForm.form) || void 0 === _this$_appointmentFor ? void 0 : _this$_appointmentFor.dispose()\r\n        }\r\n        this._appointmentForm = this.createAppointmentForm();\r\n        null === (_this$_appointmentPop = this._appointmentPopup) || void 0 === _this$_appointmentPop ? void 0 : _this$_appointmentPop.dispose();\r\n        this._appointmentPopup = this.createAppointmentPopup(this._appointmentForm)\r\n    }\r\n    _renderMainContainer() {\r\n        this._mainContainer = $(\"<div>\").addClass(\"dx-scheduler-container\");\r\n        this.$element().append(this._mainContainer)\r\n    }\r\n    createAppointmentForm() {\r\n        var scheduler = {\r\n            createResourceEditorModel: () => _createResourceEditorModel(this.option(\"resources\"), this.option(\"loadedResources\")),\r\n            getDataAccessors: () => this._dataAccessors,\r\n            createComponent: (element, component, options) => this._createComponent(element, component, options),\r\n            getEditingConfig: () => this._editing,\r\n            getFirstDayOfWeek: () => this.option(\"firstDayOfWeek\"),\r\n            getStartDayHour: () => this.option(\"startDayHour\"),\r\n            getCalculatedEndDate: startDateWithStartHour => this._workSpace.calculateEndDate(startDateWithStartHour),\r\n            getTimeZoneCalculator: () => this.timeZoneCalculator\r\n        };\r\n        return new AppointmentForm(scheduler)\r\n    }\r\n    createAppointmentPopup(form) {\r\n        var scheduler = {\r\n            getElement: () => this.$element(),\r\n            createComponent: (element, component, options) => this._createComponent(element, component, options),\r\n            focus: () => this.focus(),\r\n            getResources: () => this.option(\"resources\"),\r\n            getEditingConfig: () => this._editing,\r\n            getTimeZoneCalculator: () => this.timeZoneCalculator,\r\n            getDataAccessors: () => this._dataAccessors,\r\n            getAppointmentFormOpening: () => this._actions.onAppointmentFormOpening,\r\n            processActionResult: (arg, canceled) => this._processActionResult(arg, canceled),\r\n            addAppointment: appointment => this.addAppointment(appointment),\r\n            updateAppointment: (sourceAppointment, updatedAppointment) => this.updateAppointment(sourceAppointment, updatedAppointment),\r\n            updateScrollPosition: (startDate, resourceItem, inAllDayRow) => {\r\n                this._workSpace.updateScrollPosition(startDate, resourceItem, inAllDayRow)\r\n            }\r\n        };\r\n        return new AppointmentPopup(scheduler, form)\r\n    }\r\n    _getAppointmentTooltipOptions() {\r\n        return {\r\n            createComponent: this._createComponent.bind(this),\r\n            container: this.$element(),\r\n            getScrollableContainer: this.getWorkSpaceScrollableContainer.bind(this),\r\n            addDefaultTemplates: this._templateManager.addDefaultTemplates.bind(this._templateManager),\r\n            getAppointmentTemplate: this._getAppointmentTemplate.bind(this),\r\n            showAppointmentPopup: this.showAppointmentPopup.bind(this),\r\n            checkAndDeleteAppointment: this.checkAndDeleteAppointment.bind(this),\r\n            isAppointmentInAllDayPanel: this.isAppointmentInAllDayPanel.bind(this),\r\n            createFormattedDateText: (appointment, targetedAppointment, format) => this.fire(\"getTextAndFormatDate\", appointment, targetedAppointment, format),\r\n            getAppointmentDisabled: appointment => createAppointmentAdapter(appointment, this._dataAccessors, this.timeZoneCalculator).disabled\r\n        }\r\n    }\r\n    checkAndDeleteAppointment(appointment, targetedAppointment) {\r\n        var targetedAdapter = createAppointmentAdapter(targetedAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        var deletingOptions = this.fireOnAppointmentDeleting(appointment, targetedAdapter);\r\n        this._checkRecurringAppointment(appointment, targetedAppointment, targetedAdapter.startDate, () => {\r\n            this.processDeleteAppointment(appointment, deletingOptions)\r\n        }, true)\r\n    }\r\n    _getExtraAppointmentTooltipOptions() {\r\n        return {\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            editing: this.option(\"editing\"),\r\n            offset: this.option(\"_appointmentTooltipOffset\")\r\n        }\r\n    }\r\n    isAppointmentInAllDayPanel(appointmentData) {\r\n        var workSpace = this._workSpace;\r\n        var itTakesAllDay = this.appointmentTakesAllDay(appointmentData);\r\n        return itTakesAllDay && workSpace.supportAllDayRow() && workSpace.option(\"showAllDayPanel\")\r\n    }\r\n    _initMarkupCore(resources) {\r\n        this._readyToRenderAppointments = hasWindow();\r\n        this._workSpace && this._cleanWorkspace();\r\n        this._renderWorkSpace(resources);\r\n        this._appointments.option({\r\n            fixedContainer: this._workSpace.getFixedContainer(),\r\n            allDayContainer: this._workSpace.getAllDayContainer()\r\n        });\r\n        this._waitAsyncTemplate(() => {\r\n            var _this$_workSpaceRecal2;\r\n            return null === (_this$_workSpaceRecal2 = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal2 ? void 0 : _this$_workSpaceRecal2.resolve()\r\n        });\r\n        this.createAppointmentDataProvider();\r\n        this._filterAppointmentsByDate();\r\n        this._validateKeyFieldIfAgendaExist()\r\n    }\r\n    _isDataSourceLoaded() {\r\n        return this._dataSource && this._dataSource.isLoaded()\r\n    }\r\n    _render() {\r\n        var _this$getWorkSpace;\r\n        this._toggleSmallClass();\r\n        this._toggleAdaptiveClass();\r\n        null === (_this$getWorkSpace = this.getWorkSpace()) || void 0 === _this$getWorkSpace ? void 0 : _this$getWorkSpace.updateHeaderEmptyCellWidth();\r\n        super._render()\r\n    }\r\n    _renderHeader() {\r\n        if (0 !== this.option(\"toolbar\").length) {\r\n            var $header = $(\"<div>\").appendTo(this._mainContainer);\r\n            this._header = this._createComponent($header, SchedulerHeader, this._headerConfig())\r\n        }\r\n    }\r\n    _headerConfig() {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var countConfig = this._getViewCountConfig();\r\n        var result = extend({\r\n            firstDayOfWeek: this.getFirstDayOfWeek(),\r\n            currentView: this.option(\"currentView\"),\r\n            isAdaptive: this.option(\"adaptivityEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\r\n            customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\"),\r\n            agendaDuration: currentViewOptions.agendaDuration || DEFAULT_AGENDA_DURATION\r\n        }, currentViewOptions);\r\n        result.intervalCount = countConfig.intervalCount;\r\n        result.views = this.option(\"views\");\r\n        result.min = new Date(this._dateOption(\"min\"));\r\n        result.max = new Date(this._dateOption(\"max\"));\r\n        result.currentDate = dateUtils.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n        result.onCurrentViewChange = name => {\r\n            this.option(\"currentView\", name)\r\n        }, result.onCurrentDateChange = date => {\r\n            this.option(\"currentDate\", date)\r\n        };\r\n        result.items = this.option(\"toolbar\");\r\n        result.startViewDate = this.getStartViewDate();\r\n        result.todayDate = () => {\r\n            var result = this.timeZoneCalculator.createDate(new Date, {\r\n                path: \"toGrid\"\r\n            });\r\n            return result\r\n        };\r\n        return result\r\n    }\r\n    _appointmentsConfig() {\r\n        var config = {\r\n            getResources: () => this.option(\"resources\"),\r\n            getResourceDataAccessors: this.getResourceDataAccessors.bind(this),\r\n            getAgendaResourceProcessor: () => this.agendaResourceProcessor,\r\n            getAppointmentColor: this.createGetAppointmentColor(),\r\n            getAppointmentDataProvider: () => this.appointmentDataProvider,\r\n            dataAccessors: this._dataAccessors,\r\n            observer: this,\r\n            onItemRendered: this._getAppointmentRenderedAction(),\r\n            onItemClick: this._createActionByOption(\"onAppointmentClick\"),\r\n            onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\r\n            onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            allowDrag: this._allowDragging(),\r\n            allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\r\n            allowResize: this._allowResizing(),\r\n            allowAllDayResize: this._allowAllDayResizing(),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            currentView: this.currentView,\r\n            groups: this._getCurrentViewOption(\"groups\"),\r\n            isRenovatedAppointments: this.option(\"isRenovatedAppointments\"),\r\n            timeZoneCalculator: this.timeZoneCalculator,\r\n            getResizableStep: () => this._workSpace ? this._workSpace.positionHelper.getResizableStep() : 0,\r\n            getDOMElementsMetaData: () => {\r\n                var _this$_workSpace;\r\n                return null === (_this$_workSpace = this._workSpace) || void 0 === _this$_workSpace ? void 0 : _this$_workSpace.getDOMElementsMetaData()\r\n            },\r\n            getViewDataProvider: () => {\r\n                var _this$_workSpace2;\r\n                return null === (_this$_workSpace2 = this._workSpace) || void 0 === _this$_workSpace2 ? void 0 : _this$_workSpace2.viewDataProvider\r\n            },\r\n            isVerticalViewDirection: () => \"vertical\" === this.getRenderingStrategyInstance().getDirection(),\r\n            isVerticalGroupedWorkSpace: () => this._workSpace._isVerticalGroupedWorkSpace(),\r\n            isDateAndTimeView: () => _isDateAndTimeView(this._workSpace.type),\r\n            onContentReady: () => {\r\n                var _this$_workSpace3;\r\n                null === (_this$_workSpace3 = this._workSpace) || void 0 === _this$_workSpace3 ? void 0 : _this$_workSpace3.option(\"allDayExpanded\", this._isAllDayExpanded())\r\n            }\r\n        };\r\n        return config\r\n    }\r\n    getCollectorOffset() {\r\n        if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\r\n            return this.option(\"_collectorOffset\")\r\n        } else {\r\n            return 0\r\n        }\r\n    }\r\n    getAppointmentDurationInMinutes() {\r\n        return this._getCurrentViewOption(\"cellDuration\")\r\n    }\r\n    _getCurrentViewType() {\r\n        return this.currentViewType\r\n    }\r\n    _renderWorkSpace(groups) {\r\n        var _this$_header6;\r\n        this._readyToRenderAppointments && this._toggleSmallClass();\r\n        var $workSpace = $(\"<div>\").appendTo(this._mainContainer);\r\n        var countConfig = this._getViewCountConfig();\r\n        var workSpaceComponent = VIEWS_CONFIG[this._getCurrentViewType()].workSpace;\r\n        var workSpaceConfig = this._workSpaceConfig(groups, countConfig);\r\n        this._workSpace = this._createComponent($workSpace, workSpaceComponent, workSpaceConfig);\r\n        this._allowDragging() && this._workSpace.initDragBehavior(this, this._all);\r\n        this._workSpace._attachTablesEvents();\r\n        this._workSpace.getWorkArea().append(this._appointments.$element());\r\n        this._recalculateWorkspace();\r\n        countConfig.startDate && (null === (_this$_header6 = this._header) || void 0 === _this$_header6 ? void 0 : _this$_header6.option(\"currentDate\", this._workSpace._getHeaderDate()));\r\n        this._appointments.option(\"_collectorOffset\", this.getCollectorOffset())\r\n    }\r\n    _getViewCountConfig() {\r\n        var currentView = this.option(\"currentView\");\r\n        var view = this._getViewByName(currentView);\r\n        var viewCount = view && view.intervalCount || 1;\r\n        var startDate = view && view.startDate || null;\r\n        return {\r\n            intervalCount: viewCount,\r\n            startDate: startDate\r\n        }\r\n    }\r\n    _getViewByName(name) {\r\n        var views = this.option(\"views\");\r\n        for (var i = 0; i < views.length; i++) {\r\n            if (views[i].name === name || views[i].type === name || views[i] === name) {\r\n                return views[i]\r\n            }\r\n        }\r\n    }\r\n    _recalculateWorkspace() {\r\n        this._workSpaceRecalculation = new Deferred;\r\n        this._waitAsyncTemplate(() => {\r\n            triggerResizeEvent(this._workSpace.$element());\r\n            this._workSpace._refreshDateTimeIndication()\r\n        })\r\n    }\r\n    _workSpaceConfig(groups, countConfig) {\r\n        var _currentViewOptions$s2;\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var scrolling = this.option(\"scrolling\");\r\n        var isVirtualScrolling = \"virtual\" === scrolling.mode || \"virtual\" === (null === (_currentViewOptions$s2 = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s2 ? void 0 : _currentViewOptions$s2.mode);\r\n        var horizontalVirtualScrollingAllowed = isVirtualScrolling && (!isDefined(scrolling.orientation) || [\"horizontal\", \"both\"].filter(item => {\r\n            var _currentViewOptions$s3;\r\n            return scrolling.orientation === item || (null === (_currentViewOptions$s3 = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s3 ? void 0 : _currentViewOptions$s3.orientation) === item\r\n        }).length > 0);\r\n        var crossScrollingEnabled = this.option(\"crossScrollingEnabled\") || horizontalVirtualScrollingAllowed || isTimelineView(this.currentViewType);\r\n        var result = extend({\r\n            resources: this.option(\"resources\"),\r\n            loadedResources: this.option(\"loadedResources\"),\r\n            getFilteredItems: () => this.filteredItems,\r\n            getResourceDataAccessors: this.getResourceDataAccessors.bind(this),\r\n            noDataText: this.option(\"noDataText\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            startDayHour: this.option(\"startDayHour\"),\r\n            endDayHour: this.option(\"endDayHour\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            accessKey: this.option(\"accessKey\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            cellDuration: this.option(\"cellDuration\"),\r\n            showAllDayPanel: this.option(\"showAllDayPanel\"),\r\n            showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\r\n            indicatorTime: this.option(\"indicatorTime\"),\r\n            indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\r\n            shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\r\n            allDayExpanded: this._appointments.option(\"items\"),\r\n            crossScrollingEnabled: crossScrollingEnabled,\r\n            dataCellTemplate: this.option(\"dataCellTemplate\"),\r\n            timeCellTemplate: this.option(\"timeCellTemplate\"),\r\n            resourceCellTemplate: this.option(\"resourceCellTemplate\"),\r\n            dateCellTemplate: this.option(\"dateCellTemplate\"),\r\n            allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\r\n            selectedCellData: this.option(\"selectedCellData\"),\r\n            onSelectionChanged: args => {\r\n                this.option(\"selectedCellData\", args.selectedCellData)\r\n            },\r\n            groupByDate: this._getCurrentViewOption(\"groupByDate\"),\r\n            scrolling: scrolling,\r\n            draggingMode: this.option(\"_draggingMode\"),\r\n            timeZoneCalculator: this.timeZoneCalculator,\r\n            schedulerHeight: this.option(\"height\"),\r\n            schedulerWidth: this.option(\"width\"),\r\n            allDayPanelMode: this.option(\"allDayPanelMode\"),\r\n            onSelectedCellsClick: this.showAddAppointmentPopup.bind(this),\r\n            onRenderAppointments: this._renderAppointments.bind(this),\r\n            onShowAllDayPanel: value => this.option(\"showAllDayPanel\", value),\r\n            getHeaderHeight: () => utils.DOM.getHeaderHeight(this._header),\r\n            onScrollEnd: () => this._appointments.updateResizableArea(),\r\n            renovateRender: this._isRenovatedRender(isVirtualScrolling),\r\n            isRenovatedAppointments: this.option(\"isRenovatedAppointments\")\r\n        }, currentViewOptions);\r\n        result.observer = this;\r\n        result.intervalCount = countConfig.intervalCount;\r\n        result.startDate = countConfig.startDate;\r\n        result.groups = groups;\r\n        result.onCellClick = this._createActionByOption(\"onCellClick\");\r\n        result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\r\n        result.currentDate = dateUtils.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n        result.hoursInterval = result.cellDuration / 60;\r\n        result.allDayExpanded = false;\r\n        result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\r\n        result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\r\n        result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\r\n        result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\r\n        result.getAppointmentDataProvider = () => this.appointmentDataProvider;\r\n        return result\r\n    }\r\n    _isRenovatedRender(isVirtualScrolling) {\r\n        return this.option(\"renovateRender\") && hasWindow() || isVirtualScrolling\r\n    }\r\n    _waitAsyncTemplate(callback) {\r\n        if (this._options.silent(\"templatesRenderAsynchronously\")) {\r\n            var timer = setTimeout(() => {\r\n                callback();\r\n                clearTimeout(timer)\r\n            });\r\n            this._asyncTemplatesTimers.push(timer)\r\n        } else {\r\n            callback()\r\n        }\r\n    }\r\n    _getCurrentViewOptions() {\r\n        return this.currentView\r\n    }\r\n    _getCurrentViewOption(optionName) {\r\n        if (this.currentView && void 0 !== this.currentView[optionName]) {\r\n            return this.currentView[optionName]\r\n        }\r\n        return this.option(optionName)\r\n    }\r\n    _getAppointmentTemplate(optionName) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (currentViewOptions && currentViewOptions[optionName]) {\r\n            return this._getTemplate(currentViewOptions[optionName])\r\n        }\r\n        return this._getTemplateByOption(optionName)\r\n    }\r\n    _updateOption(viewName, optionName, value) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (!currentViewOptions || !isDefined(currentViewOptions[optionName])) {\r\n            this[\"_\" + viewName].option(optionName, value)\r\n        }\r\n    }\r\n    _refreshWorkSpace(groups) {\r\n        this._cleanWorkspace();\r\n        delete this._workSpace;\r\n        this._renderWorkSpace(groups);\r\n        if (this._readyToRenderAppointments) {\r\n            this._appointments.option({\r\n                fixedContainer: this._workSpace.getFixedContainer(),\r\n                allDayContainer: this._workSpace.getAllDayContainer()\r\n            });\r\n            this._waitAsyncTemplate(() => this._workSpaceRecalculation.resolve())\r\n        }\r\n    }\r\n    _cleanWorkspace() {\r\n        this._appointments.$element().detach();\r\n        this._workSpace._dispose();\r\n        this._workSpace.$element().remove();\r\n        this.option(\"selectedCellData\", [])\r\n    }\r\n    getWorkSpaceScrollable() {\r\n        return this._workSpace.getScrollable()\r\n    }\r\n    getWorkSpaceScrollableContainer() {\r\n        return this._workSpace.getScrollableContainer()\r\n    }\r\n    getWorkSpace() {\r\n        return this._workSpace\r\n    }\r\n    getHeader() {\r\n        return this._header\r\n    }\r\n    _cleanPopup() {\r\n        var _this$_appointmentPop2;\r\n        null === (_this$_appointmentPop2 = this._appointmentPopup) || void 0 === _this$_appointmentPop2 ? void 0 : _this$_appointmentPop2.dispose()\r\n    }\r\n    _checkRecurringAppointment(rawAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing, dragEvent, recurrenceEditMode) {\r\n        var recurrenceRule = ExpressionUtils.getField(this._dataAccessors, \"recurrenceRule\", rawAppointment);\r\n        if (!getRecurrenceProcessor().evalRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\r\n            callback();\r\n            return\r\n        }\r\n        var editMode = recurrenceEditMode || this.option(\"recurrenceEditMode\");\r\n        switch (editMode) {\r\n            case \"series\":\r\n                callback();\r\n                break;\r\n            case \"occurrence\":\r\n                this._excludeAppointmentFromSeries(rawAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\r\n                break;\r\n            default:\r\n                if (dragEvent) {\r\n                    dragEvent.cancel = new Deferred\r\n                }\r\n                this._showRecurrenceChangeConfirm(isDeleted).done(editingMode => {\r\n                    editingMode === RECURRENCE_EDITING_MODE.SERIES && callback();\r\n                    editingMode === RECURRENCE_EDITING_MODE.OCCURENCE && this._excludeAppointmentFromSeries(rawAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent)\r\n                }).fail(() => this._appointments.moveAppointmentBack(dragEvent))\r\n        }\r\n    }\r\n    _excludeAppointmentFromSeries(rawAppointment, newRawAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent) {\r\n        var appointment = excludeFromRecurrence(rawAppointment, exceptionDate, this._dataAccessors, this._timeZoneCalculator);\r\n        var singleRawAppointment = _extends({}, newRawAppointment);\r\n        delete singleRawAppointment[this._dataAccessors.expr.recurrenceExceptionExpr];\r\n        delete singleRawAppointment[this._dataAccessors.expr.recurrenceRuleExpr];\r\n        var keyPropertyName = this.appointmentDataProvider.keyName;\r\n        delete singleRawAppointment[keyPropertyName];\r\n        var canCreateNewAppointment = !isDeleted && !isPopupEditing;\r\n        if (canCreateNewAppointment) {\r\n            this.addAppointment(singleRawAppointment)\r\n        }\r\n        if (isPopupEditing) {\r\n            this._appointmentPopup.show(singleRawAppointment, {\r\n                isToolbarVisible: true,\r\n                action: ACTION_TO_APPOINTMENT.EXCLUDE_FROM_SERIES,\r\n                excludeInfo: {\r\n                    sourceAppointment: rawAppointment,\r\n                    updatedAppointment: appointment.source()\r\n                }\r\n            });\r\n            this._editAppointmentData = rawAppointment\r\n        } else {\r\n            this._updateAppointment(rawAppointment, appointment.source(), () => {\r\n                this._appointments.moveAppointmentBack(dragEvent)\r\n            }, dragEvent)\r\n        }\r\n    }\r\n    _createRecurrenceException(appointment, exceptionDate) {\r\n        var result = [];\r\n        if (appointment.recurrenceException) {\r\n            result.push(appointment.recurrenceException)\r\n        }\r\n        result.push(this._getSerializedDate(exceptionDate, appointment.startDate, appointment.allDay));\r\n        return result.join()\r\n    }\r\n    _getSerializedDate(date, startDate, isAllDay) {\r\n        isAllDay && date.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds(), startDate.getMilliseconds());\r\n        return dateSerialization.serializeDate(date, UTC_FULL_DATE_FORMAT)\r\n    }\r\n    _showRecurrenceChangeConfirm(isDeleted) {\r\n        var message = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\r\n        var seriesText = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\r\n        var occurrenceText = messageLocalization.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\r\n        this._recurrenceDialog = customDialog({\r\n            messageHtml: message,\r\n            showCloseButton: true,\r\n            showTitle: true,\r\n            buttons: [{\r\n                text: seriesText,\r\n                onClick: function() {\r\n                    return RECURRENCE_EDITING_MODE.SERIES\r\n                }\r\n            }, {\r\n                text: occurrenceText,\r\n                onClick: function() {\r\n                    return RECURRENCE_EDITING_MODE.OCCURENCE\r\n                }\r\n            }],\r\n            popupOptions: {\r\n                wrapperAttr: {\r\n                    class: \"dx-dialog\"\r\n                }\r\n            }\r\n        });\r\n        return this._recurrenceDialog.show()\r\n    }\r\n    _getUpdatedData(rawAppointment) {\r\n        var getConvertedFromGrid = date => date ? this.timeZoneCalculator.createDate(date, {\r\n            path: \"fromGrid\"\r\n        }) : void 0;\r\n        var isValidDate = date => !isNaN(new Date(date).getTime());\r\n        var targetCell = this.getTargetCellData();\r\n        var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        var cellStartDate = getConvertedFromGrid(targetCell.startDate);\r\n        var cellEndDate = getConvertedFromGrid(targetCell.endDate);\r\n        var appointmentStartDate = new Date(appointment.startDate);\r\n        var appointmentEndDate = new Date(appointment.endDate);\r\n        var resultedStartDate = cellStartDate || appointmentStartDate;\r\n        if (!isValidDate(appointmentStartDate)) {\r\n            appointmentStartDate = resultedStartDate\r\n        }\r\n        if (!isValidDate(appointmentEndDate)) {\r\n            appointmentEndDate = cellEndDate\r\n        }\r\n        var duration = appointmentEndDate.getTime() - appointmentStartDate.getTime();\r\n        var isKeepAppointmentHours = this._workSpace.keepOriginalHours() && isValidDate(appointment.startDate) && isValidDate(cellStartDate);\r\n        if (isKeepAppointmentHours) {\r\n            var {\r\n                trimTime: trimTime\r\n            } = dateUtils;\r\n            var startDate = this.timeZoneCalculator.createDate(appointment.startDate, {\r\n                path: \"toGrid\"\r\n            });\r\n            var timeInMs = startDate.getTime() - trimTime(startDate).getTime();\r\n            resultedStartDate = new Date(trimTime(targetCell.startDate).getTime() + timeInMs);\r\n            resultedStartDate = this.timeZoneCalculator.createDate(resultedStartDate, {\r\n                path: \"fromGrid\"\r\n            })\r\n        }\r\n        var result = createAppointmentAdapter({}, this._dataAccessors, this.timeZoneCalculator);\r\n        if (void 0 !== targetCell.allDay) {\r\n            result.allDay = targetCell.allDay\r\n        }\r\n        result.startDate = resultedStartDate;\r\n        var resultedEndDate = new Date(resultedStartDate.getTime() + duration);\r\n        if (this.appointmentTakesAllDay(rawAppointment) && !result.allDay && this._workSpace.supportAllDayRow()) {\r\n            resultedEndDate = this._workSpace.calculateEndDate(resultedStartDate)\r\n        }\r\n        if (appointment.allDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\r\n            var dateCopy = new Date(resultedStartDate);\r\n            dateCopy.setHours(0);\r\n            resultedEndDate = new Date(dateCopy.getTime() + duration);\r\n            if (0 !== resultedEndDate.getHours()) {\r\n                resultedEndDate.setHours(this._getCurrentViewOption(\"endDayHour\"))\r\n            }\r\n        }\r\n        var timeZoneOffset = timeZoneUtils.getTimezoneOffsetChangeInMs(appointmentStartDate, appointmentEndDate, resultedStartDate, resultedEndDate);\r\n        result.endDate = new Date(resultedEndDate.getTime() - timeZoneOffset);\r\n        var rawResult = result.source();\r\n        setResourceToAppointment(this.option(\"resources\"), this.getResourceDataAccessors(), rawResult, targetCell.groups);\r\n        return rawResult\r\n    }\r\n    getTargetedAppointment(appointment, element) {\r\n        var settings = utils.dataAccessors.getAppointmentSettings(element);\r\n        var info = utils.dataAccessors.getAppointmentInfo(element);\r\n        var appointmentIndex = $(element).data(this._appointments._itemIndexKey());\r\n        var adapter = createAppointmentAdapter(appointment, this._dataAccessors, this.timeZoneCalculator);\r\n        var targetedAdapter = adapter.clone();\r\n        if (this._isAgenda() && adapter.isRecurrent) {\r\n            var agendaSettings = settings.agendaSettings;\r\n            targetedAdapter.startDate = ExpressionUtils.getField(this._dataAccessors, \"startDate\", agendaSettings);\r\n            targetedAdapter.endDate = ExpressionUtils.getField(this._dataAccessors, \"endDate\", agendaSettings)\r\n        } else if (settings) {\r\n            targetedAdapter.startDate = info ? info.sourceAppointment.startDate : adapter.startDate;\r\n            targetedAdapter.endDate = info ? info.sourceAppointment.endDate : adapter.endDate\r\n        }\r\n        var rawTargetedAppointment = targetedAdapter.source();\r\n        if (element) {\r\n            this.setTargetedAppointmentResources(rawTargetedAppointment, element, appointmentIndex)\r\n        }\r\n        if (info) {\r\n            rawTargetedAppointment.displayStartDate = new Date(info.appointment.startDate);\r\n            rawTargetedAppointment.displayEndDate = new Date(info.appointment.endDate)\r\n        }\r\n        return rawTargetedAppointment\r\n    }\r\n    subscribe(subject, action) {\r\n        this._subscribes[subject] = subscribes[subject] = action\r\n    }\r\n    fire(subject) {\r\n        var callback = this._subscribes[subject];\r\n        var args = Array.prototype.slice.call(arguments);\r\n        if (!isFunction(callback)) {\r\n            throw errors.Error(\"E1031\", subject)\r\n        }\r\n        return callback.apply(this, args.slice(1))\r\n    }\r\n    getTargetCellData() {\r\n        return this._workSpace.getDataByDroppableCell()\r\n    }\r\n    _updateAppointment(target, rawAppointment, onUpdatePrevented, dragEvent) {\r\n        var updatingOptions = {\r\n            newData: rawAppointment,\r\n            oldData: extend({}, target),\r\n            cancel: false\r\n        };\r\n        var performFailAction = function(err) {\r\n            if (onUpdatePrevented) {\r\n                onUpdatePrevented.call(this)\r\n            }\r\n            if (err && \"Error\" === err.name) {\r\n                throw err\r\n            }\r\n        }.bind(this);\r\n        this._actions[StoreEventNames.UPDATING](updatingOptions);\r\n        if (dragEvent && !isDeferred(dragEvent.cancel)) {\r\n            dragEvent.cancel = new Deferred\r\n        }\r\n        return this._processActionResult(updatingOptions, (function(canceled) {\r\n            var deferred = new Deferred;\r\n            if (!canceled) {\r\n                this._expandAllDayPanel(rawAppointment);\r\n                try {\r\n                    deferred = this.appointmentDataProvider.update(target, rawAppointment).done(() => {\r\n                        dragEvent && dragEvent.cancel.resolve(false)\r\n                    }).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.UPDATED, storeAppointment)).fail(() => performFailAction())\r\n                } catch (err) {\r\n                    performFailAction(err);\r\n                    deferred.resolve()\r\n                }\r\n            } else {\r\n                performFailAction();\r\n                deferred.resolve()\r\n            }\r\n            return deferred.promise()\r\n        }))\r\n    }\r\n    _processActionResult(actionOptions, callback) {\r\n        var deferred = new Deferred;\r\n        var resolveCallback = callbackResult => {\r\n            when(fromPromise(callbackResult)).always(deferred.resolve)\r\n        };\r\n        if (isPromise(actionOptions.cancel)) {\r\n            when(fromPromise(actionOptions.cancel)).always(cancel => {\r\n                if (!isDefined(cancel)) {\r\n                    cancel = \"rejected\" === actionOptions.cancel.state()\r\n                }\r\n                resolveCallback(callback.call(this, cancel))\r\n            })\r\n        } else {\r\n            resolveCallback(callback.call(this, actionOptions.cancel))\r\n        }\r\n        return deferred.promise()\r\n    }\r\n    _expandAllDayPanel(appointment) {\r\n        if (!this._isAllDayExpanded() && this.appointmentTakesAllDay(appointment)) {\r\n            this._workSpace.option(\"allDayExpanded\", true)\r\n        }\r\n    }\r\n    _onDataPromiseCompleted(handlerName, storeAppointment, appointment) {\r\n        var args = {\r\n            appointmentData: appointment || storeAppointment\r\n        };\r\n        if (storeAppointment instanceof Error) {\r\n            args.error = storeAppointment\r\n        } else {\r\n            this._appointmentPopup.visible && this._appointmentPopup.hide()\r\n        }\r\n        this._actions[handlerName](args);\r\n        this._fireContentReadyAction()\r\n    }\r\n    getAppointmentsInstance() {\r\n        return this._appointments\r\n    }\r\n    getLayoutManager() {\r\n        return this._layoutManager\r\n    }\r\n    getRenderingStrategyInstance() {\r\n        return this.getLayoutManager().getRenderingStrategyInstance()\r\n    }\r\n    getActions() {\r\n        return this._actions\r\n    }\r\n    appointmentTakesAllDay(rawAppointment) {\r\n        var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        return getAppointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"), this._getCurrentViewOption(\"allDayPanelMode\"))\r\n    }\r\n    dayHasAppointment(day, rawAppointment, trimTime) {\r\n        var getConvertedToTimeZone = date => this.timeZoneCalculator.createDate(date, {\r\n            path: \"toGrid\"\r\n        });\r\n        var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        var startDate = new Date(appointment.startDate);\r\n        var endDate = new Date(appointment.endDate);\r\n        startDate = getConvertedToTimeZone(startDate);\r\n        endDate = getConvertedToTimeZone(endDate);\r\n        if (day.getTime() === endDate.getTime()) {\r\n            return startDate.getTime() === endDate.getTime()\r\n        }\r\n        if (trimTime) {\r\n            day = dateUtils.trimTime(day);\r\n            startDate = dateUtils.trimTime(startDate);\r\n            endDate = dateUtils.trimTime(endDate)\r\n        }\r\n        var dayTimeStamp = day.getTime();\r\n        var startDateTimeStamp = startDate.getTime();\r\n        var endDateTimeStamp = endDate.getTime();\r\n        return startDateTimeStamp <= dayTimeStamp && dayTimeStamp <= endDateTimeStamp\r\n    }\r\n    setTargetedAppointmentResources(rawAppointment, element, appointmentIndex) {\r\n        var groups = this._getCurrentViewOption(\"groups\");\r\n        if (null !== groups && void 0 !== groups && groups.length) {\r\n            var resourcesSetter = this.getResourceDataAccessors().setter;\r\n            var workSpace = this._workSpace;\r\n            var getGroups;\r\n            var setResourceCallback;\r\n            if (this._isAgenda()) {\r\n                getGroups = function() {\r\n                    var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\r\n                    return getCellGroups(apptSettings[0].groupIndex, this.getWorkSpace().option(\"groups\"))\r\n                };\r\n                setResourceCallback = function(_, group) {\r\n                    resourcesSetter[group.name](rawAppointment, group.id)\r\n                }\r\n            } else {\r\n                getGroups = function() {\r\n                    var setting = utils.dataAccessors.getAppointmentSettings(element) || {};\r\n                    return workSpace.getCellDataByCoordinates({\r\n                        left: setting.left,\r\n                        top: setting.top\r\n                    }).groups\r\n                };\r\n                setResourceCallback = function(field, value) {\r\n                    resourcesSetter[field](rawAppointment, value)\r\n                }\r\n            }\r\n            each(getGroups.call(this), setResourceCallback)\r\n        }\r\n    }\r\n    getStartViewDate() {\r\n        var _this$_workSpace4;\r\n        return null === (_this$_workSpace4 = this._workSpace) || void 0 === _this$_workSpace4 ? void 0 : _this$_workSpace4.getStartViewDate()\r\n    }\r\n    getEndViewDate() {\r\n        return this._workSpace.getEndViewDate()\r\n    }\r\n    showAddAppointmentPopup(cellData, cellGroups) {\r\n        var appointmentAdapter = createAppointmentAdapter({}, this._dataAccessors, this.timeZoneCalculator);\r\n        appointmentAdapter.allDay = cellData.allDay;\r\n        appointmentAdapter.startDate = this.timeZoneCalculator.createDate(cellData.startDate, {\r\n            path: \"fromGrid\"\r\n        });\r\n        appointmentAdapter.endDate = this.timeZoneCalculator.createDate(cellData.endDate, {\r\n            path: \"fromGrid\"\r\n        });\r\n        var resultAppointment = extend(appointmentAdapter.source(), cellGroups);\r\n        this.showAppointmentPopup(resultAppointment, true)\r\n    }\r\n    showAppointmentPopup(rawAppointment, createNewAppointment, rawTargetedAppointment) {\r\n        var newRawTargetedAppointment = _extends({}, rawTargetedAppointment);\r\n        if (newRawTargetedAppointment) {\r\n            delete newRawTargetedAppointment.displayStartDate;\r\n            delete newRawTargetedAppointment.displayEndDate\r\n        }\r\n        var appointment = createAppointmentAdapter(newRawTargetedAppointment || rawAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        var newTargetedAppointment = extend({}, rawAppointment, newRawTargetedAppointment);\r\n        var isCreateAppointment = null !== createNewAppointment && void 0 !== createNewAppointment ? createNewAppointment : isEmptyObject(rawAppointment);\r\n        if (isEmptyObject(rawAppointment)) {\r\n            rawAppointment = this.createPopupAppointment()\r\n        }\r\n        if (isCreateAppointment) {\r\n            delete this._editAppointmentData;\r\n            this._editing.allowAdding && this._appointmentPopup.show(rawAppointment, {\r\n                isToolbarVisible: true,\r\n                action: ACTION_TO_APPOINTMENT.CREATE\r\n            })\r\n        } else {\r\n            this._checkRecurringAppointment(rawAppointment, newTargetedAppointment, appointment.startDate, () => {\r\n                this._editAppointmentData = rawAppointment;\r\n                this._appointmentPopup.show(rawAppointment, {\r\n                    isToolbarVisible: this._editing.allowUpdating,\r\n                    action: ACTION_TO_APPOINTMENT.UPDATE\r\n                })\r\n            }, false, true)\r\n        }\r\n    }\r\n    createPopupAppointment() {\r\n        var result = {};\r\n        var toMs = dateUtils.dateToMilliseconds;\r\n        var startDate = new Date(this.option(\"currentDate\"));\r\n        var endDate = new Date(startDate.getTime() + this.option(\"cellDuration\") * toMs(\"minute\"));\r\n        ExpressionUtils.setField(this._dataAccessors, \"startDate\", result, startDate);\r\n        ExpressionUtils.setField(this._dataAccessors, \"endDate\", result, endDate);\r\n        return result\r\n    }\r\n    hideAppointmentPopup(saveChanges) {\r\n        var _this$_appointmentPop3;\r\n        if (null !== (_this$_appointmentPop3 = this._appointmentPopup) && void 0 !== _this$_appointmentPop3 && _this$_appointmentPop3.visible) {\r\n            saveChanges && this._appointmentPopup.saveChangesAsync();\r\n            this._appointmentPopup.hide()\r\n        }\r\n    }\r\n    showAppointmentTooltip(appointment, element, targetedAppointment) {\r\n        if (appointment) {\r\n            var settings = utils.dataAccessors.getAppointmentSettings(element);\r\n            var appointmentConfig = {\r\n                itemData: targetedAppointment || appointment,\r\n                groupIndex: null === settings || void 0 === settings ? void 0 : settings.groupIndex,\r\n                groups: this.option(\"groups\")\r\n            };\r\n            var _getAppointmentColor = this.createGetAppointmentColor();\r\n            var deferredColor = _getAppointmentColor(appointmentConfig);\r\n            var info = new AppointmentTooltipInfo(appointment, targetedAppointment, deferredColor);\r\n            this.showAppointmentTooltipCore(element, [info])\r\n        }\r\n    }\r\n    createGetAppointmentColor() {\r\n        return appointmentConfig => {\r\n            var resourceConfig = {\r\n                resources: this.option(\"resources\"),\r\n                dataAccessors: this.getResourceDataAccessors(),\r\n                loadedResources: this.option(\"loadedResources\"),\r\n                resourceLoaderMap: this.option(\"resourceLoaderMap\")\r\n            };\r\n            return getAppointmentColor(resourceConfig, appointmentConfig)\r\n        }\r\n    }\r\n    showAppointmentTooltipCore(target, data, options) {\r\n        var arg = {\r\n            cancel: false,\r\n            appointments: data.map(item => {\r\n                var result = {\r\n                    appointmentData: item.appointment,\r\n                    currentAppointmentData: _extends({}, item.targetedAppointment),\r\n                    color: item.color\r\n                };\r\n                if (item.settings.info) {\r\n                    var {\r\n                        startDate: startDate,\r\n                        endDate: endDate\r\n                    } = item.settings.info.appointment;\r\n                    result.currentAppointmentData.displayStartDate = startDate;\r\n                    result.currentAppointmentData.displayEndDate = endDate\r\n                }\r\n                return result\r\n            }),\r\n            targetElement: target\r\n        };\r\n        this._createActionByOption(\"onAppointmentTooltipShowing\")(arg);\r\n        if (this._appointmentTooltip.isAlreadyShown(target)) {\r\n            this.hideAppointmentTooltip()\r\n        } else {\r\n            this._processActionResult(arg, canceled => {\r\n                !canceled && this._appointmentTooltip.show(target, data, _extends({}, this._getExtraAppointmentTooltipOptions(), options))\r\n            })\r\n        }\r\n    }\r\n    hideAppointmentTooltip() {\r\n        this._appointmentTooltip && this._appointmentTooltip.hide()\r\n    }\r\n    scrollToTime(hours, minutes, date) {\r\n        errors.log(\"W0002\", \"dxScheduler\", \"scrollToTime\", \"21.1\", 'Use the \"scrollTo\" method instead');\r\n        this._workSpace.scrollToTime(hours, minutes, date)\r\n    }\r\n    scrollTo(date, groups, allDay) {\r\n        this._workSpace.scrollTo(date, groups, allDay)\r\n    }\r\n    _isHorizontalVirtualScrolling() {\r\n        var scrolling = this.option(\"scrolling\");\r\n        var {\r\n            orientation: orientation,\r\n            mode: mode\r\n        } = scrolling;\r\n        var isVirtualScrolling = \"virtual\" === mode;\r\n        return isVirtualScrolling && (\"horizontal\" === orientation || \"both\" === orientation)\r\n    }\r\n    addAppointment(rawAppointment) {\r\n        var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, this.timeZoneCalculator);\r\n        appointment.text = appointment.text || \"\";\r\n        var serializedAppointment = appointment.source(true);\r\n        var addingOptions = {\r\n            appointmentData: serializedAppointment,\r\n            cancel: false\r\n        };\r\n        this._actions[StoreEventNames.ADDING](addingOptions);\r\n        return this._processActionResult(addingOptions, canceled => {\r\n            if (canceled) {\r\n                return (new Deferred).resolve()\r\n            }\r\n            this._expandAllDayPanel(serializedAppointment);\r\n            return this.appointmentDataProvider.add(serializedAppointment).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.ADDED, storeAppointment))\r\n        })\r\n    }\r\n    updateAppointment(target, appointment) {\r\n        return this._updateAppointment(target, appointment)\r\n    }\r\n    deleteAppointment(rawAppointment) {\r\n        var deletingOptions = this.fireOnAppointmentDeleting(rawAppointment);\r\n        this.processDeleteAppointment(rawAppointment, deletingOptions)\r\n    }\r\n    fireOnAppointmentDeleting(rawAppointment, targetedAppointmentData) {\r\n        var deletingOptions = {\r\n            appointmentData: rawAppointment,\r\n            targetedAppointmentData: targetedAppointmentData,\r\n            cancel: false\r\n        };\r\n        this._actions[StoreEventNames.DELETING](deletingOptions);\r\n        return deletingOptions\r\n    }\r\n    processDeleteAppointment(rawAppointment, deletingOptions) {\r\n        this._processActionResult(deletingOptions, (function(canceled) {\r\n            if (!canceled) {\r\n                this.appointmentDataProvider.remove(rawAppointment).always(storeAppointment => this._onDataPromiseCompleted(StoreEventNames.DELETED, storeAppointment, rawAppointment))\r\n            }\r\n        }))\r\n    }\r\n    deleteRecurrence(appointment, date, recurrenceEditMode) {\r\n        this._checkRecurringAppointment(appointment, {}, date, () => {\r\n            this.processDeleteAppointment(appointment, {\r\n                cancel: false\r\n            })\r\n        }, true, false, null, recurrenceEditMode)\r\n    }\r\n    focus() {\r\n        if (this._editAppointmentData) {\r\n            this._appointments.focus()\r\n        } else {\r\n            this._workSpace.focus()\r\n        }\r\n    }\r\n    getFirstDayOfWeek() {\r\n        return isDefined(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : dateLocalization.firstDayOfWeekIndex()\r\n    }\r\n    _validateKeyFieldIfAgendaExist() {\r\n        if (!this.appointmentDataProvider.isDataSourceInit) {\r\n            return\r\n        }\r\n        var hasAgendaView = !!this._getViewByName(\"agenda\");\r\n        var isKeyExist = !!this.appointmentDataProvider.keyName;\r\n        if (hasAgendaView && !isKeyExist) {\r\n            errors.log(\"W1023\")\r\n        }\r\n    }\r\n    _validateCellDuration() {\r\n        var endDayHour = this._getCurrentViewOption(\"endDayHour\");\r\n        var startDayHour = this._getCurrentViewOption(\"startDayHour\");\r\n        var cellDuration = this._getCurrentViewOption(\"cellDuration\");\r\n        if ((endDayHour - startDayHour) * MINUTES_IN_HOUR % cellDuration !== 0) {\r\n            errors.log(\"W1015\")\r\n        }\r\n    }\r\n    _validateDayHours() {\r\n        var startDayHour = this._getCurrentViewOption(\"startDayHour\");\r\n        var endDayHour = this._getCurrentViewOption(\"endDayHour\");\r\n        validateDayHours(startDayHour, endDayHour)\r\n    }\r\n    _getDragBehavior() {\r\n        return this._workSpace.dragBehavior\r\n    }\r\n}\r\nScheduler.include(DataHelperMixin);\r\nregisterComponent(\"dxScheduler\", Scheduler);\r\nexport default Scheduler;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}