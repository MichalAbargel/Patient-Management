{"ast":null,"code":"/**\r\n * DevExtreme (esm/__internal/scheduler/appointments/data_provider/m_appointment_data_source.js)\r\n * Version: 23.1.5\r\n * Build date: Wed Aug 30 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { Deferred } from \"../../../../core/utils/deferred\";\nvar STORE_EVENTS = {\n  updating: \"updating\",\n  push: \"push\"\n};\nexport class AppointmentDataSource {\n  constructor(dataSource) {\n    this.setDataSource(dataSource);\n    this._updatedAppointmentKeys = [];\n  }\n  get keyName() {\n    var store = this._dataSource.store();\n    return store.key();\n  }\n  get isDataSourceInit() {\n    return !!this._dataSource;\n  }\n  _getStoreKey(target) {\n    var store = this._dataSource.store();\n    return store.keyOf(target);\n  }\n  setDataSource(dataSource) {\n    this._dataSource = dataSource;\n    this.cleanState();\n    this._initStoreChangeHandlers();\n  }\n  _initStoreChangeHandlers() {\n    var dataSource = this._dataSource;\n    var store = null === dataSource || void 0 === dataSource ? void 0 : dataSource.store();\n    if (store) {\n      store.on(STORE_EVENTS.updating, key => {\n        var keyName = store.key();\n        if (keyName) {\n          this._updatedAppointmentKeys.push({\n            key: keyName,\n            value: key\n          });\n        } else {\n          this._updatedAppointment = key;\n        }\n      });\n      store.on(STORE_EVENTS.push, pushItems => {\n        var items = dataSource.items();\n        var keyName = store.key();\n        pushItems.forEach(pushItem => {\n          var itemExists = 0 !== items.filter(item => item[keyName] === pushItem.key).length;\n          if (itemExists) {\n            this._updatedAppointmentKeys.push({\n              key: keyName,\n              value: pushItem.key\n            });\n          } else {\n            var {\n              data: data\n            } = pushItem;\n            data && items.push(data);\n          }\n        });\n        dataSource.load();\n      });\n    }\n  }\n  getUpdatedAppointment() {\n    return this._updatedAppointment;\n  }\n  getUpdatedAppointmentKeys() {\n    return this._updatedAppointmentKeys;\n  }\n  cleanState() {\n    this._updatedAppointment = null;\n    this._updatedAppointmentKeys = [];\n  }\n  add(rawAppointment) {\n    return this._dataSource.store().insert(rawAppointment).done(() => this._dataSource.load());\n  }\n  update(target, data) {\n    var key = this._getStoreKey(target);\n    var d = new Deferred();\n    this._dataSource.store().update(key, data).done(result => this._dataSource.load().done(() => d.resolve(result)).fail(d.reject)).fail(d.reject);\n    return d.promise();\n  }\n  remove(rawAppointment) {\n    var key = this._getStoreKey(rawAppointment);\n    return this._dataSource.store().remove(key).done(() => this._dataSource.load());\n  }\n  destroy() {\n    var _a;\n    var store = null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.store();\n    if (store) {\n      store.off(STORE_EVENTS.updating);\n      store.off(STORE_EVENTS.push);\n    }\n  }\n}","map":{"version":3,"names":["Deferred","STORE_EVENTS","updating","push","AppointmentDataSource","constructor","dataSource","setDataSource","_updatedAppointmentKeys","keyName","store","_dataSource","key","isDataSourceInit","_getStoreKey","target","keyOf","cleanState","_initStoreChangeHandlers","on","value","_updatedAppointment","pushItems","items","forEach","pushItem","itemExists","filter","item","length","data","load","getUpdatedAppointment","getUpdatedAppointmentKeys","add","rawAppointment","insert","done","update","d","result","resolve","fail","reject","promise","remove","destroy","_a","off"],"sources":["C:/Users/Michal Abargel/Desktop/FULLSTACK_PROJECTS/PrivateLessones/PL/client/gui/node_modules/devextreme/esm/__internal/scheduler/appointments/data_provider/m_appointment_data_source.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/__internal/scheduler/appointments/data_provider/m_appointment_data_source.js)\r\n * Version: 23.1.5\r\n * Build date: Wed Aug 30 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    Deferred\r\n} from \"../../../../core/utils/deferred\";\r\nvar STORE_EVENTS = {\r\n    updating: \"updating\",\r\n    push: \"push\"\r\n};\r\nexport class AppointmentDataSource {\r\n    constructor(dataSource) {\r\n        this.setDataSource(dataSource);\r\n        this._updatedAppointmentKeys = []\r\n    }\r\n    get keyName() {\r\n        var store = this._dataSource.store();\r\n        return store.key()\r\n    }\r\n    get isDataSourceInit() {\r\n        return !!this._dataSource\r\n    }\r\n    _getStoreKey(target) {\r\n        var store = this._dataSource.store();\r\n        return store.keyOf(target)\r\n    }\r\n    setDataSource(dataSource) {\r\n        this._dataSource = dataSource;\r\n        this.cleanState();\r\n        this._initStoreChangeHandlers()\r\n    }\r\n    _initStoreChangeHandlers() {\r\n        var dataSource = this._dataSource;\r\n        var store = null === dataSource || void 0 === dataSource ? void 0 : dataSource.store();\r\n        if (store) {\r\n            store.on(STORE_EVENTS.updating, key => {\r\n                var keyName = store.key();\r\n                if (keyName) {\r\n                    this._updatedAppointmentKeys.push({\r\n                        key: keyName,\r\n                        value: key\r\n                    })\r\n                } else {\r\n                    this._updatedAppointment = key\r\n                }\r\n            });\r\n            store.on(STORE_EVENTS.push, pushItems => {\r\n                var items = dataSource.items();\r\n                var keyName = store.key();\r\n                pushItems.forEach(pushItem => {\r\n                    var itemExists = 0 !== items.filter(item => item[keyName] === pushItem.key).length;\r\n                    if (itemExists) {\r\n                        this._updatedAppointmentKeys.push({\r\n                            key: keyName,\r\n                            value: pushItem.key\r\n                        })\r\n                    } else {\r\n                        var {\r\n                            data: data\r\n                        } = pushItem;\r\n                        data && items.push(data)\r\n                    }\r\n                });\r\n                dataSource.load()\r\n            })\r\n        }\r\n    }\r\n    getUpdatedAppointment() {\r\n        return this._updatedAppointment\r\n    }\r\n    getUpdatedAppointmentKeys() {\r\n        return this._updatedAppointmentKeys\r\n    }\r\n    cleanState() {\r\n        this._updatedAppointment = null;\r\n        this._updatedAppointmentKeys = []\r\n    }\r\n    add(rawAppointment) {\r\n        return this._dataSource.store().insert(rawAppointment).done(() => this._dataSource.load())\r\n    }\r\n    update(target, data) {\r\n        var key = this._getStoreKey(target);\r\n        var d = new Deferred;\r\n        this._dataSource.store().update(key, data).done(result => this._dataSource.load().done(() => d.resolve(result)).fail(d.reject)).fail(d.reject);\r\n        return d.promise()\r\n    }\r\n    remove(rawAppointment) {\r\n        var key = this._getStoreKey(rawAppointment);\r\n        return this._dataSource.store().remove(key).done(() => this._dataSource.load())\r\n    }\r\n    destroy() {\r\n        var _a;\r\n        var store = null === (_a = this._dataSource) || void 0 === _a ? void 0 : _a.store();\r\n        if (store) {\r\n            store.off(STORE_EVENTS.updating);\r\n            store.off(STORE_EVENTS.push)\r\n        }\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}