{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/selection/selection.strategy.standard.js)\r\n * Version: 23.1.5\r\n * Build date: Wed Aug 30 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getKeyHash } from \"../../core/utils/common\";\nimport { isDefined, isObject } from \"../../core/utils/type\";\nimport { removeDuplicates, getUniqueValues } from \"../../core/utils/array\";\nimport { isKeysEqual } from \"../../core/utils/array_compare\";\nimport dataQuery from \"../../data/query\";\nimport { Deferred, when } from \"../../core/utils/deferred\";\nimport { SelectionFilterCreator } from \"../../core/utils/selection_filter\";\nimport errors from \"../widget/ui.errors\";\nimport SelectionStrategy from \"./selection.strategy\";\nexport default class StandardStrategy extends SelectionStrategy {\n  constructor(options) {\n    super(options);\n    this._initSelectedItemKeyHash();\n  }\n  _initSelectedItemKeyHash() {\n    this._setOption(\"keyHashIndices\", this.options.equalByReference ? null : {});\n  }\n  getSelectedItemKeys() {\n    return this.options.selectedItemKeys.slice(0);\n  }\n  getSelectedItems() {\n    return this.options.selectedItems.slice(0);\n  }\n  _preserveSelectionUpdate(items, isDeselect) {\n    var keyOf = this.options.keyOf;\n    var keyIndicesToRemoveMap;\n    var keyIndex;\n    var i;\n    if (!keyOf) {\n      return;\n    }\n    var isBatchDeselect = isDeselect && items.length > 1 && !this.options.equalByReference;\n    if (isBatchDeselect) {\n      keyIndicesToRemoveMap = {};\n    }\n    for (i = 0; i < items.length; i++) {\n      var item = items[i];\n      var key = keyOf(item);\n      if (isDeselect) {\n        keyIndex = this.removeSelectedItem(key, keyIndicesToRemoveMap, null === item || void 0 === item ? void 0 : item.disabled);\n        if (keyIndicesToRemoveMap && keyIndex >= 0) {\n          keyIndicesToRemoveMap[keyIndex] = true;\n        }\n      } else {\n        this.addSelectedItem(key, item);\n      }\n    }\n    if (isBatchDeselect) {\n      this._batchRemoveSelectedItems(keyIndicesToRemoveMap);\n    }\n  }\n  _batchRemoveSelectedItems(keyIndicesToRemoveMap) {\n    var selectedItemKeys = this.options.selectedItemKeys.slice(0);\n    var selectedItems = this.options.selectedItems.slice(0);\n    this.options.selectedItemKeys.length = 0;\n    this.options.selectedItems.length = 0;\n    for (var i = 0; i < selectedItemKeys.length; i++) {\n      if (!keyIndicesToRemoveMap[i]) {\n        this.options.selectedItemKeys.push(selectedItemKeys[i]);\n        this.options.selectedItems.push(selectedItems[i]);\n      }\n    }\n    this._initSelectedItemKeyHash();\n    this.updateSelectedItemKeyHash(this.options.selectedItemKeys);\n  }\n  _loadSelectedItemsCore(keys, isDeselect, isSelectAll, filter) {\n    var forceCombinedFilter = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : false;\n    var deferred = new Deferred();\n    var key = this.options.key();\n    if (!keys.length && !isSelectAll) {\n      deferred.resolve([]);\n      return deferred;\n    }\n    if (isSelectAll && isDeselect && !filter) {\n      deferred.resolve(this.getSelectedItems());\n      return deferred;\n    }\n    var selectionFilterCreator = new SelectionFilterCreator(keys, isSelectAll);\n    var combinedFilter = selectionFilterCreator.getCombinedFilter(key, filter, forceCombinedFilter);\n    var deselectedItems = [];\n    if (isDeselect) {\n      var selectedItems = this.options.selectedItems;\n      deselectedItems = combinedFilter && keys.length !== selectedItems.length ? dataQuery(selectedItems).filter(combinedFilter).toArray() : selectedItems.slice(0);\n    }\n    var filteredItems = deselectedItems.length ? deselectedItems : this.options.plainItems(true).filter(this.options.isSelectableItem).map(this.options.getItemData);\n    var localFilter = selectionFilterCreator.getLocalFilter(this.options.keyOf, this.equalKeys.bind(this), this.options.equalByReference, key);\n    filteredItems = filteredItems.filter(localFilter);\n    if (deselectedItems.length || !isSelectAll && filteredItems.length === keys.length) {\n      deferred.resolve(filteredItems);\n    } else {\n      deferred = this._loadFilteredData(combinedFilter, localFilter, null, isSelectAll);\n    }\n    return deferred;\n  }\n  _replaceSelectionUpdate(items) {\n    var internalKeys = [];\n    var keyOf = this.options.keyOf;\n    if (!keyOf) {\n      return;\n    }\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      var key = keyOf(item);\n      internalKeys.push(key);\n    }\n    this.setSelectedItems(internalKeys, items);\n  }\n  _warnOnIncorrectKeys(keys) {\n    var allowNullValue = this.options.allowNullValue;\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      if ((!allowNullValue || null !== key) && !this.isItemKeySelected(key)) {\n        errors.log(\"W1002\", key);\n      }\n    }\n  }\n  _isMultiSelectEnabled() {\n    var mode = this.options.mode;\n    return \"all\" === mode || \"multiple\" === mode;\n  }\n  _requestInProgress() {\n    var _this$_lastLoadDeferr;\n    return \"pending\" === (null === (_this$_lastLoadDeferr = this._lastLoadDeferred) || void 0 === _this$_lastLoadDeferr ? void 0 : _this$_lastLoadDeferr.state());\n  }\n  _concatRequestsItems(keys, isDeselect, oldRequestItems, updatedKeys) {\n    var selectedItems;\n    var deselectedItems = isDeselect ? keys : [];\n    if (updatedKeys) {\n      selectedItems = updatedKeys;\n    } else {\n      selectedItems = removeDuplicates(keys, this.options.selectedItemKeys);\n    }\n    return {\n      addedItems: oldRequestItems.added.concat(selectedItems),\n      removedItems: oldRequestItems.removed.concat(deselectedItems),\n      keys: keys\n    };\n  }\n  _collectLastRequestData(keys, isDeselect, isSelectAll, updatedKeys) {\n    var isDeselectAll = isDeselect && isSelectAll;\n    var oldRequestItems = {\n      added: [],\n      removed: []\n    };\n    var multiSelectEnabled = this._isMultiSelectEnabled();\n    var lastRequestData = multiSelectEnabled ? this._lastRequestData : {};\n    if (multiSelectEnabled) {\n      if (this._shouldMergeWithLastRequest) {\n        if (isDeselectAll) {\n          this._lastLoadDeferred.reject();\n          lastRequestData = {};\n        } else if (!isKeysEqual(keys, this.options.selectedItemKeys)) {\n          oldRequestItems.added = lastRequestData.addedItems;\n          oldRequestItems.removed = lastRequestData.removedItems;\n          if (!isDeselect) {\n            this._lastLoadDeferred.reject();\n          }\n        }\n      }\n      lastRequestData = this._concatRequestsItems(keys, isDeselect, oldRequestItems, this._shouldMergeWithLastRequest ? void 0 : updatedKeys);\n    }\n    return lastRequestData;\n  }\n  _updateKeysByLastRequestData(keys, isDeselect, isSelectAll) {\n    var currentKeys = keys;\n    if (this._isMultiSelectEnabled() && this._shouldMergeWithLastRequest && !isDeselect && !isSelectAll) {\n      var _this$_lastRequestDat, _this$_lastRequestDat2;\n      currentKeys = removeDuplicates(keys.concat(null === (_this$_lastRequestDat = this._lastRequestData) || void 0 === _this$_lastRequestDat ? void 0 : _this$_lastRequestDat.addedItems), null === (_this$_lastRequestDat2 = this._lastRequestData) || void 0 === _this$_lastRequestDat2 ? void 0 : _this$_lastRequestDat2.removedItems);\n      currentKeys = getUniqueValues(currentKeys);\n    }\n    return currentKeys;\n  }\n  _loadSelectedItems(keys, isDeselect, isSelectAll, updatedKeys) {\n    var forceCombinedFilter = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : false;\n    var that = this;\n    var deferred = new Deferred();\n    var filter = that.options.filter();\n    this._shouldMergeWithLastRequest = this._requestInProgress();\n    this._lastRequestData = this._collectLastRequestData(keys, isDeselect, isSelectAll, updatedKeys);\n    when(that._lastLoadDeferred).always(function () {\n      var currentKeys = that._updateKeysByLastRequestData(keys, isDeselect, isSelectAll);\n      that._shouldMergeWithLastRequest = false;\n      that._loadSelectedItemsCore(currentKeys, isDeselect, isSelectAll, filter, forceCombinedFilter).done(deferred.resolve).fail(deferred.reject);\n    });\n    that._lastLoadDeferred = deferred;\n    return deferred;\n  }\n  selectedItemKeys(keys, preserve, isDeselect, isSelectAll, updatedKeys) {\n    var forceCombinedFilter = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : false;\n    var that = this;\n    var deferred = that._loadSelectedItems(keys, isDeselect, isSelectAll, updatedKeys, forceCombinedFilter);\n    deferred.done(function (items) {\n      if (preserve) {\n        that._preserveSelectionUpdate(items, isDeselect);\n      } else {\n        that._replaceSelectionUpdate(items);\n      }\n      that.onSelectionChanged();\n    });\n    return deferred;\n  }\n  addSelectedItem(key, itemData) {\n    if (isDefined(itemData) && !this.options.ignoreDisabledItems && itemData.disabled) {\n      if (-1 === this.options.disabledItemKeys.indexOf(key)) {\n        this.options.disabledItemKeys.push(key);\n      }\n      return;\n    }\n    var keyHash = this._getKeyHash(key);\n    if (-1 === this._indexOfSelectedItemKey(keyHash)) {\n      if (!isObject(keyHash) && this.options.keyHashIndices) {\n        this.options.keyHashIndices[keyHash] = [this.options.selectedItemKeys.length];\n      }\n      this.options.selectedItemKeys.push(key);\n      this.options.addedItemKeys.push(key);\n      this.options.addedItems.push(itemData);\n      this.options.selectedItems.push(itemData);\n    }\n  }\n  _getSelectedIndexByKey(key, ignoreIndicesMap) {\n    var selectedItemKeys = this.options.selectedItemKeys;\n    for (var index = 0; index < selectedItemKeys.length; index++) {\n      if ((!ignoreIndicesMap || !ignoreIndicesMap[index]) && this.equalKeys(selectedItemKeys[index], key)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n  _getSelectedIndexByHash(key, ignoreIndicesMap) {\n    var indices = this.options.keyHashIndices[key];\n    if (indices && indices.length > 1 && ignoreIndicesMap) {\n      indices = indices.filter(function (index) {\n        return !ignoreIndicesMap[index];\n      });\n    }\n    return indices && indices[0] >= 0 ? indices[0] : -1;\n  }\n  _indexOfSelectedItemKey(key, ignoreIndicesMap) {\n    var selectedIndex;\n    if (this.options.equalByReference) {\n      selectedIndex = this.options.selectedItemKeys.indexOf(key);\n    } else if (isObject(key)) {\n      selectedIndex = this._getSelectedIndexByKey(key, ignoreIndicesMap);\n    } else {\n      selectedIndex = this._getSelectedIndexByHash(key, ignoreIndicesMap);\n    }\n    return selectedIndex;\n  }\n  _shiftSelectedKeyIndices(keyIndex) {\n    for (var currentKeyIndex = keyIndex; currentKeyIndex < this.options.selectedItemKeys.length; currentKeyIndex++) {\n      var currentKey = this.options.selectedItemKeys[currentKeyIndex];\n      var currentKeyHash = getKeyHash(currentKey);\n      var currentKeyIndices = this.options.keyHashIndices[currentKeyHash];\n      if (!currentKeyIndices) {\n        continue;\n      }\n      for (var i = 0; i < currentKeyIndices.length; i++) {\n        if (currentKeyIndices[i] > keyIndex) {\n          currentKeyIndices[i]--;\n        }\n      }\n    }\n  }\n  removeSelectedItem(key, keyIndicesToRemoveMap, isDisabled) {\n    if (!this.options.ignoreDisabledItems && isDisabled) {\n      return;\n    }\n    var keyHash = this._getKeyHash(key);\n    var isBatchDeselect = !!keyIndicesToRemoveMap;\n    var keyIndex = this._indexOfSelectedItemKey(keyHash, keyIndicesToRemoveMap);\n    if (keyIndex < 0) {\n      return keyIndex;\n    }\n    this.options.removedItemKeys.push(key);\n    this.options.removedItems.push(this.options.selectedItems[keyIndex]);\n    if (isBatchDeselect) {\n      return keyIndex;\n    }\n    this.options.selectedItemKeys.splice(keyIndex, 1);\n    this.options.selectedItems.splice(keyIndex, 1);\n    if (isObject(keyHash) || !this.options.keyHashIndices) {\n      return keyIndex;\n    }\n    var keyIndices = this.options.keyHashIndices[keyHash];\n    if (!keyIndices) {\n      return keyIndex;\n    }\n    keyIndices.shift();\n    if (!keyIndices.length) {\n      delete this.options.keyHashIndices[keyHash];\n    }\n    this._shiftSelectedKeyIndices(keyIndex);\n    return keyIndex;\n  }\n  _updateAddedItemKeys(keys, items) {\n    for (var i = 0; i < keys.length; i++) {\n      if (!this.isItemKeySelected(keys[i])) {\n        this.options.addedItemKeys.push(keys[i]);\n        this.options.addedItems.push(items[i]);\n      }\n    }\n  }\n  _updateRemovedItemKeys(keys, oldSelectedKeys, oldSelectedItems) {\n    for (var i = 0; i < oldSelectedKeys.length; i++) {\n      if (!this.isItemKeySelected(oldSelectedKeys[i])) {\n        this.options.removedItemKeys.push(oldSelectedKeys[i]);\n        this.options.removedItems.push(oldSelectedItems[i]);\n      }\n    }\n  }\n  _isItemSelectionInProgress(key, checkPending) {\n    var shouldCheckPending = checkPending && this._lastRequestData && this._requestInProgress();\n    if (shouldCheckPending) {\n      var _this$_lastRequestDat3;\n      var addedItems = null !== (_this$_lastRequestDat3 = this._lastRequestData.addedItems) && void 0 !== _this$_lastRequestDat3 ? _this$_lastRequestDat3 : [];\n      return addedItems.includes(key);\n    } else {\n      return false;\n    }\n  }\n  _getKeyHash(key) {\n    return this.options.equalByReference ? key : getKeyHash(key);\n  }\n  setSelectedItems(keys, items) {\n    this._updateAddedItemKeys(keys, items);\n    var oldSelectedKeys = this.options.selectedItemKeys;\n    var oldSelectedItems = this.options.selectedItems;\n    if (!this.options.equalByReference) {\n      this._initSelectedItemKeyHash();\n      this.updateSelectedItemKeyHash(keys);\n    }\n    this._setOption(\"selectedItemKeys\", keys);\n    this._setOption(\"selectedItems\", items);\n    this._updateRemovedItemKeys(keys, oldSelectedKeys, oldSelectedItems);\n  }\n  isItemDataSelected(itemData) {\n    var options = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n    var key = this.options.keyOf(itemData);\n    return this.isItemKeySelected(key, options);\n  }\n  isItemKeySelected(key) {\n    var options = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n    var result = this._isItemSelectionInProgress(key, options.checkPending);\n    if (!result) {\n      var keyHash = this._getKeyHash(key);\n      var index = this._indexOfSelectedItemKey(keyHash);\n      result = -1 !== index;\n    }\n    return result;\n  }\n  getSelectAllState(visibleOnly) {\n    if (visibleOnly) {\n      return this._getVisibleSelectAllState();\n    } else {\n      return this._getFullSelectAllState();\n    }\n  }\n  loadSelectedItemsWithFilter() {\n    var keyExpr = this.options.key();\n    var keys = this.getSelectedItemKeys();\n    var filter = this.options.filter();\n    if (!keys.length) {\n      return Deferred().resolve([]);\n    }\n    var selectionFilterCreator = new SelectionFilterCreator(keys);\n    var combinedFilter = selectionFilterCreator.getCombinedFilter(keyExpr, filter, true);\n    return this._loadFilteredData(combinedFilter);\n  }\n}","map":{"version":3,"names":["getKeyHash","isDefined","isObject","removeDuplicates","getUniqueValues","isKeysEqual","dataQuery","Deferred","when","SelectionFilterCreator","errors","SelectionStrategy","StandardStrategy","constructor","options","_initSelectedItemKeyHash","_setOption","equalByReference","getSelectedItemKeys","selectedItemKeys","slice","getSelectedItems","selectedItems","_preserveSelectionUpdate","items","isDeselect","keyOf","keyIndicesToRemoveMap","keyIndex","i","isBatchDeselect","length","item","key","removeSelectedItem","disabled","addSelectedItem","_batchRemoveSelectedItems","push","updateSelectedItemKeyHash","_loadSelectedItemsCore","keys","isSelectAll","filter","forceCombinedFilter","arguments","deferred","resolve","selectionFilterCreator","combinedFilter","getCombinedFilter","deselectedItems","toArray","filteredItems","plainItems","isSelectableItem","map","getItemData","localFilter","getLocalFilter","equalKeys","bind","_loadFilteredData","_replaceSelectionUpdate","internalKeys","setSelectedItems","_warnOnIncorrectKeys","allowNullValue","isItemKeySelected","log","_isMultiSelectEnabled","mode","_requestInProgress","_this$_lastLoadDeferr","_lastLoadDeferred","state","_concatRequestsItems","oldRequestItems","updatedKeys","addedItems","added","concat","removedItems","removed","_collectLastRequestData","isDeselectAll","multiSelectEnabled","lastRequestData","_lastRequestData","_shouldMergeWithLastRequest","reject","_updateKeysByLastRequestData","currentKeys","_this$_lastRequestDat","_this$_lastRequestDat2","_loadSelectedItems","that","always","done","fail","preserve","onSelectionChanged","itemData","ignoreDisabledItems","disabledItemKeys","indexOf","keyHash","_getKeyHash","_indexOfSelectedItemKey","keyHashIndices","addedItemKeys","_getSelectedIndexByKey","ignoreIndicesMap","index","_getSelectedIndexByHash","indices","selectedIndex","_shiftSelectedKeyIndices","currentKeyIndex","currentKey","currentKeyHash","currentKeyIndices","isDisabled","removedItemKeys","splice","keyIndices","shift","_updateAddedItemKeys","_updateRemovedItemKeys","oldSelectedKeys","oldSelectedItems","_isItemSelectionInProgress","checkPending","shouldCheckPending","_this$_lastRequestDat3","includes","isItemDataSelected","result","getSelectAllState","visibleOnly","_getVisibleSelectAllState","_getFullSelectAllState","loadSelectedItemsWithFilter","keyExpr"],"sources":["C:/Users/Michal Abargel/Desktop/FULLSTACK_PROJECTS/Patient-Management/client/node_modules/devextreme/esm/ui/selection/selection.strategy.standard.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/selection/selection.strategy.standard.js)\r\n * Version: 23.1.5\r\n * Build date: Wed Aug 30 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getKeyHash\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    isDefined,\r\n    isObject\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    removeDuplicates,\r\n    getUniqueValues\r\n} from \"../../core/utils/array\";\r\nimport {\r\n    isKeysEqual\r\n} from \"../../core/utils/array_compare\";\r\nimport dataQuery from \"../../data/query\";\r\nimport {\r\n    Deferred,\r\n    when\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    SelectionFilterCreator\r\n} from \"../../core/utils/selection_filter\";\r\nimport errors from \"../widget/ui.errors\";\r\nimport SelectionStrategy from \"./selection.strategy\";\r\nexport default class StandardStrategy extends SelectionStrategy {\r\n    constructor(options) {\r\n        super(options);\r\n        this._initSelectedItemKeyHash()\r\n    }\r\n    _initSelectedItemKeyHash() {\r\n        this._setOption(\"keyHashIndices\", this.options.equalByReference ? null : {})\r\n    }\r\n    getSelectedItemKeys() {\r\n        return this.options.selectedItemKeys.slice(0)\r\n    }\r\n    getSelectedItems() {\r\n        return this.options.selectedItems.slice(0)\r\n    }\r\n    _preserveSelectionUpdate(items, isDeselect) {\r\n        var keyOf = this.options.keyOf;\r\n        var keyIndicesToRemoveMap;\r\n        var keyIndex;\r\n        var i;\r\n        if (!keyOf) {\r\n            return\r\n        }\r\n        var isBatchDeselect = isDeselect && items.length > 1 && !this.options.equalByReference;\r\n        if (isBatchDeselect) {\r\n            keyIndicesToRemoveMap = {}\r\n        }\r\n        for (i = 0; i < items.length; i++) {\r\n            var item = items[i];\r\n            var key = keyOf(item);\r\n            if (isDeselect) {\r\n                keyIndex = this.removeSelectedItem(key, keyIndicesToRemoveMap, null === item || void 0 === item ? void 0 : item.disabled);\r\n                if (keyIndicesToRemoveMap && keyIndex >= 0) {\r\n                    keyIndicesToRemoveMap[keyIndex] = true\r\n                }\r\n            } else {\r\n                this.addSelectedItem(key, item)\r\n            }\r\n        }\r\n        if (isBatchDeselect) {\r\n            this._batchRemoveSelectedItems(keyIndicesToRemoveMap)\r\n        }\r\n    }\r\n    _batchRemoveSelectedItems(keyIndicesToRemoveMap) {\r\n        var selectedItemKeys = this.options.selectedItemKeys.slice(0);\r\n        var selectedItems = this.options.selectedItems.slice(0);\r\n        this.options.selectedItemKeys.length = 0;\r\n        this.options.selectedItems.length = 0;\r\n        for (var i = 0; i < selectedItemKeys.length; i++) {\r\n            if (!keyIndicesToRemoveMap[i]) {\r\n                this.options.selectedItemKeys.push(selectedItemKeys[i]);\r\n                this.options.selectedItems.push(selectedItems[i])\r\n            }\r\n        }\r\n        this._initSelectedItemKeyHash();\r\n        this.updateSelectedItemKeyHash(this.options.selectedItemKeys)\r\n    }\r\n    _loadSelectedItemsCore(keys, isDeselect, isSelectAll, filter) {\r\n        var forceCombinedFilter = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : false;\r\n        var deferred = new Deferred;\r\n        var key = this.options.key();\r\n        if (!keys.length && !isSelectAll) {\r\n            deferred.resolve([]);\r\n            return deferred\r\n        }\r\n        if (isSelectAll && isDeselect && !filter) {\r\n            deferred.resolve(this.getSelectedItems());\r\n            return deferred\r\n        }\r\n        var selectionFilterCreator = new SelectionFilterCreator(keys, isSelectAll);\r\n        var combinedFilter = selectionFilterCreator.getCombinedFilter(key, filter, forceCombinedFilter);\r\n        var deselectedItems = [];\r\n        if (isDeselect) {\r\n            var selectedItems = this.options.selectedItems;\r\n            deselectedItems = combinedFilter && keys.length !== selectedItems.length ? dataQuery(selectedItems).filter(combinedFilter).toArray() : selectedItems.slice(0)\r\n        }\r\n        var filteredItems = deselectedItems.length ? deselectedItems : this.options.plainItems(true).filter(this.options.isSelectableItem).map(this.options.getItemData);\r\n        var localFilter = selectionFilterCreator.getLocalFilter(this.options.keyOf, this.equalKeys.bind(this), this.options.equalByReference, key);\r\n        filteredItems = filteredItems.filter(localFilter);\r\n        if (deselectedItems.length || !isSelectAll && filteredItems.length === keys.length) {\r\n            deferred.resolve(filteredItems)\r\n        } else {\r\n            deferred = this._loadFilteredData(combinedFilter, localFilter, null, isSelectAll)\r\n        }\r\n        return deferred\r\n    }\r\n    _replaceSelectionUpdate(items) {\r\n        var internalKeys = [];\r\n        var keyOf = this.options.keyOf;\r\n        if (!keyOf) {\r\n            return\r\n        }\r\n        for (var i = 0; i < items.length; i++) {\r\n            var item = items[i];\r\n            var key = keyOf(item);\r\n            internalKeys.push(key)\r\n        }\r\n        this.setSelectedItems(internalKeys, items)\r\n    }\r\n    _warnOnIncorrectKeys(keys) {\r\n        var allowNullValue = this.options.allowNullValue;\r\n        for (var i = 0; i < keys.length; i++) {\r\n            var key = keys[i];\r\n            if ((!allowNullValue || null !== key) && !this.isItemKeySelected(key)) {\r\n                errors.log(\"W1002\", key)\r\n            }\r\n        }\r\n    }\r\n    _isMultiSelectEnabled() {\r\n        var mode = this.options.mode;\r\n        return \"all\" === mode || \"multiple\" === mode\r\n    }\r\n    _requestInProgress() {\r\n        var _this$_lastLoadDeferr;\r\n        return \"pending\" === (null === (_this$_lastLoadDeferr = this._lastLoadDeferred) || void 0 === _this$_lastLoadDeferr ? void 0 : _this$_lastLoadDeferr.state())\r\n    }\r\n    _concatRequestsItems(keys, isDeselect, oldRequestItems, updatedKeys) {\r\n        var selectedItems;\r\n        var deselectedItems = isDeselect ? keys : [];\r\n        if (updatedKeys) {\r\n            selectedItems = updatedKeys\r\n        } else {\r\n            selectedItems = removeDuplicates(keys, this.options.selectedItemKeys)\r\n        }\r\n        return {\r\n            addedItems: oldRequestItems.added.concat(selectedItems),\r\n            removedItems: oldRequestItems.removed.concat(deselectedItems),\r\n            keys: keys\r\n        }\r\n    }\r\n    _collectLastRequestData(keys, isDeselect, isSelectAll, updatedKeys) {\r\n        var isDeselectAll = isDeselect && isSelectAll;\r\n        var oldRequestItems = {\r\n            added: [],\r\n            removed: []\r\n        };\r\n        var multiSelectEnabled = this._isMultiSelectEnabled();\r\n        var lastRequestData = multiSelectEnabled ? this._lastRequestData : {};\r\n        if (multiSelectEnabled) {\r\n            if (this._shouldMergeWithLastRequest) {\r\n                if (isDeselectAll) {\r\n                    this._lastLoadDeferred.reject();\r\n                    lastRequestData = {}\r\n                } else if (!isKeysEqual(keys, this.options.selectedItemKeys)) {\r\n                    oldRequestItems.added = lastRequestData.addedItems;\r\n                    oldRequestItems.removed = lastRequestData.removedItems;\r\n                    if (!isDeselect) {\r\n                        this._lastLoadDeferred.reject()\r\n                    }\r\n                }\r\n            }\r\n            lastRequestData = this._concatRequestsItems(keys, isDeselect, oldRequestItems, this._shouldMergeWithLastRequest ? void 0 : updatedKeys)\r\n        }\r\n        return lastRequestData\r\n    }\r\n    _updateKeysByLastRequestData(keys, isDeselect, isSelectAll) {\r\n        var currentKeys = keys;\r\n        if (this._isMultiSelectEnabled() && this._shouldMergeWithLastRequest && !isDeselect && !isSelectAll) {\r\n            var _this$_lastRequestDat, _this$_lastRequestDat2;\r\n            currentKeys = removeDuplicates(keys.concat(null === (_this$_lastRequestDat = this._lastRequestData) || void 0 === _this$_lastRequestDat ? void 0 : _this$_lastRequestDat.addedItems), null === (_this$_lastRequestDat2 = this._lastRequestData) || void 0 === _this$_lastRequestDat2 ? void 0 : _this$_lastRequestDat2.removedItems);\r\n            currentKeys = getUniqueValues(currentKeys)\r\n        }\r\n        return currentKeys\r\n    }\r\n    _loadSelectedItems(keys, isDeselect, isSelectAll, updatedKeys) {\r\n        var forceCombinedFilter = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : false;\r\n        var that = this;\r\n        var deferred = new Deferred;\r\n        var filter = that.options.filter();\r\n        this._shouldMergeWithLastRequest = this._requestInProgress();\r\n        this._lastRequestData = this._collectLastRequestData(keys, isDeselect, isSelectAll, updatedKeys);\r\n        when(that._lastLoadDeferred).always((function() {\r\n            var currentKeys = that._updateKeysByLastRequestData(keys, isDeselect, isSelectAll);\r\n            that._shouldMergeWithLastRequest = false;\r\n            that._loadSelectedItemsCore(currentKeys, isDeselect, isSelectAll, filter, forceCombinedFilter).done(deferred.resolve).fail(deferred.reject)\r\n        }));\r\n        that._lastLoadDeferred = deferred;\r\n        return deferred\r\n    }\r\n    selectedItemKeys(keys, preserve, isDeselect, isSelectAll, updatedKeys) {\r\n        var forceCombinedFilter = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : false;\r\n        var that = this;\r\n        var deferred = that._loadSelectedItems(keys, isDeselect, isSelectAll, updatedKeys, forceCombinedFilter);\r\n        deferred.done((function(items) {\r\n            if (preserve) {\r\n                that._preserveSelectionUpdate(items, isDeselect)\r\n            } else {\r\n                that._replaceSelectionUpdate(items)\r\n            }\r\n            that.onSelectionChanged()\r\n        }));\r\n        return deferred\r\n    }\r\n    addSelectedItem(key, itemData) {\r\n        if (isDefined(itemData) && !this.options.ignoreDisabledItems && itemData.disabled) {\r\n            if (-1 === this.options.disabledItemKeys.indexOf(key)) {\r\n                this.options.disabledItemKeys.push(key)\r\n            }\r\n            return\r\n        }\r\n        var keyHash = this._getKeyHash(key);\r\n        if (-1 === this._indexOfSelectedItemKey(keyHash)) {\r\n            if (!isObject(keyHash) && this.options.keyHashIndices) {\r\n                this.options.keyHashIndices[keyHash] = [this.options.selectedItemKeys.length]\r\n            }\r\n            this.options.selectedItemKeys.push(key);\r\n            this.options.addedItemKeys.push(key);\r\n            this.options.addedItems.push(itemData);\r\n            this.options.selectedItems.push(itemData)\r\n        }\r\n    }\r\n    _getSelectedIndexByKey(key, ignoreIndicesMap) {\r\n        var selectedItemKeys = this.options.selectedItemKeys;\r\n        for (var index = 0; index < selectedItemKeys.length; index++) {\r\n            if ((!ignoreIndicesMap || !ignoreIndicesMap[index]) && this.equalKeys(selectedItemKeys[index], key)) {\r\n                return index\r\n            }\r\n        }\r\n        return -1\r\n    }\r\n    _getSelectedIndexByHash(key, ignoreIndicesMap) {\r\n        var indices = this.options.keyHashIndices[key];\r\n        if (indices && indices.length > 1 && ignoreIndicesMap) {\r\n            indices = indices.filter((function(index) {\r\n                return !ignoreIndicesMap[index]\r\n            }))\r\n        }\r\n        return indices && indices[0] >= 0 ? indices[0] : -1\r\n    }\r\n    _indexOfSelectedItemKey(key, ignoreIndicesMap) {\r\n        var selectedIndex;\r\n        if (this.options.equalByReference) {\r\n            selectedIndex = this.options.selectedItemKeys.indexOf(key)\r\n        } else if (isObject(key)) {\r\n            selectedIndex = this._getSelectedIndexByKey(key, ignoreIndicesMap)\r\n        } else {\r\n            selectedIndex = this._getSelectedIndexByHash(key, ignoreIndicesMap)\r\n        }\r\n        return selectedIndex\r\n    }\r\n    _shiftSelectedKeyIndices(keyIndex) {\r\n        for (var currentKeyIndex = keyIndex; currentKeyIndex < this.options.selectedItemKeys.length; currentKeyIndex++) {\r\n            var currentKey = this.options.selectedItemKeys[currentKeyIndex];\r\n            var currentKeyHash = getKeyHash(currentKey);\r\n            var currentKeyIndices = this.options.keyHashIndices[currentKeyHash];\r\n            if (!currentKeyIndices) {\r\n                continue\r\n            }\r\n            for (var i = 0; i < currentKeyIndices.length; i++) {\r\n                if (currentKeyIndices[i] > keyIndex) {\r\n                    currentKeyIndices[i]--\r\n                }\r\n            }\r\n        }\r\n    }\r\n    removeSelectedItem(key, keyIndicesToRemoveMap, isDisabled) {\r\n        if (!this.options.ignoreDisabledItems && isDisabled) {\r\n            return\r\n        }\r\n        var keyHash = this._getKeyHash(key);\r\n        var isBatchDeselect = !!keyIndicesToRemoveMap;\r\n        var keyIndex = this._indexOfSelectedItemKey(keyHash, keyIndicesToRemoveMap);\r\n        if (keyIndex < 0) {\r\n            return keyIndex\r\n        }\r\n        this.options.removedItemKeys.push(key);\r\n        this.options.removedItems.push(this.options.selectedItems[keyIndex]);\r\n        if (isBatchDeselect) {\r\n            return keyIndex\r\n        }\r\n        this.options.selectedItemKeys.splice(keyIndex, 1);\r\n        this.options.selectedItems.splice(keyIndex, 1);\r\n        if (isObject(keyHash) || !this.options.keyHashIndices) {\r\n            return keyIndex\r\n        }\r\n        var keyIndices = this.options.keyHashIndices[keyHash];\r\n        if (!keyIndices) {\r\n            return keyIndex\r\n        }\r\n        keyIndices.shift();\r\n        if (!keyIndices.length) {\r\n            delete this.options.keyHashIndices[keyHash]\r\n        }\r\n        this._shiftSelectedKeyIndices(keyIndex);\r\n        return keyIndex\r\n    }\r\n    _updateAddedItemKeys(keys, items) {\r\n        for (var i = 0; i < keys.length; i++) {\r\n            if (!this.isItemKeySelected(keys[i])) {\r\n                this.options.addedItemKeys.push(keys[i]);\r\n                this.options.addedItems.push(items[i])\r\n            }\r\n        }\r\n    }\r\n    _updateRemovedItemKeys(keys, oldSelectedKeys, oldSelectedItems) {\r\n        for (var i = 0; i < oldSelectedKeys.length; i++) {\r\n            if (!this.isItemKeySelected(oldSelectedKeys[i])) {\r\n                this.options.removedItemKeys.push(oldSelectedKeys[i]);\r\n                this.options.removedItems.push(oldSelectedItems[i])\r\n            }\r\n        }\r\n    }\r\n    _isItemSelectionInProgress(key, checkPending) {\r\n        var shouldCheckPending = checkPending && this._lastRequestData && this._requestInProgress();\r\n        if (shouldCheckPending) {\r\n            var _this$_lastRequestDat3;\r\n            var addedItems = null !== (_this$_lastRequestDat3 = this._lastRequestData.addedItems) && void 0 !== _this$_lastRequestDat3 ? _this$_lastRequestDat3 : [];\r\n            return addedItems.includes(key)\r\n        } else {\r\n            return false\r\n        }\r\n    }\r\n    _getKeyHash(key) {\r\n        return this.options.equalByReference ? key : getKeyHash(key)\r\n    }\r\n    setSelectedItems(keys, items) {\r\n        this._updateAddedItemKeys(keys, items);\r\n        var oldSelectedKeys = this.options.selectedItemKeys;\r\n        var oldSelectedItems = this.options.selectedItems;\r\n        if (!this.options.equalByReference) {\r\n            this._initSelectedItemKeyHash();\r\n            this.updateSelectedItemKeyHash(keys)\r\n        }\r\n        this._setOption(\"selectedItemKeys\", keys);\r\n        this._setOption(\"selectedItems\", items);\r\n        this._updateRemovedItemKeys(keys, oldSelectedKeys, oldSelectedItems)\r\n    }\r\n    isItemDataSelected(itemData) {\r\n        var options = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\r\n        var key = this.options.keyOf(itemData);\r\n        return this.isItemKeySelected(key, options)\r\n    }\r\n    isItemKeySelected(key) {\r\n        var options = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\r\n        var result = this._isItemSelectionInProgress(key, options.checkPending);\r\n        if (!result) {\r\n            var keyHash = this._getKeyHash(key);\r\n            var index = this._indexOfSelectedItemKey(keyHash);\r\n            result = -1 !== index\r\n        }\r\n        return result\r\n    }\r\n    getSelectAllState(visibleOnly) {\r\n        if (visibleOnly) {\r\n            return this._getVisibleSelectAllState()\r\n        } else {\r\n            return this._getFullSelectAllState()\r\n        }\r\n    }\r\n    loadSelectedItemsWithFilter() {\r\n        var keyExpr = this.options.key();\r\n        var keys = this.getSelectedItemKeys();\r\n        var filter = this.options.filter();\r\n        if (!keys.length) {\r\n            return Deferred().resolve([])\r\n        }\r\n        var selectionFilterCreator = new SelectionFilterCreator(keys);\r\n        var combinedFilter = selectionFilterCreator.getCombinedFilter(keyExpr, filter, true);\r\n        return this._loadFilteredData(combinedFilter)\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}